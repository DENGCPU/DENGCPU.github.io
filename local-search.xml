<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>é¢è¯•04-ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</title>
    <link href="/2020/12/10/%E9%9D%A2%E8%AF%9504-%E7%B1%BB%E7%BB%84%E4%BB%B6%E4%B8%8E%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%E5%91%A2%EF%BC%9F/"/>
    <url>/2020/12/10/%E9%9D%A2%E8%AF%9504-%E7%B1%BB%E7%BB%84%E4%BB%B6%E4%B8%8E%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%E5%91%A2%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<h4 id="é¢è¯•åœºæ™¯4ï¼šç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆæ¯”è¾ƒé¢˜ï¼‰"><a href="#é¢è¯•åœºæ™¯4ï¼šç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆæ¯”è¾ƒé¢˜ï¼‰" class="headerlink" title="é¢è¯•åœºæ™¯4ï¼šç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆæ¯”è¾ƒé¢˜ï¼‰"></a>é¢è¯•åœºæ™¯4ï¼šç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆæ¯”è¾ƒé¢˜ï¼‰</h4><p>æè¿°åŒºåˆ«ï¼Œå°±æ˜¯æ±‚åŒå­˜å¼‚çš„è¿‡ç¨‹ï¼š</p><ul><li>åœ¨ç¡®è®¤å…±æ€§çš„åŸºç¡€ä¸Šï¼Œæ‰èƒ½æ‰¾åˆ°å®ƒç‹¬ç‰¹çš„ä¸ªæ€§</li><li>é€šè¿‡å…·ä½“çš„åœºæ™¯é€ä¸ªé˜è¿°å®ƒçš„ä¸ªæ€§ã€‚</li></ul><p>é’ˆå¯¹â€œ ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿâ€è¿™ä¸ªé¢è¯•é¢˜ï¼Œé¢è¯•å®˜æƒ³çŸ¥é“çš„æ˜¯ï¼š</p><ul><li>ä½ å¯¹ç»„ä»¶çš„ä¸¤ç§ç¼–å†™æ¨¡å¼æ˜¯å¦äº†è§£</li><li>ä½ æ˜¯å¦å…·å¤‡åœ¨åˆé€‚çš„åœºæ™¯ä¸‹é€‰ç”¨åˆé€‚æŠ€æœ¯æ ˆçš„èƒ½åŠ›</li></ul><h4 id="ä¸€ã€å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„ç›¸åŒç‚¹"><a href="#ä¸€ã€å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„ç›¸åŒç‚¹" class="headerlink" title="ä¸€ã€å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„ç›¸åŒç‚¹"></a>ä¸€ã€å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„ç›¸åŒç‚¹</h4><p>&emsp;ç»„ä»¶æ˜¯Rectå¯å¤ç”¨çš„æœ€å°ä»£ç ç‰‡æ®µï¼Œå®ƒä»¬ä¼šè¿”å›è¦åœ¨é¡µé¢ä¸­æ¸²æŸ“çš„Reactå…ƒç´ ã€‚ä¹Ÿæ­£å› ä¸ºç»„ä»¶æ—¶Reactçš„æœ€å°ç¼–ç å•ä½ï¼Œæ‰€ä»¥æ— è®ºæ—¶ç±»ç»„ä»¶è¿˜æ˜¯å‡½æ•°ç»„ä»¶ï¼Œåœ¨åŸºæœ¬ä½¿ç”¨æ–¹å¼å’Œæœ€ç»ˆå‘ˆç°çš„æ•ˆæœä¸Šéƒ½æ—¶å®Œå…¨ä¸€è‡´çš„ã€‚<strong>å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ä½œä¸ºç»„ä»¶æœ¬çœçš„æ‰€æœ‰åŸºç¡€åŠŸèƒ½éƒ½æ˜¯ä¸€è‡´çš„ï¼Œéƒ½å¯ä»¥ç”¨å®ƒä»¬ä½œä¸ºåŸºç¡€ç»„ä»¶å±•ç¤ºUIã€‚</strong></p><p>&emsp;ä»ä½¿ç”¨è€…çš„è§’åº¦çœ‹ï¼Œå¾ˆéš¾ä»ä½¿ç”¨ä½“éªŒä¸ŠåŒºåˆ†ä¸¤è€…ï¼Œè€Œä¸”åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œé—­åŒ…å’Œç±»çš„æ€§èƒ½åªæœ‰åœ¨æç«¯åœºæ™¯ä¸‹æ‰æœ‰æ˜æ˜¾çš„å·®åˆ«ã€‚ä½ ç”šè‡³å¯ä»¥å°†ä¸€ä¸ªç±»ç»„ä»¶æ”¹å†™ä¸ºå‡½æ•°ç»„ä»¶ï¼Œæˆ–è€…æŠŠå‡½ç»„ä»¶æ”¹æˆä¸€ä¸ªç±»ç»„ä»¶ï¼ˆè™½ç„¶ä¸æ¨èè¿™ç§é‡æ„ï¼‰</p><p>&emsp;åŸºæœ¬ä¸Šå¯ä»¥è®¤ä¸ºä¸¤ç§ç»„ä»¶æ—¶å®Œå…¨ä¸€è‡´çš„ã€‚</p><h4 id="äºŒã€å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„ä¸åŒç‚¹"><a href="#äºŒã€å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„ä¸åŒç‚¹" class="headerlink" title="äºŒã€å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„ä¸åŒç‚¹"></a>äºŒã€å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„ä¸åŒç‚¹</h4><p><strong>1ã€ä¸¤ç§ç»„ä»¶ä»£è¡¨äº†ä¸¤ç§ä¸åŒçš„è®¾è®¡æ€æƒ³ä¸å¿ƒæ™ºæ¨¡å¼ã€‚</strong></p><ul><li>ç±»ç»„ä»¶çš„æ ¹åŸºæ˜¯OOP(é¢å‘å¯¹è±¡ç¼–ç¨‹)ï¼Œæ‰€ä»¥å®ƒæœ‰ç»§æ‰¿ã€æœ‰å±æ€§ã€æœ‰å†…éƒ¨çŠ¶æ€çš„ç®¡ç†ã€‚</li><li>å‡½æ•°ç»„ä»¶çš„æ ¹åŸºæ˜¯FPï¼ˆå‡½æ•°å¼ç¼–ç¨‹ï¼‰ï¼Œå®ƒå±äºç»“æ„åŒ–ç¼–ç¨‹çš„ä¸€ç§ï¼Œä¸æ•°å­¦å‡½æ•°æ€æƒ³ç±»ä¼¼ã€‚ä¹Ÿå°±æ˜¯å‡å®šè¾“å…¥ä¸è¾“å‡ºå­˜åœ¨æŸç§ç‰¹å®šçš„æ˜ å°„å…³ç³»ï¼Œé‚£ä¹ˆåœ¨è¾“å…¥ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œè¾“å‡ºå¿…ç„¶æ˜¯ç¡®å®šçš„ã€‚</li></ul><p>æœ¬è´¨ä¸Šä¸¤è€…æœ€å¤§çš„ä¸åŒï¼š<strong>ç›¸æ¯”è¾ƒäºç±»ç»„ä»¶ï¼Œå‡½æ•°ç»„ä»¶æ›´çº¯ç²¹ã€ç®€å•ã€æ˜“äºæµ‹è¯•ã€‚</strong></p><p>ï¼ˆå‡½æ•°ç»„ä»¶çš„ç¡®å®šæ€§ï¼šåœ¨å‡½æ•°ç»„ä»¶çš„é—­åŒ…ä¸­ï¼Œå®ƒæ•è·çš„å€¼æ°¸è¿œæ˜¯ç¡®å®šä¸”å®‰å…¨çš„ã€‚ä¹Ÿå«<font color=green>å€¼æ•è·ç‰¹æ€§</font>ï¼‰</p><p><strong>2ã€ç±»ç»„ä»¶çš„ç‹¬æœ‰èƒ½åŠ› VS  å‡½æ•°ç»„ä»¶+Hooks</strong></p><p><strong>ç±»ç»„ä»¶å¯ä»¥é€šè¿‡ç”Ÿå‘½å‘¨æœŸåŒ…è£…ä¸šåŠ¡é€»è¾‘ï¼Œè¿™æ˜¯ç±»ç»„ä»¶æ‰€ç‰¹æœ‰çš„ã€‚</strong> æˆ‘ä»¬å¯ä»¥åœ¨componentDidMountã€componentWillUnmoutã€shouldComponentUpdateç­‰ç”Ÿå‘½å‘¨æœŸå®Œæˆä¸€äº›ä¸šåŠ¡é€»è¾‘ã€‚ </p><p>åœ¨è¿˜æ²¡æœ‰Hooksçš„å¹´ä»£ï¼Œå‡½æ•°ç»„ä»¶çš„èƒ½åŠ›å¾ˆå¼±ï¼Œåªèƒ½ç”¨é«˜é˜¶ç»„ä»¶åŒ…è£¹å‡½æ•°ç»„ä»¶æ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸï¼Œä½†æ˜¯è¿™æ ·åšå¹¶æ²¡æœ‰è§£å†³ä¸šåŠ¡é€»è¾‘æºæ‚åœ¨ç”Ÿå‘½å‘¨æœŸä¸­çš„é—®é¢˜ã€‚åæ¥Reactå›¢é˜Ÿå¼•å…¥äº†Hooks,å¹¶åŸºäºHooksåˆ›å»ºäº†ä¸€ä¸ªå®Œå…¨è€³ç›®ä¸€æ–°çš„æ–¹æ¡ˆï¼šä¸æ˜¯è®©å‡½æ•°ç»„ä»¶å»æ¨¡ä»¿ç±»ç»„ä»¶çš„åŠŸèƒ½ï¼Œè€Œæ˜¯æä¾›æ–°çš„å¼€å‘æ¨¡å¼ï¼Œè®©ç»„ä»¶æ¸²æŸ“å’Œä¸šåŠ¡é€»è¾‘æ›´åŠ åˆ†ç¦»ã€‚</p><p>å°ç»“ï¼šåœ¨Hooksçš„åŠ æŒä¸‹ï¼Œå‡½æ•°å¼ç»„ä»¶ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼ç”Ÿå‘½å‘¨æœŸçš„èƒ½åŠ›ï¼Œç±»ç»„ä»¶æ‰€ç‰¹æœ‰çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿä¸å†æ˜¯å…¶ç‹¬æœ‰çš„åŠŸèƒ½ã€‚ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶çš„è¾¹ç•Œæ¨¡ç³ŠåŒ–ã€‚</p><p><strong>3ã€è®¾è®¡æ¨¡å¼</strong></p><p>åœ¨è®¾è®¡æ¨¡å¼ä¸Šï¼Œå› ä¸ºç±»æœ¬èº«çš„ç‰¹ç‚¹ï¼Œç±»ç»„ä»¶æ˜¯å¯ä»¥å®ç°ç»§æ‰¿çš„ï¼Œè€Œå‡½æ•°ç»„ä»¶ç¼ºå°‘ç»§æ‰¿çš„èƒ½åŠ›ã€‚ ä½†æ˜¯Reactæœ¬èº«æœ‰æ¡é“å¾‹ï¼š<strong>ç»„åˆä¼˜äºç»§æ‰¿</strong>ã€‚å¹¶ä¸æ¨å´‡ç»§æ‰¿å·²æœ‰ç»„ä»¶ï¼Œå› ä¸ºç»§æ‰¿çš„çµæ´»æ€§æ›´å·®ï¼Œç»†èŠ‚å±è”½è¿‡å¤šã€‚</p><p><strong>4ã€æ€§èƒ½ä¼˜åŒ–</strong></p><p>ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶è¿›è¡Œæ€§èƒ½ä¼˜åŒ–çš„æ–¹å¼: </p><ul><li>ç±»ç»„ä»¶çš„ä¼˜åŒ–ä¸»è¦æ˜¯ä¾é  shouldComponentUpdateå‡½æ•°å»é˜»æ–­æ¸²æŸ“</li><li>å‡½æ•°ç»„ä»¶ä¸€èˆ¬æ˜¯é React.memoæ¥ä¼˜åŒ–ã€‚React.memoå¹¶ä¸æ˜¯å»é˜»æ–­æ¸²æŸ“ï¼Œå…·ä½“å‚è€ƒ<a href="https://zh-hans.reactjs.org/docs/react-api.html#reactmemo">å®˜æ–¹æ–‡æ¡£-React.memo</a></li></ul><p><strong>5ã€æœªæ¥çš„è¶‹åŠ¿</strong></p><p>ç”±äºReact Hooksçš„æ¨å‡ºï¼Œ<strong>å‡½æ•°ç»„ä»¶æˆäº†ç¤¾åŒºæœªæ¥ä¸»æ¨çš„æ–¹æ¡ˆ</strong>ã€‚Reactä»å®é™…ä¸šåŠ¡å‡ºå‘ï¼Œæ¢ç´¢äº†æ—¶é—´åˆ‡ç‰‡ä¸å¹¶å‘æ¨¡å¼ï¼Œè€ƒè™‘æ€§èƒ½çš„è¿›ä¸€æ­¥ä¼˜åŒ–ä¸ç»„ä»¶é—´åˆç†çš„ä»£ç æ‹†åˆ†ç»“æ„åï¼Œè®¤ä¸ºç±»ç»„ä»¶å¹¶ä¸èƒ½å¾ˆå¥½çš„é€‚åº”æœªæ¥çš„è¶‹åŠ¿ï¼Œå¹¶ç»™å‡ºäº†3ä¸ªåŸå› ï¼š</p><ul><li>thisæŒ‡ä»£çš„æ¨¡ç³Šæ€§</li><li>ä¸šåŠ¡é€»è¾‘æ•£è½åœ¨ç”Ÿå‘½å‘¨æœŸä¸­</li><li>Reactçš„ç»„ä»¶ä»£ç ç¼ºä¹æ ‡å‡†çš„æ‹†åˆ†æ–¹å¼</li></ul><p>è€Œä½¿ç”¨äº†Hooksçš„å‡½æ•°ç»„ä»¶å¯ä»¥æä¾›æ¯”åŸå…ˆæ›´ç»†ç²’åº¦çš„é€»è¾‘ç»„ç»‡ä¸å¤ç”¨ï¼Œä¸”èƒ½æ›´å¥½åœ°é€‚ç”¨äºæ—¶é—´åˆ‡ç‰‡ä¸å¹¶å‘æ¨¡å¼ã€‚</p><h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><p><img src="https://pic.downk.cc/item/5fd4636c3ffa7d37b3de82b8.jpg" alt="å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶çš„åŒºåˆ«"></p><p><font color=red>ç­”é¢˜ï¼š</font></p><blockquote><p>ä½œä¸ºç»„ä»¶è€Œè¨€ï¼Œç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶åœ¨ä½¿ç”¨ä¸å‘ˆç°ä¸Šæ²¡æœ‰ä»»ä½•ä¸åŒï¼Œæ€§èƒ½ä¸Šåœ¨ç°ä»£æµè§ˆå™¨ä¸­ä¹Ÿä¸ä¼šæœ‰æ˜æ˜¾å·®å¼‚ã€‚<br>å®ƒä»¬åœ¨å¼€å‘æ—¶çš„å¿ƒæ™ºæ¨¡å‹ä¸Šå´å­˜åœ¨å·¨å¤§çš„å·®å¼‚ã€‚ç±»ç»„ä»¶æ˜¯åŸºäºé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ï¼Œå®ƒä¸»æ‰“çš„æ˜¯ç»§æ‰¿ã€ç”Ÿå‘½å‘¨æœŸç­‰æ ¸å¿ƒæ¦‚å¿µï¼›è€Œå‡½æ•°ç»„ä»¶å†…æ ¸æ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Œä¸»æ‰“çš„æ˜¯ immutableã€æ²¡æœ‰å‰¯ä½œç”¨ã€å¼•ç”¨é€æ˜ç­‰ç‰¹ç‚¹ã€‚</p><p>ä¹‹å‰ï¼Œåœ¨ä½¿ç”¨åœºæ™¯ä¸Šï¼Œå¦‚æœå­˜åœ¨éœ€è¦ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ï¼Œé‚£ä¹ˆä¸»æ¨ç±»ç»„ä»¶ï¼›è®¾è®¡æ¨¡å¼ä¸Šï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ç»§æ‰¿ï¼Œé‚£ä¹ˆä¸»æ¨ç±»ç»„ä»¶ã€‚</p><p>ä½†ç°åœ¨ç”±äº React Hooks çš„æ¨å‡ºï¼Œç”Ÿå‘½å‘¨æœŸæ¦‚å¿µçš„æ·¡å‡ºï¼Œå‡½æ•°ç»„ä»¶å¯ä»¥å®Œå…¨å–ä»£ç±»ç»„ä»¶ã€‚</p><p>å…¶æ¬¡ç»§æ‰¿å¹¶ä¸æ˜¯ç»„ä»¶æœ€ä½³çš„è®¾è®¡æ¨¡å¼ï¼Œå®˜æ–¹æ›´æ¨å´‡â€œç»„åˆä¼˜äºç»§æ‰¿â€çš„è®¾è®¡æ¦‚å¿µï¼Œæ‰€ä»¥ç±»ç»„ä»¶åœ¨è¿™æ–¹é¢çš„ä¼˜åŠ¿ä¹Ÿåœ¨æ·¡å‡ºã€‚</p><p>æ€§èƒ½ä¼˜åŒ–ä¸Šï¼Œç±»ç»„ä»¶ä¸»è¦ä¾é  shouldComponentUpdateÂ é˜»æ–­æ¸²æŸ“æ¥æå‡æ€§èƒ½ï¼Œè€Œå‡½æ•°ç»„ä»¶ä¾é  React.memo ç¼“å­˜æ¸²æŸ“ç»“æœæ¥æå‡æ€§èƒ½ã€‚</p><p>ä»ä¸Šæ‰‹ç¨‹åº¦è€Œè¨€ï¼Œç±»ç»„ä»¶æ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œä»æœªæ¥è¶‹åŠ¿ä¸Šçœ‹ï¼Œç”±äºReact Hooks çš„æ¨å‡ºï¼Œå‡½æ•°ç»„ä»¶æˆäº†ç¤¾åŒºæœªæ¥ä¸»æ¨çš„æ–¹æ¡ˆã€‚</p><p>ç±»ç»„ä»¶åœ¨æœªæ¥æ—¶é—´åˆ‡ç‰‡ä¸å¹¶å‘æ¨¡å¼ä¸­ï¼Œç”±äºç”Ÿå‘½å‘¨æœŸå¸¦æ¥çš„å¤æ‚åº¦ï¼Œå¹¶ä¸æ˜“äºä¼˜åŒ–ã€‚è€Œå‡½æ•°ç»„ä»¶æœ¬èº«è½»é‡ç®€å•ï¼Œä¸”åœ¨ Hooks çš„åŸºç¡€ä¸Šæä¾›äº†æ¯”åŸå…ˆæ›´ç»†ç²’åº¦çš„é€»è¾‘ç»„ç»‡ä¸å¤ç”¨ï¼Œæ›´èƒ½é€‚åº” React çš„æœªæ¥å‘å±•ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•å®å…¸ä¹‹Reactç¯‡</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>React05-å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶</title>
    <link href="/2020/12/09/React05-%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6%E4%B8%8E%E9%9D%9E%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6/"/>
    <url>/2020/12/09/React05-%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6%E4%B8%8E%E9%9D%9E%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h3 id="Controlled-Components-VS-unControlled-Components"><a href="#Controlled-Components-VS-unControlled-Components" class="headerlink" title="Controlled Components VS unControlled Components"></a>Controlled Components VS unControlled Components</h3><h4 id="ä¸€ã€éå—æ§ç»„ä»¶"><a href="#ä¸€ã€éå—æ§ç»„ä»¶" class="headerlink" title="ä¸€ã€éå—æ§ç»„ä»¶"></a>ä¸€ã€éå—æ§ç»„ä»¶</h4><p>å…ˆçœ‹ä¸€ä¸ªéå—æ§ç»„ä»¶çš„ä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span>(    &lt;div&gt;        &lt;label&gt;            My uncontrolled Input:            &lt;input type=<span class="hljs-string">&#x27;text&#x27;</span>/&gt;        &lt;/label&gt;    &lt;/div&gt;)</code></pre><p>ä¸Šè¿°ä»£ç ä¸­çš„inputæ˜¯ä¸å—æ§åˆ¶çš„HTMLå…ƒç´ ï¼Œé€šå¸¸æˆ‘ä»¬ä¹Ÿå°†å°è£…äº†è¿™ç§å…ƒç´ çš„APPç»„ä»¶ç§°ä¸ºæ˜¯ â€œéå—æ§ç»„ä»¶â€ã€‚</p><p>ğŸ–ï¼šåˆ¤æ–­ä¸€ä¸ªç»„ä»¶å—æ§ä¸å¦ï¼Œè·Ÿå®ƒæ˜¯å‡½æ•°ç»„ä»¶è¿˜æ˜¯ç±»ç»„ä»¶æ²¡æœ‰å…³ç³»ï¼</p><p>è¿™é‡Œçš„inputæ˜¯ä¸å—æ§çš„ï¼Œå› ä¸ºå½“æˆ‘ä»¬å¯åŠ¨è¿™ä¸ªapplicationåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¾“å…¥æ¡†ç§ç¼–è¾‘ä»»ä½•å†…å®¹ï¼Œä½†æ˜¯æˆ‘ä»¬ç¼–è¾‘å‡ºæ¥çš„ä¸œè¥¿æ²¡æœ‰å±•ç¤ºåœ¨å…¶ä»–ä»»ä½•åœ°æ–¹ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•è¡Œä¸ºçœ‹å¯ä»¥å»æ”¹å˜æˆ‘ä»¬æ‰“è¿›å»çš„å€¼ã€‚æ¯•ç«Ÿï¼Œè¿™é‡Œçš„inputå°±æ˜¯ä¸€ä¸ªåŸç”Ÿçš„HTMLå…ƒç´ ï¼Œå®ƒè‡ªå·±ç®¡ç†è‡ªå·±çš„å†…éƒ¨çŠ¶æ€ï¼Œè€Œä¸å—ä»»ä½•å¤–ç•Œçš„æ§åˆ¶ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹å¦å¤–ä¸€ä¸ªä¾‹å­ï¼Œè¿™ä¸ªä¾‹å­æ›´å®¹æ˜“è®©æˆ‘ä»¬æ··æ·†å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶ï¼š</p><pre><code class="hljs js"><span class="hljs-comment">//æ·»åŠ state management å’Œ React Hooks</span><span class="hljs-keyword">import</span> React, &#123;useState&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">const</span> [value, setValue] = useState(<span class="hljs-string">&#x27;&#x27;</span>);    <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> setValue(event.target.value);    <span class="hljs-keyword">return</span> (        &lt;div&gt;            &lt;label&gt;                My still uncontrolled Input:                &lt;input type=<span class="hljs-string">&#x27;text&#x27;</span> onChange=&#123;handleChange&#125; /&gt;            &lt;/label&gt;            &lt;p&gt;                &lt;strong&gt;Output: &lt;/strong&gt; &#123;value&#125;            &lt;/p&gt;        &lt;/div&gt;    );&#125;;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>æˆ‘ä»¬æŠŠåœ¨è¾“å…¥æ¡†ç¼–è¾‘çš„å†…å®¹å±•ç¤ºåˆ°ä¸€ä¸ªæ®µè½ä¸­ï¼ˆoutputçš„åé¢ï¼‰ï¼Œå½“æˆ‘ä»¬å¯åŠ¨è¿™ä¸ªç¨‹åºåï¼Œinputè¾“å…¥æ¡†ç¼–è¾‘ä»€ä¹ˆï¼Œoutputåé¢ä¹Ÿä¼šå±•ç¤ºä»€ä¹ˆã€‚ä½†æ˜¯ï¼Œå®ƒä¾ç„¶æ˜¯ä¸ªéå—æ§ç»„ä»¶ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬æŠŠinitialStateé‡Œé¢å†™å…¥å†…å®¹ï¼Œæ¥è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React, &#123;useState&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">const</span> [value, setValue] = useState(<span class="hljs-string">&#x27;Hello React&#x27;</span>);    <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> setValue(event.target.value);    <span class="hljs-keyword">return</span> (        &lt;div&gt;            &lt;label&gt;                My still uncontrolled Input:                &lt;input type=<span class="hljs-string">&#x27;text&#x27;</span> onChange=&#123;handleChange&#125; /&gt;            &lt;/label&gt;            &lt;p&gt;                &lt;strong&gt;Output: &lt;/strong&gt; &#123;value&#125;            &lt;/p&gt;        &lt;/div&gt;    );&#125;;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>è¿è¡Œè¿™ä¸ªç¨‹åºåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŒºåˆ«äº†ï¼š<br><img src="https://pic.downk.cc/item/5fd0c0543ffa7d37b335df1a.jpg"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° inputæ¡†é‡Œæ˜¯ç©ºçš„ï¼Œå¯æ˜¯outputåé¢å´æ˜¯æœ‰å†…å®¹çš„ï¼ˆoutputåé¢å±•ç¤ºçš„å°±æ˜¯initial stateï¼‰ã€‚åªæœ‰å½“æˆ‘ä»¬å¾€è¾“å…¥æ¡†ä¸­è¾“å…¥ä¸œè¥¿æ—¶ï¼ŒäºŒè€…æ‰ä¼¼ä¹é‡æ–°å¼€å§‹ä¿æŒâ€œåŒæ­¥â€ã€‚ä½†å…¶å®ï¼Œ<strong>inputæ¡†çš„å†…å®¹ä»ç„¶æ˜¯å®ƒè‡ªå·±çš„å†…éƒ¨çŠ¶æ€ï¼Œè€Œoutputåé¢çš„å†…å®¹å´æ¥è‡ªäºçœŸå®çš„React state</strong>(from handler function)ã€‚æ‰€ä»¥when typing, outputåé¢å±•ç¤ºçš„å†…å®¹è™½ç„¶çœ‹èµ·æ¥ä¼¼ä¹å’Œæˆ‘ä»¬åœ¨è¾“å…¥æ¡†æ‰“è¿›å»çš„ä¸€æ ·ï¼Œä½†å…¶å®å®ƒä»¬ä¿©çš„æ¥æºä¸åŒï¼š</p><ul><li>input filed receives its value from internal DOM node state;</li><li>output paragraph receives its value from Reactâ€™s stateã€‚</li></ul><p>åœ¨æˆ‘ä»¬çš„Reactåº”ç”¨ä¸­ä½¿ç”¨éå—æ§ç»„ä»¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¾ˆå¤šæ„æƒ³ä¸åˆ°çš„bugã€‚å¦‚æœæƒ³åˆ©ç”¨ä¸€ç§äº‹å®æ¥æºï¼ˆone source of truth)æ¥é©±åŠ¨UIï¼Œå°±åº”è¯¥ä½¿ç”¨propsæˆ–è€…æ˜¯stateã€‚å¯¹äºä¸€ä¸ªç»„ä»¶æ¥è¯´ï¼Œæœ‰ç›¸åŒçš„propså’Œstateï¼Œå°±åº”è¯¥æ¸²æŸ“å‡ºç›¸åŒçš„UIç•Œé¢ï¼š<strong>ï¼ˆprops, state) =&gt; view</strong></p><h4 id="äºŒã€å—æ§ç»„ä»¶"><a href="#äºŒã€å—æ§ç»„ä»¶" class="headerlink" title="äºŒã€å—æ§ç»„ä»¶"></a>äºŒã€å—æ§ç»„ä»¶</h4><p>æ—¢ç„¶éå—æ§ç»„ä»¶å¯èƒ½å¯¼è‡´bug, é‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥æŠŠinputè¿™ç§ä¸å—æ§åˆ¶çš„å…ƒç´ æ”¹ä¸ºå—æ§å…ƒç´ ã€‚äº¦å³ï¼Œæˆ‘ä»¬ä¸ºinputæä¾›ä¸€ä¸ªvalue (å®ƒçš„å€¼æ¥æºäº React state)ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>; <span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span> &#123;  <span class="hljs-keyword">const</span> [value, setValue] = useState(<span class="hljs-string">&#x27;Hello React&#x27;</span>);   <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> setValue(event.target.value);   <span class="hljs-keyword">return</span> (    &lt;div&gt;      &lt;label&gt;        My controlled Input:        &lt;input type=<span class="hljs-string">&quot;text&quot;</span> value=&#123;value&#125; onChange=&#123;handleChange&#125; /&gt;      &lt;/label&gt;       &lt;p&gt;        &lt;strong&gt;Output:&lt;/strong&gt; &#123;value&#125;      &lt;/p&gt;    &lt;/div&gt;  );&#125;; <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>é€šè¿‡ç»™inputè¾“å…¥æ¡†æä¾›ä¸€ä¸ªæ¥æºäºreact stateçš„valueå€¼ï¼Œå®ƒå°±ä¸å†ä½¿ç”¨è‡ªå·±æœ¬èº«çš„å†…éƒ¨çŠ¶æ€äº†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å†æ¥å¯åŠ¨è¿™ä¸ªç¨‹åºæ—¶ï¼Œinputè¾“å…¥æ¡†é‡Œçš„å€¼å’Œoutputåé¢å±•ç¤ºçš„å†…å®¹å°±å®Œå…¨ä¸€è‡´äº†ï¼ï¼ˆå› ä¸ºå®ƒä»¬éƒ½æ¥è‡ªäºreact stateï¼‰<br><img src="https://pic.downk.cc/item/5fd0c4643ffa7d37b33a6f41.jpg"></p><p>å‚è€ƒï¼š<a href="https://www.robinwieruch.de/react-controlled-components">What are Controlled Components in React?</a></p>]]></content>
    
    
    <categories>
      
      <category>Reactå­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>React04-å‡½æ•°ç»„ä»¶</title>
    <link href="/2020/12/09/React04-%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6/"/>
    <url>/2020/12/09/React04-%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h3 id="React-Function-Components"><a href="#React-Function-Components" class="headerlink" title="React Function Components"></a>React Function Components</h3><p>&emsp; Reactå‡½æ•°ç»„ä»¶æ˜¯ç¼–å†™ç°ä»£Reactåº”ç”¨ç¨‹åºçš„å¸¸ç”¨æ–¹å¼ï¼Œè‡ªä»React Hookè¢«å¼•å…¥ä¹‹åï¼Œä½¿å¾—å®Œå…¨ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶æ¥ç¼–å†™ä¸€ä¸ªReactåº”ç”¨ç¨‹åºæˆä¸ºå¯èƒ½ã€‚å‡½æ•°å¼ç»„ä»¶çš„æ ¸å¿ƒï¼šå°±æ˜¯ä¸€ä¸ªè¿”å›JSXçš„JavaScriptå‡½æ•°ã€‚</p><h4 id="ä¸€ã€ä¸€ä¸ªç®€å•çš„å‡½æ•°ç»„ä»¶çš„ä¾‹å­"><a href="#ä¸€ã€ä¸€ä¸ªç®€å•çš„å‡½æ•°ç»„ä»¶çš„ä¾‹å­" class="headerlink" title="ä¸€ã€ä¸€ä¸ªç®€å•çš„å‡½æ•°ç»„ä»¶çš„ä¾‹å­"></a>ä¸€ã€ä¸€ä¸ªç®€å•çš„å‡½æ•°ç»„ä»¶çš„ä¾‹å­</h4><p>å‡½æ•°å¼ç»„ä»¶çš„ä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-keyword">const</span> greeting = <span class="hljs-string">&#x27;hello function component!&#x27;</span>;    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;greeting&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>&#125;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>ä»ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°å‡½æ•°å¼ç»„ä»¶ä¸­å¹¶æ²¡æœ‰ç±»classç»„ä»¶é‡Œæœ‰çš„render()å‡½æ•°ã€‚å®é™…ä¸Šï¼Œå‡½æ•°ä¸»ä½“é‡Œé¢å®šä¹‰çš„å†…å®¹éƒ½æ˜¯renderå‡½æ•°ï¼Œè¯¥å‡½æ•°æœ€åè¿”JSXã€‚</p><p>å¦‚æœæƒ³åœ¨Reactå‡½æ•°ç»„ä»¶é‡Œé¢ï¼Œå†æ¸²æŸ“ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-comment">//å°†Headlineç»„ä»¶ä½œä¸ºHTMLå…ƒç´ ï¼Œä»¥JSXçš„æ–¹å¼æ¸²æŸ“å‡ºæ¥</span>    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Headine</span> /&gt;</span></span>&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Headeline</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-keyword">const</span> greeting = <span class="hljs-string">&#x27;hello function component!&#x27;</span>;    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;greeting&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;&#125;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><h4 id="äºŒã€å‡½æ•°ç»„ä»¶çš„å‚æ•°Props"><a href="#äºŒã€å‡½æ•°ç»„ä»¶çš„å‚æ•°Props" class="headerlink" title="äºŒã€å‡½æ•°ç»„ä»¶çš„å‚æ•°Props"></a>äºŒã€å‡½æ•°ç»„ä»¶çš„å‚æ•°Props</h4><p>&emsp;åœ¨Reactä¸­ï¼Œpropsè¢«ç”¨äºç»„ä»¶ä¸ç»„ä»¶ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼ˆçˆ¶ç»„ä»¶é€šè¿‡propsä¼ é€’ä¿¡æ¯ç»™å­ç»„ä»¶ï¼‰ã€‚Essentially props in React are always passed down the component tree;</p><p>ä¸€ä¸ªä½¿ç”¨propsçš„ä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-keyword">const</span> greeting = <span class="hljs-string">&#x27;hello function component&#x27;</span>;    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Headline</span> <span class="hljs-attr">value</span> = <span class="hljs-string">&#123;greeting&#125;</span> /&gt;</span></span>;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Headline</span>(<span class="hljs-params">props</span>)</span>&#123;    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;props.value&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>&#125;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>ç”±äºpropsé€šå¸¸éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨JS å¯¹è±¡è§£æ„çš„æ–¹å¼ä»propsä¸­æŠ½å–æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚æ¯”å¦‚ä¸Šé¢çš„Headlineç»„ä»¶ä¹Ÿå¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼ï¼š</p><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Headline</span>(<span class="hljs-params">&#123;value&#125;</span>)</span>&#123;    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;value&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>&#125;<span class="hljs-comment">//éœ€è¦è§£æ„å¤šä¸ªä¿¡æ¯å‡ºæ¥æ—¶ï¼š</span><span class="hljs-comment">//function Headline(&#123;value1,value2&#125;)&#123;...&#125;</span></code></pre><p>å…³äºpropsçš„æ›´å¤šä½¿ç”¨ï¼šå¯ä»¥å‚è€ƒ<a href="https://www.robinwieruch.de/react-pass-props-to-component">How to pass props to components in React</a></p><h4 id="ä¸‰ã€React-ç®­å¤´å‡½æ•°ç»„ä»¶"><a href="#ä¸‰ã€React-ç®­å¤´å‡½æ•°ç»„ä»¶" class="headerlink" title="ä¸‰ã€React ç®­å¤´å‡½æ•°ç»„ä»¶"></a>ä¸‰ã€React ç®­å¤´å‡½æ•°ç»„ä»¶</h4><p>&emsp;ç®­å¤´å‡½æ•°ç»„ä»¶ Arrow Funciton Components(or Lambda Function Component)ï¼Œæ˜¯éšç€ES6ç®­å¤´å‡½æ•°çš„å‡ºç°ï¼Œå¼•å…¥åˆ°Reactä¸­çš„ã€‚</p><p>ç”¨ç®­å¤´å‡½æ•°é‡æ„ä¸Šé¢çš„å‡½æ•°ç»„ä»¶ä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App=<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">const</span> greeting = <span class="hljs-string">&#x27;hello function components!&#x27;</span>;    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Headline</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;greeting&#125;</span> /&gt;</span></span>&#125;;<span class="hljs-keyword">const</span> Headline=<span class="hljs-function">(<span class="hljs-params">&#123;value&#125;</span>)=&gt;</span>&#123;    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;value&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>&#125;;<span class="hljs-comment">//æ ¹æ®ç®­å¤´å‡½æ•°çš„ç®€å†™è§„åˆ™ï¼Œä¸Šé¢çš„Headlineå¯ä»¥ç®€å†™ä¸ºï¼š</span><span class="hljs-keyword">const</span> Headline = <span class="hljs-function">(<span class="hljs-params">&#123;value&#125;</span>) =&gt;</span>     &lt;h1&gt;&#123;value&#125;&lt;/h1&gt;;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><h4 id="å››ã€Stateless-Function-Component"><a href="#å››ã€Stateless-Function-Component" class="headerlink" title="å››ã€Stateless Function Component"></a>å››ã€Stateless Function Component</h4><p>&emsp;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å†™çš„ä¾‹å­é‡Œéƒ½æ˜¯æ— çŠ¶æ€çš„å‡½æ•°ç»„ä»¶ã€‚å®ƒä»¬ä»…ä»…æ¥æ”¶ä¸€ä¸ªprops,ç„¶åè¿”å›ä¸€ä¸ªè¾“å‡ºã€ä»¥JSXï¼šï¼ˆprops)=&gt;JSXã€‘ã€‚ è¿™ç§ç±»å‹çš„ç»„ä»¶ä¸éœ€è¦ç®¡ç†stateï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ï¼ˆä¾‹å¦‚ï¼Œæ¥å—æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°ä¸ºâ€œStateless Function Componentâ€ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æ— çŠ¶æ€çš„ä¸”ä»¥ä¸€ä¸ªå‡½æ•°çš„å½¢å¼è¡¨è¾¾å‡ºæ¥ã€‚ç„¶è€Œï¼ŒReact Hooksä½¿å¾—å‡½æ•°å¼ç»„ä»¶æœ‰stateæˆä¸ºå¯èƒ½ã€‚</p><h4 id="äº”ã€æœ‰stateçš„å‡½æ•°ç»„ä»¶"><a href="#äº”ã€æœ‰stateçš„å‡½æ•°ç»„ä»¶" class="headerlink" title="äº”ã€æœ‰stateçš„å‡½æ•°ç»„ä»¶"></a>äº”ã€æœ‰stateçš„å‡½æ•°ç»„ä»¶</h4><p>&emsp;ç°åœ¨æˆ‘ä»¬å…ˆç§»é™¤ä¸Šé¢ä¾‹å­ä¸­å‡½æ•°ç»„ä»¶é‡Œçš„æ‰€æœ‰props:</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>; <span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span> &#123;  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Headline</span> /&gt;</span></span>;&#125;; <span class="hljs-keyword">const</span> Headline = <span class="hljs-function">() =&gt;</span> &#123;  <span class="hljs-keyword">const</span> greeting = <span class="hljs-string">&#x27;Hello Function Component!&#x27;</span>;   <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;greeting&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;&#125;; <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>è¿™æ ·ï¼Œä½¿ç”¨è¿™ä¸ªapplicationçš„ç”¨æˆ·å°±æ²¡æ³•å’Œå®ƒè¿›è¡Œä»»ä½•äº¤äº’ï¼Œä¹Ÿæ— æ³•æ”¹å˜greetingå˜é‡ã€‚The application is static and not interactive at allã€‚  Stateå°±æ˜¯è®©Reactç»„ä»¶å˜å¾—å¯äº¤äº’ï¼ŒReact Hooks å¸®åŠ©æˆ‘ä»¬å®ç°å‡½æ•°å¼ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨stateã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React, &#123;useState&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App=<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Headline</span> /&gt;</span></span>;&#125;<span class="hljs-keyword">const</span> Headline=<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">const</span> [greeting , setGreeting] = useState(        <span class="hljs-string">&#x27;hello function component!&#x27;</span>    );    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;greeting&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>&#125;;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>useState hookå‡½æ•°å°†åˆå§‹çŠ¶æ€ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ˆå½“å‰çš„stateæ˜¯è¿™ä¸ªæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç”¨äºæ”¹å˜stateçš„å‡½æ•°æ—¶è¿™ä¸ªæ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼‰ã€‚æˆ‘ä»¬ä½¿ç”¨äº†æ•°ç»„è§£æ„çš„æ–¹å¼æ¥è·å–è¿™ä¸ªæ•°ç»„çš„å…ƒç´ ã€‚è€Œä¸”æ•°ç»„è§£æ„å…è®¸æˆ‘ä»¬è‡ªå·±ä¸ºå˜é‡å‘½åã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªinput field æ¥æ”¹å˜stateï¼ˆä½¿ç”¨setGreeting):</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React, &#123;useState&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App=<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Headline</span> /&gt;</span></span>;&#125;<span class="hljs-keyword">const</span> Headline=<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">const</span> [greeting , setGreeting] = useState(        <span class="hljs-string">&#x27;hello function component!&#x27;</span>    );    <span class="hljs-keyword">return</span> (        &lt;div&gt;            &lt;h1&gt;&#123;greeting&#125;&lt;h1&gt;                        &lt;input                type=<span class="hljs-string">&#x27;text&#x27;</span>                value=&#123;greeting&#125;                onChange=&#123;<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> setGreeting(event.target.value)&#125;            /&gt;        &lt;/div&gt;    )&#125;;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨inputä¸­æ·»åŠ ä¸€ä¸ªevent handlerï¼Œè¿™æ ·å½“inputä¸­çš„å€¼å˜åŒ–æ—¶æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨å›è°ƒå‡½æ•°åšä¸€äº›äº‹æƒ…ã€‚å›è°ƒå‡½æ•°çš„å‚æ•°eventæ˜¯ä¸€ä¸ªæ‹¥æœ‰å½“å‰inputåŸŸä¸­valueå€¼çš„<a href="https://reactjs.org/docs/events.html">synthetic React event</a>ï¼Œäº¦å³event.target.valueï¼Œè¢«ç”¨æ¥æ›´æ–°å‡½æ•°ç»„ä»¶çš„stateã€‚åç»­ï¼Œæˆ‘ä»¬ä¼šå°†è¿™ä¸ªonChangeäº‹ä»¶æå–å‡ºæ¥ã€‚</p><p>ğŸ–ï¼šè¿™ä¸ªinput field å¯ä»¥æ¥å—è¿™ä¸ªç»„ä»¶çš„stateå€¼ã€‚å½“æˆ‘ä»¬æƒ³æ§åˆ¶inputçš„valueï¼ˆstateï¼‰è€Œä¸æƒ³è®©åŸç”Ÿçš„HTMLå…ƒç´ çš„å†…éƒ¨çŠ¶æ€æ¥ç®¡inputä¸­çš„å€¼æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç»„ä»¶çš„stateå€¼ã€‚è¿™æ—¶ï¼Œè¿™ä¸ªinputå°±æˆä¸ºäº†â€å—æ§ç»„ä»¶â€<a href="https://www.robinwieruch.de/react-controlled-components">controlled component</a>ã€‚</p><h4 id="å…­ã€å‡½æ•°ç»„ä»¶ï¼ševent-handler"><a href="#å…­ã€å‡½æ•°ç»„ä»¶ï¼ševent-handler" class="headerlink" title="å…­ã€å‡½æ•°ç»„ä»¶ï¼ševent handler"></a>å…­ã€å‡½æ•°ç»„ä»¶ï¼ševent handler</h4><p>åœ¨ç¬¬äº”èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç»™inputå…ƒç´ æ·»åŠ äº†ä¸€ä¸ªonChangeäº‹ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬éšæ—¶å¯ä»¥è§‚å¯Ÿåˆ°inputå†…å®¹çš„å˜åŒ–ã€‚ä½†æ˜¯ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å†…è”çš„ç®­å¤´å‡½æ•°ç»™onChangeäº‹ä»¶èµ‹å€¼ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæŠ½å–å‡ºæ¥ä½œä¸ºä¸€ä¸ªå‘½åå‡½æ•°:</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React, &#123;useState&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span>&#123;    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Headline</span> /&gt;</span></span>;&#125;<span class="hljs-keyword">const</span> Headline = <span class="hljs-function">() =&gt;</span>&#123;    <span class="hljs-keyword">const</span> [greeting, setGreeting] = useState(<span class="hljs-string">&#x27;hello function component&#x27;</span>)&#125;<span class="hljs-comment">//è¿™é‡Œå°±æ˜¯æå–å‡ºæ¥çš„å‘½åå‡½æ•°</span><span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span>setGreeting(event.target.value);<span class="hljs-keyword">return</span>(    &lt;div&gt;        &lt;h1&gt;&#123;greeting&#125;&lt;/h1&gt;        &lt;input type=<span class="hljs-string">&#x27;text&#x27;</span> value=&#123;greeting&#125; onChange = &#123;handleChange&#125; /&gt;    &lt;/div&gt;)<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><h4 id="ä¸ƒã€çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼-åŒ…æ‹¬callback-function"><a href="#ä¸ƒã€çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼-åŒ…æ‹¬callback-function" class="headerlink" title="ä¸ƒã€çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼(åŒ…æ‹¬callback function)"></a>ä¸ƒã€çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼(åŒ…æ‹¬callback function)</h4><p>åœ¨ç¬¬å…­èŠ‚ä¸­çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰çš„é€»è¾‘ï¼ˆåŒ…æ‹¬å˜é‡å’Œå‡½æ•°ï¼‰éƒ½æ”¾åœ¨äº†å­ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯Headlineä¸­ã€‚çˆ¶ç»„ä»¶æ²¡æœ‰å‘å­ç»„ä»¶ä¼ é€’props,ã€‚è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†æŠŠgreetingå’ŒonChangeäº‹ä»¶çš„å¤„ç†é€»è¾‘éƒ½æ”¾åœ¨çˆ¶ç»„ä»¶Appä¸­ï¼Œå†é€šè¿‡propsä¼ é€’ç»™å­ç»„ä»¶Headlineã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React,&#123;useState&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span>&#123;    <span class="hljs-keyword">const</span> [greeting, setGreeting] = useState(<span class="hljs-string">&#x27;hello function component&#x27;</span>);    <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> setGreeting(event.target.value);    <span class="hljs-keyword">return</span> (        &lt;Headline headline = &#123;greeting&#125; onChangeHeadline = &#123;handleChange&#125; /&gt;    )&#125;<span class="hljs-keyword">const</span> Headline = <span class="hljs-function">(<span class="hljs-params">&#123;headline,onChangeHeadline&#125;</span>) =&gt;</span> (    &lt;div&gt;        &lt;h1&gt;&#123;headline&#125;&lt;/h1&gt;        &lt;input type=<span class="hljs-string">&#x27;text&#x27;</span> value=&#123;headline&#125; onChange=&#123;onChangeHeadline&#125;/&gt;    &lt;/div&gt;)<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>è¿›ä¸€æ­¥åœ°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠinputæŠ½å–å‡ºæ¥ï¼Œä½¿å…¶åˆ°å•ç‹¬æˆä¸ºä¸€ä¸ªç»„ä»¶ã€‚ä»è€Œï¼Œæˆ‘ä»¬æœ‰ä¸ªä¸€ä¸ªçˆ¶ç»„ä»¶Appï¼Œä¸¤ä¸ªå­ç»„ä»¶Headlineå’ŒInputã€‚çˆ¶ç»„ä»¶å‘ä¸¤ä¸ªå­ç»„ä»¶ä¼ é€’props:</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React,&#123;useState&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span>&#123;    <span class="hljs-keyword">const</span> [greeting, setGreeting] = useState(<span class="hljs-string">&#x27;hello function component&#x27;</span>);    <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span>setGreeting(event.target.value);    <span class="hljs-keyword">return</span> (        &lt;div&gt;            &lt;Headline headline=&#123;greeting&#125; /&gt;            &lt;Input value=&#123;greeting&#125; onChangeInput=&#123;handleChange&#125;&gt;<span class="hljs-built_in">Set</span> Greeting: &lt;/Input&gt;        &lt;/div&gt;    )&#125;;<span class="hljs-keyword">const</span> Headline = <span class="hljs-function">(<span class="hljs-params">&#123;headline&#125;</span>) =&gt;</span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;headline&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><span class="hljs-keyword">const</span> Input = <span class="hljs-function">(<span class="hljs-params">&#123;value,onChangeInput, children&#125;</span>) =&gt;</span>(    &lt;label&gt;    &#123;children&#125;    &lt;input type=<span class="hljs-string">&#x27;text&#x27;</span> value=&#123;value&#125; onChange = &#123;onChangeInput&#125; /&gt;    &lt;/label&gt;)<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><h4 id="å…«ã€è®¾ç½®propsçš„é»˜è®¤å€¼"><a href="#å…«ã€è®¾ç½®propsçš„é»˜è®¤å€¼" class="headerlink" title="å…«ã€è®¾ç½®propsçš„é»˜è®¤å€¼"></a>å…«ã€è®¾ç½®propsçš„é»˜è®¤å€¼</h4><p>å½“çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’propsçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å­ç»„ä»¶ä¸­ä¸ºè¿™äº›propsè®¾ç½®é»˜è®¤å€¼ï¼ˆdefault valueï¼‰å»overrideä¼ é€’çš„å€¼ã€‚äº¦å³ï¼Œå½“çˆ¶ç»„ä»¶ä¼ é€’çš„propsä¸ä¸ºç©ºæ—¶ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨ä¼ é€’è¿‡æ¥çš„ï¼Œå¦åˆ™æˆ‘ä»¬å°±ä½¿ç”¨å­ç»„ä»¶çš„é»˜è®¤å€¼ã€‚</p><p>ç»™å­ç»„ä»¶çš„propsè®¾ç½®é»˜è®¤å€¼,æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p><pre><code class="hljs js"><span class="hljs-comment">//ç¬¬ä¸€ç§ï¼š</span><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span>&#123;    <span class="hljs-keyword">const</span> sayHello = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;hello&#x27;</span>);    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">handleClick</span>=<span class="hljs-string">&#123;sayHello&#125;</span> /&gt;</span></span>&#125;;<span class="hljs-keyword">const</span> Button = <span class="hljs-function">(<span class="hljs-params">&#123;handleClick&#125;</span>) =&gt;</span>&#123;    <span class="hljs-keyword">const</span> sayDefault = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;default&#x27;</span>);    <span class="hljs-keyword">const</span> onClick = handleClick || sayDefault;    <span class="hljs-keyword">return</span> (        &lt;button type=<span class="hljs-string">&#x27;button&#x27;</span> onClick=&#123;onClick&#125;&gt;            Button        &lt;/button&gt;    )&#125;;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å­ç»„ä»¶çš„å‡½æ•°ç­¾åï¼ˆå°æ‹¬å·å†…ï¼‰ä¸ºpropsè®¾ç½®é»˜è®¤å€¼ï¼š</p><pre><code class="hljs js"><span class="hljs-comment">//ç¬¬äºŒç§ï¼š</span><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-keyword">const</span> sayHello = <span class="hljs-function">() =&gt;</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Hello&#x27;</span>);    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">handleClick</span> = <span class="hljs-string">&#123;sayHello&#125;</span> /&gt;</span></span>&#125;;<span class="hljs-keyword">const</span> Button = (&#123;handleClick = <span class="hljs-function">()=&gt;</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;default&#x27;</span>)&#125;) =&gt; (    &lt;button onClick=&#123;handleClick&#125;&gt;        Button    &lt;/button&gt;)<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>æœ€åä¸€ç§ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸ºå‡½æ•°ç»„ä»¶å¢åŠ defaultPropså±æ€§çš„æ–¹å¼æ¥è®¾ç½®é»˜è®¤å€¼ï¼š</p><pre><code class="hljs js"><span class="hljs-comment">//ç¬¬ä¸‰ç§ï¼š</span><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span> &#123;  <span class="hljs-keyword">const</span> sayHello = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Hello&#x27;</span>);   <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">handleClick</span>=<span class="hljs-string">&#123;sayHello&#125;</span> /&gt;</span></span>;&#125;; <span class="hljs-keyword">const</span> Button = <span class="hljs-function">(<span class="hljs-params">&#123;handleClick&#125;</span>) =&gt;</span>(    &lt;button onClick=&#123;handleClick&#125;&gt;        Button    &lt;/button&gt;);Button.defaultProps = &#123;    handleClick: <span class="hljs-function">()=&gt;</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;default&#x27;</span>);&#125;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><h4 id="ä¹ã€Reactç»„ä»¶ä¸­çš„å¼‚æ­¥å‡½æ•°"><a href="#ä¹ã€Reactç»„ä»¶ä¸­çš„å¼‚æ­¥å‡½æ•°" class="headerlink" title="ä¹ã€Reactç»„ä»¶ä¸­çš„å¼‚æ­¥å‡½æ•°"></a>ä¹ã€Reactç»„ä»¶ä¸­çš„å¼‚æ­¥å‡½æ•°</h4><p>è®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªå¼‚æ­¥å‡½æ•°çš„ä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span>&#123;    <span class="hljs-comment">//é€šè¿‡setTimeoutå®ç°ä¸€ä¸ªå¼‚æ­¥å»¶è¿Ÿæ‰§è¡Œ</span>    <span class="hljs-keyword">const</span> sayHello = <span class="hljs-function">() =&gt;</span>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;hello&#x27;</span>),<span class="hljs-number">1000</span>);    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">handleClick</span> = <span class="hljs-string">&#123;sayHello&#125;</span> /&gt;</span></span>&#125;;<span class="hljs-keyword">const</span> Button = <span class="hljs-function">(<span class="hljs-params">&#123;handleClick&#125;</span>) =&gt;</span>(    &lt;button onClick=&#123;handleClick&#125;&gt;        Button    &lt;/button&gt;)<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;<span class="hljs-string">``</span><span class="hljs-string">` </span><span class="hljs-string"></span><span class="hljs-string">ä¸‹é¢å†çœ‹ä¸€ä¸ªä¾‹å­ï¼Œé€šè¿‡ä½¿ç”¨setTimeouté€ æˆå»¶è¿Ÿæ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•æ›´æ–°stateã€‚</span><span class="hljs-string"></span><span class="hljs-string">`</span><span class="hljs-string">``</span>js<span class="hljs-keyword">import</span> React, &#123;useState&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>);    <span class="hljs-keyword">const</span> handleIncrement = <span class="hljs-function">() =&gt;</span>            <span class="hljs-built_in">setTimeout</span>(                <span class="hljs-comment">//è¿™é‡Œå¾ˆå®¹æ˜“å†™æˆsetCount(count+1),é”™ï¼</span>                ()=&gt;setCount(<span class="hljs-function"><span class="hljs-params">count</span>=&gt;</span>count+<span class="hljs-number">1</span>),                <span class="hljs-number">1000</span>            );        <span class="hljs-keyword">const</span> handleDecrement = <span class="hljs-function">() =&gt;</span>            <span class="hljs-built_in">setTimeout</span>(                <span class="hljs-comment">//è¿™é‡Œå¾ˆå®¹æ˜“å†™æˆsetCount(count-1),é”™ï¼</span>                ()=&gt;setCount(<span class="hljs-function"><span class="hljs-params">count</span>=&gt;</span>count-<span class="hljs-number">1</span>),                <span class="hljs-number">1000</span>            );    <span class="hljs-keyword">return</span> (        &lt;div&gt;            &lt;h1&gt;&#123;count&#125;&lt;/h1&gt;            &lt;Button handleClick=&#123;handleIncrement&#125;&gt;å¢åŠ <span class="hljs-number">1</span>&lt;/Button&gt;            &lt;Button handleClick=&#123;handleDecrement&#125;&gt;å‡å°‘<span class="hljs-number">1</span>&lt;/Button&gt;        &lt;/div&gt;    );    <span class="hljs-keyword">const</span> Button = <span class="hljs-function">(<span class="hljs-params">&#123;handleClick,children&#125;</span>) =&gt;</span>(        &lt;button onClick=&#123;handleClick&#125;&gt;&#123;children&#125;&lt;/button&gt;    );<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>æ³¨æ„è§‚å¯Ÿä¸Šè¿°ä»£ç æ˜¯å¦‚ä½•æ›´æ–°å½“å‰çš„countå€¼çš„ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨setCount çŠ¶æ€å‡½æ•°æ¥æ›´æ–°stateã€‚ç”±äºæ¥æºäºuseStateçš„setter function æœ¬è´¨ä¸Šæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå› æ­¤å¿…é¡»ç¡®ä¿æ˜¯å¯¹å½“å‰çŠ¶æ€è€Œä¸æ˜¯ä»»ä½•è¿‡æ—¶çŠ¶æ€æ‰§è¡Œæ›´æ–°ã€‚</p><p>äº†è§£æ›´å¤šï¼Œå¯å‚è€ƒ<a href="https://www.robinwieruch.de/react-hooks-fetch-data"> how to fetch data with Function Components with React Hooks.</a></p><h4 id="åã€å‡½æ•°ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸå®ç°â€”â€”LifeCyrcle"><a href="#åã€å‡½æ•°ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸå®ç°â€”â€”LifeCyrcle" class="headerlink" title="åã€å‡½æ•°ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸå®ç°â€”â€”LifeCyrcle"></a>åã€å‡½æ•°ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸå®ç°â€”â€”LifeCyrcle</h4><p>å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡ç±»ç»„ä»¶ï¼Œä¸€å®šç”¨è¿‡componentDidMoutã€componentWillUnmountã€shouldComponentUpdateç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ä½†æ˜¯åœ¨å‡½æ•°ç»„ä»¶ä¸­æ²¡æœ‰è¿™äº›æ–¹æ³•ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å®ç°å®ƒä»¬ã€‚</p><p>é¦–å…ˆï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸­æ²¡æœ‰constructorã€‚åœ¨ç±»ç»„ä»¶ä¸­ï¼Œconstructoré€šå¸¸è¢«ç”¨æ¥è®¾ç½®initial stateã€‚ä½†æ˜¯åœ¨å‡½æ•°ç»„ä»¶ä¸­æˆ‘ä»¬ä½¿ç”¨useState hookå°±å¯ä»¥è®¾ç½®initial stateï¼Œå¹¶ä¸”å¯ä»¥åŒæ—¶å¾—åˆ°ä¸€ä¸ªsetter function ç”¨äºä¹‹åçš„ä¸šåŠ¡é€»è¾‘ã€‚<br><img src="https://pic.downk.cc/item/5fd185883ffa7d37b3e1c35a.jpg"></p><p><strong>1.Funcitonal Component:  Mount</strong></p><p>reactç»„ä»¶åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€ä¸ªmountingçš„é˜¶æ®µã€‚å¦‚æœä½ æƒ³åœ¨å‡½æ•°å¼ç»„ä»¶é‡Œï¼Œå½“ç»„ä»¶<strong>did mount</strong>çš„æ—¶å€™æ‰§è¡Œä¸€äº›é€»è¾‘ï¼Œå¯ä»¥ä½¿ç”¨<strong>useEffect</strong> hook:</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React ,&#123; useState, useEffect&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span>&#123;    <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>);    <span class="hljs-keyword">const</span> handleIncrement = <span class="hljs-function">() =&gt;</span>        setCount(<span class="hljs-function"><span class="hljs-params">currentCount</span> =&gt;</span> currntCount+<span class="hljs-number">1</span>);        <span class="hljs-keyword">const</span> handleDecrement = <span class="hljs-function">() =&gt;</span>        setCount(<span class="hljs-function"><span class="hljs-params">currentCount</span> =&gt;</span> currntCount-<span class="hljs-number">1</span>);    useEffect(<span class="hljs-function">()=&gt;</span>setCount(<span class="hljs-function"><span class="hljs-params">currentCount</span> =&gt;</span> currentCount + <span class="hljs-number">1</span>),[]);    <span class="hljs-keyword">return</span> (        &lt;div&gt;            &lt;h1&gt;&#123;count&#125;&lt;/h1&gt;            &lt;button onClick=&#123;handleIncrement&#125;&gt;Increment&lt;/button&gt;            &lt;button onClick=&#123;handleDecrement&#125;&gt;Decrement&lt;/button&gt;        &lt;/div&gt;    )&#125;;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>å½“æˆ‘ä»¬è¿è¡Œè¿™æ®µä»£ç çš„æ—¶å€™ï¼Œè¿™ä¸ªç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ä¼šæ˜¾ç¤ºcountçš„åˆå§‹çŠ¶æ€å€¼0ï¼Œç„¶åå½“component did mountåï¼ŒEffect hook ä¼šå°†countè®¾ç½®ä¸º1ã€‚</p><p>ğŸ–ï¼šEffect hookä¸­çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ1ä¸ªç©ºæ•°ç»„ï¼‰æ˜¯éå¸¸é‡è¦çš„ï¼Œå®ƒç¡®ä¿äº†åªæœ‰åœ¨è¿™ä¸ªç»„ä»¶åŠ è½½ï¼ˆmount)æˆ–è€…ç»„ä»¶å¸è½½ï¼ˆunmount)æ—¶æ‰è§¦å‘äº‹ä»¶ã€‚å¦‚æœä¸å°å¿ƒæ¼æ‰äº†è¿™ä¸ªç©ºæ•°ç»„ï¼Œæˆ‘ä»¬ä¼šé™·å…¥countä¸æ–­åŠ 1çš„æ­»å¾ªç¯ï¼Œå› ä¸ºå½“stateæ›´æ–°äº†Effect hookæ€»æ˜¯ä¼šæ‰§è¡Œã€‚ç„¶åEffectæ‰§è¡Œåˆä¼šè§¦å‘stateæ›´æ–°ï¼Œè¿™æ ·å°±ä¼šä¸åœåœ°å¯¹count+1<br><font color=green>todo: è¿™é‡Œä¸ºä»€ä¹ˆè¦ç”¨ç©ºæ•°ç»„è€Œä¸æ˜¯åˆ«çš„å‘¢ï¼Ÿï¼Ÿ</font></p><p><strong>2.Funcitonal Component:  Update</strong></p><p>æ¯æ¬¡å½“å…¥å‚propsæˆ–è€…æ˜¯ç»„ä»¶æœ¬èº«çš„stateå˜åŒ–æ—¶ï¼Œreactç»„ä»¶å°±ä¼šé‡æ–°æ¸²æŸ“ä»¥å±•ç¤ºæœ€æ–°çš„status(from props and state)ã€‚åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œä¸€æ¬¡renderä¼šæ‰§è¡Œå‡½æ•°ä½“çš„æ‰€æœ‰å†…å®¹ã€‚</p><p>å¦‚æœå‡½æ•°ç»„ä»¶æ²¡æœ‰æ­£ç¡®åœ°æŒ‰ç…§é¢„æœŸæ›´æ–°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨console.logæ§åˆ¶å°è¾“å‡ºstateå’Œpropsçš„å€¼æ¥debugã€‚å¦‚æœè¿™ä¸¤è€…çš„å€¼éƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¸ä¼šæœ‰æ–°çš„renderæ‰§è¡Œã€‚<br><img src="https://pic.downk.cc/item/5fd1ca843ffa7d37b32b3cee.jpg"></p><p>å¦‚æœæˆ‘ä»¬æƒ³å¯¹ç»„ä»¶é‡æ–°æ¸²æŸ“è¿›è¡Œæ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥å†ä¸€æ¬¡ä½¿ç”¨ Effect Hook (åœ¨ç»„ä»¶did updateä¹‹å)ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React, &#123;useEffect, useState&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span>&#123;    <span class="hljs-comment">//countçš„åˆå§‹å€¼æ¥æºäºæœ¬åœ°å­˜å‚¨ä¸­çš„å€¼æˆ–0</span>    <span class="hljs-keyword">const</span> initialCount = +<span class="hljs-built_in">localStorage</span>.getItem(<span class="hljs-string">&#x27;storageCount&#x27;</span>)||<span class="hljs-number">0</span>;    <span class="hljs-keyword">const</span> [count,setCount]=useState(initialCount);    <span class="hljs-keyword">const</span> handleIncrement = <span class="hljs-function">() =&gt;</span>        setCount(<span class="hljs-function"><span class="hljs-params">currentCount</span> =&gt;</span> currentCount + <span class="hljs-number">1</span>);     <span class="hljs-keyword">const</span> handleDecrement = <span class="hljs-function">() =&gt;</span>        setCount(<span class="hljs-function"><span class="hljs-params">currentCount</span> =&gt;</span> currentCount - <span class="hljs-number">1</span>);    <span class="hljs-comment">//æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œcountéƒ½ä¼šè¢«å­˜å…¥æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨</span>    useEffect(<span class="hljs-function">()=&gt;</span><span class="hljs-built_in">localStorage</span>.setItem(<span class="hljs-string">&#x27;storageCount&#x27;</span>,count));    <span class="hljs-keyword">return</span> (        &lt;div&gt;            &lt;h1&gt;&#123;count&#125;&lt;/h1&gt;            &lt;button onClick=&#123;handleIncrement&#125;&gt;+<span class="hljs-number">1</span>&lt;/button&gt;            &lt;button onClick=&#123;handleDecrement&#125;&gt;-<span class="hljs-number">1</span>&lt;/button&gt;        &lt;/div&gt;    )&#125;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>ä½ è¿˜å¯ä»¥é€šè¿‡ç»™Effect Hook ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼ˆæ˜¯ä¸ªæ•°ç»„ï¼‰çš„æ–¹å¼ï¼Œæ¥æ§åˆ¶å®ƒä»€ä¹ˆæ—¶å€™è¿è¡Œã€‚æ¯å½“ç¬¬äºŒä¸ªå‚æ•°ä¸­çš„å˜é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒEffect Hookå°±ä¼šrunã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œåªæœ‰å½“countå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ‰å°†å…¶å­˜å…¥localStorage:<br><img src="https://pic.downk.cc/item/5fd1cdb33ffa7d37b32ef914.jpg"></p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æ€»ç»“ï¼ŒEffect Hookå‡½æ•°ä¸­ç¬¬äºŒä¸ªå‚æ•°å€¼çš„ç”¨æ³•ï¼šï¼ˆé€šè¿‡ç¬¬äºŒä¸ªå‚æ•°å€¼æ¥æ§åˆ¶å®ƒä½•æ—¶run)</p><ul><li>every time(no argumentï¼Œä¸ä¼ ç¬¬äºŒä¸ªå‚æ•°)</li><li>only on mount or unmount ([]argument, ç©ºæ•°ç»„)</li><li>only when a certain variable changes(ä¾‹å¦‚[count]ï¼Œæ•°ç»„ä¸­æ”¾å…¥æŒ‡å®šå˜é‡)</li></ul><p>ğŸ–ï¼šforceUpdate APIå¯ä»¥å¼ºåˆ¶è®©ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯æˆ‘ä»¬åº”è¯¥è°¨æ…ä½¿ç”¨ ï¼Œå‚è€ƒ<a href="https://zh-hans.reactjs.org/docs/react-component.html#forceupdate">forceUpdate</a>ä»¥åŠ <a href="https://reactjs.org/docs/hooks-faq.html#is-there-something-like-forceupdate">Is there something like forceUpdate</a></p><h4 id="åä¸€ã€çº¯å‡½æ•°ç»„ä»¶â€”â€”Pure-React-Funtion-Component"><a href="#åä¸€ã€çº¯å‡½æ•°ç»„ä»¶â€”â€”Pure-React-Funtion-Component" class="headerlink" title="åä¸€ã€çº¯å‡½æ•°ç»„ä»¶â€”â€”Pure React Funtion Component"></a>åä¸€ã€çº¯å‡½æ•°ç»„ä»¶â€”â€”Pure React Funtion Component</h4><p>ç±»ç»„ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨PureComponent æˆ–è€… shouldComponentUpdate æ¥é¿å…é‡æ–°æ¸²æŸ“å¯¼è‡´çš„æ€§èƒ½ç“¶é¢ˆã€<a href="https://www.robinwieruch.de/react-prevent-rerender-component">avoid performance bottlenecks in React by preventing rereders</a>ã€‘ã€‚è®©æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App =<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">const</span> [greeting,setGreeting]=useState(<span class="hljs-string">&#x27;hello react&#x27;</span>);    <span class="hljs-keyword">const</span>[count,setCount]=useState(<span class="hljs-number">0</span>);    <span class="hljs-keyword">const</span> handleIncrement = <span class="hljs-function">()=&gt;</span>        setCount(<span class="hljs-function"><span class="hljs-params">currentCount</span>=&gt;</span>currentCount+<span class="hljs-number">1</span>);    <span class="hljs-keyword">const</span> handleDecrement = <span class="hljs-function">()=&gt;</span>        setCount(<span class="hljs-function"><span class="hljs-params">currentCount</span>=&gt;</span>currentCount-<span class="hljs-number">1</span>);        <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> setGreeting(event.target.value);    <span class="hljs-keyword">return</span> (        &lt;div&gt;            &lt;input onChange=&#123;handleChange&#125; /&gt;            &lt;Count count=&#123;count&#125; /&gt;            &lt;button onClick=&#123;handleIncrement&#125;&gt;Increment&lt;/button&gt;            &lt;button onClick=&#123;handleDecrement&#125;&gt;Decrement&lt;/button&gt;        &lt;/div&gt;    )&#125;;<span class="hljs-keyword">const</span> Count=<span class="hljs-function">(<span class="hljs-params">&#123;count&#125;</span>)=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Does it (re)render?&#x27;</span>);    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>&#125;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¯å½“æˆ‘ä»¬å‘inputè¾“å…¥æ¡†è¾“å…¥å†…å®¹æ—¶ï¼Œè¿™ä¸ªAppç»„ä»¶å°±ä¼šæ›´æ–°å®ƒçš„staterç„¶åé‡æ–°æ¸²æŸ“ã€‚ä¸æ­¤åŒæ—¶ï¼ŒCountç»„ä»¶ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ï¼ˆåœ¨æ§åˆ¶å°ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡æˆ‘ä»¬åœ¨è¾“å…¥æ¡†é‡Œæ“ä½œï¼Œå°±ä¼šæ‰“å°â€œDoes it (re)render?â€è¿™å¥ï¼‰ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œreactå‡½æ•°ç»„ä»¶ä½¿ç”¨React Memoã€<a href="https://reactjs.org/docs/react-api.html">Reactâ€™s top level APIs</a>ã€‘æ¥é˜»æ­¢å½“propsæ²¡æœ‰å˜åŒ–æ—¶çš„é‡æ–°æ¸²æŸ“ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React,&#123;useState, memo&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> APP=<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">const</span> [greeting,setGreeting] = useState(<span class="hljs-string">&#x27;hello react&#x27;</span>);    <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>);    <span class="hljs-keyword">const</span> handleIncrement = <span class="hljs-function">() =&gt;</span>        setCount(<span class="hljs-function"><span class="hljs-params">currentCount</span> =&gt;</span> currentCount + <span class="hljs-number">1</span>);     <span class="hljs-keyword">const</span> handleDecrement = <span class="hljs-function">() =&gt;</span>        setCount(<span class="hljs-function"><span class="hljs-params">currentCount</span> =&gt;</span> currentCount - <span class="hljs-number">1</span>);   <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> setGreeting(event.target.value);   <span class="hljs-keyword">return</span> (    &lt;div&gt;      &lt;input type=<span class="hljs-string">&quot;text&quot;</span> onChange=&#123;handleChange&#125; /&gt;       &lt;Count count=&#123;count&#125; /&gt;       &lt;button type=<span class="hljs-string">&quot;button&quot;</span> onClick=&#123;handleIncrement&#125;&gt;        Increment      &lt;/button&gt;      &lt;button type=<span class="hljs-string">&quot;button&quot;</span> onClick=&#123;handleDecrement&#125;&gt;        Decrement      &lt;/button&gt;    &lt;/div&gt;  );&#125;<span class="hljs-comment">//memoæ—¶æŠŠæ•´ä¸ªç®­å¤´å‡½æ•°çš„å†…å®¹åŒ…è£¹èµ·æ¥</span><span class="hljs-keyword">const</span> Count = memo(<span class="hljs-function">(<span class="hljs-params">&#123;count&#125;</span>) =&gt;</span> &#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;does it (re)render?&#x27;</span>);    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>&#125;);<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>ç°åœ¨æˆ‘ä»¬å†æ¥è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œå½“æˆ‘ä»¬å‘inputè¾“å…¥æ¡†è¾“å…¥å†…å®¹æ—¶ï¼Œåªæœ‰Appç»„ä»¶ä¼šrerender, Countç»„ä»¶ä¸å†rerenderäº†ï¼å½“ç„¶ï¼Œè¿™ç§æ€§èƒ½ä¼˜åŒ–ä¸åº”è¯¥ä½œä¸ºé»˜è®¤è®¾ç½®ã€‚å½“é‡æ–°æ¸²æŸ“ç»„ä»¶æ—¶é—´è¿‡é•¿é‡åˆ°é—®é¢˜æ—¶å¯ä»¥è¿›è¡Œç±»ä¼¼çš„æ£€æŸ¥ã€‚ï¼ˆæ¯”å¦‚ï¼Œrenderingå’Œupdating Tableç»„ä»¶ä¸­çš„å¤§é‡å†…å®¹ï¼‰</p><h4 id="åäºŒã€React-Function-Component-Ref"><a href="#åäºŒã€React-Function-Component-Ref" class="headerlink" title="åäºŒã€React Function Component: Ref"></a>åäºŒã€React Function Component: Ref</h4><p>refsä¸€èˆ¬åªåœ¨å°‘æ•°åœºæ™¯ä¸‹ä½¿ç”¨ï¼š</p><ul><li>ç®¡ç†ç„¦ç‚¹ï¼Œæ–‡æœ¬é€‰æ‹©æˆ–è€…æ—¶åª’ä½“æ’­æ”¾</li><li>è§¦å‘å¼ºåˆ¶åŠ¨ç”»</li><li>é›†æˆç¬¬ä¸‰æ–¹DOMåº“</li></ul><p>åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿ç”¨refsï¼Œè¦å¼•å…¥useRefã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œinputè¾“å…¥æ¡†å°†è·å¾—ç„¦ç‚¹ï¼ˆafter component did mount)</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> React,&#123;useState, useEffect, useRef&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">const</span> App=<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">const</span> [greeting, setGreeting] = useState(<span class="hljs-string">&#x27;hello Reactï¼&#x27;</span>);    <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span>setGreeting(event.target.value);    <span class="hljs-keyword">return</span>(        &lt;div&gt;            &lt;h1&gt;&#123;greeting&#125;&lt;/h1&gt;            &lt;Input value=&#123;greeting&#125; handleChange=&#123;handleChange&#125; /&gt;        &lt;/div&gt;    )&#125;;<span class="hljs-keyword">const</span> Input=<span class="hljs-function">(<span class="hljs-params">&#123;value,handleChange&#125;</span>)=&gt;</span>&#123;    <span class="hljs-keyword">const</span> ref=useRef();    useEffect(<span class="hljs-function">()=&gt;</span>ref.current.focus(),[]);    <span class="hljs-keyword">return</span> (        &lt;input             type=<span class="hljs-string">&#x27;text&#x27;</span>             value=&#123;value&#125;             onChange=&#123;handleChange&#125;             ref=&#123;ref&#125;        /&gt;    )&#125;;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><p>ä½†æ˜¯ä¸èƒ½ç»™ä¸€ä¸ªå‡½æ•°ç»„ä»¶æä¾›ä¸€ä¸ªrefä½œä¸ºpropsçš„ä¸€éƒ¨åˆ†ï¼The ref will be assigned to the component but not to the actual DOM node!<br><img src="https://pic.downk.cc/item/5fd1e2873ffa7d37b34ab442.jpg"></p><p>è¿™æ ·å†™ä¼šæŠ¥é”™ï¼å› ä¸ºrefæŒ‡ä»£çš„ä¸æ˜¯ä¸€ä¸ªçœŸå®çš„domèŠ‚ç‚¹ï¼Œè€Œæ˜¯ä¸€ä¸ªç»„ä»¶å®ä¾‹ã€‚</p><p><img src="https://pic.downk.cc/item/5fd1e2e03ffa7d37b34b4e87.jpg"></p><p>ä»ä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å¹¶ä¸æ¨èçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªrefï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¯´â€React function component canâ€™t have  refsâ€ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬ä¸å¾—ä¸å‘ä¸€ä¸ªå‡½æ•°ç»„ä»¶ä¼ é€’ä¸€ä¸ªref(ä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³æµ‹é‡ä¸€ä¸ªå‡½æ•°ç»„ä»¶DOMèŠ‚ç‚¹çš„æ•°é‡)ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥<a href="https://reactjs.org/docs/forwarding-refs.html">forward the ref</a></p><p><img src="https://pic.downk.cc/item/5fd1e4643ffa7d37b3519759.jpg" alt="forwardRef"></p><p>æƒ³çŸ¥é“æ›´å¤šå…³äºrefçš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒ<a href="https://www.robinwieruch.de/react-ref-attribute-dom-node">How to use Ref in React</a> ä»¥åŠ <a href="https://reactjs.org/docs/refs-and-the-dom.html">React å®˜æ–¹æ–‡æ¡£â€”â€”Refs and the DOM</a></p><p>å…¨æ–‡å‚è€ƒï¼š<a href="https://www.robinwieruch.de/react-function-component">React Function Components</a></p>]]></content>
    
    
    <categories>
      
      <category>Reactå­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>JS01-ç†è§£JavaScriptå‡½æ•°è°ƒç”¨å’Œthis</title>
    <link href="/2020/12/08/JS01-%E7%90%86%E8%A7%A3JavaScript%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%92%8Cthis/"/>
    <url>/2020/12/08/JS01-%E7%90%86%E8%A7%A3JavaScript%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%92%8Cthis/</url>
    
    <content type="html"><![CDATA[<h4 id="ç†è§£JavaScriptå‡½æ•°è°ƒç”¨ä¸thisçš„è¯­ä¹‰"><a href="#ç†è§£JavaScriptå‡½æ•°è°ƒç”¨ä¸thisçš„è¯­ä¹‰" class="headerlink" title="ç†è§£JavaScriptå‡½æ•°è°ƒç”¨ä¸thisçš„è¯­ä¹‰"></a>ç†è§£JavaScriptå‡½æ•°è°ƒç”¨ä¸thisçš„è¯­ä¹‰</h4><p>&emsp;æˆ‘ä»¬ç»å¸¸å¯¹JSçš„å‡½æ•°è°ƒç”¨ï¼Œä»¥åŠthisåœ¨å‡½æ•°è°ƒç”¨ä¸­çš„æŒ‡ä»£æœ‰å¾ˆå¤šçš„å›°æƒ‘ã€‚é€šè¿‡ç†è§£æ ¸å¿ƒå‡½æ•°è°ƒç”¨çš„åŸè¯­å¯èƒ½ä¼šæœ‰åŠ©äºæ¶ˆé™¤å¾ˆå¤šæ­¤ç±»çš„ç–‘æƒ‘ï¼Œä¹Ÿå¯ä»¥æŠŠå…¶ä»–å‡½æ•°è°ƒç”¨æ–¹å¼çœ‹æˆæ˜¯æœ€åŸå§‹å‡½æ•°è°ƒç”¨çš„è¯­æ³•ç³–ã€‚The basic idea is the same.</p><h5 id="ä¸€ã€-The-Core-Primitive-æ ¸å¿ƒåŸè¯­ï¼š"><a href="#ä¸€ã€-The-Core-Primitive-æ ¸å¿ƒåŸè¯­ï¼š" class="headerlink" title="ä¸€ã€ The Core Primitive æ ¸å¿ƒåŸè¯­ï¼š"></a>ä¸€ã€ The Core Primitive æ ¸å¿ƒåŸè¯­ï¼š</h5><p>First, letâ€™s look at the core function invocation primitive, a Functionâ€™s call method[1]. The call method is relatively straight forward.</p><ol><li>Make an argument list (<strong>argList</strong>) out of parameters 1 through the end</li><li>The first parameter is <strong>thisValue</strong></li><li>Invoke the function with <strong>this</strong> set to <strong>thisValue</strong> and the <strong>argList</strong> as its argument list<br>ä¾‹å­ï¼š<pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params">thing</span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span> + <span class="hljs-string">&#x27;say hello&#x27;</span> + thing);&#125;hello.call(<span class="hljs-string">&#x27;Yehuda&#x27;</span>,<span class="hljs-string">&#x27;world&#x27;</span>);<span class="hljs-comment">//Yehuda says hello world</span></code></pre></li></ol><p>As you can see, we invoked the <strong>hello</strong> method with this set to â€œYehudaâ€ and a single argument â€œworldâ€. This is the core primitive of JavaScript function invocation. You can think of all other function calls as desugaring to this primitive. (to â€œdesugarâ€ is to take a convenient syntax and describe it in terms of a more basic core primitive).</p><h5 id="äºŒã€ç®€å•å‡½æ•°è°ƒç”¨"><a href="#äºŒã€ç®€å•å‡½æ•°è°ƒç”¨" class="headerlink" title="äºŒã€ç®€å•å‡½æ•°è°ƒç”¨"></a>äºŒã€ç®€å•å‡½æ•°è°ƒç”¨</h5><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params">thing</span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;Hello&#x27;</span> + thing);&#125;<span class="hljs-comment">//ç®€å•å‡½æ•°è°ƒç”¨</span>hello(<span class="hljs-string">&#x27;world&#x27;</span>);<span class="hljs-comment">//desugars to:</span>hello.call(<span class="hljs-built_in">window</span>, <span class="hljs-string">&#x27;world&#x27;</span>)<span class="hljs-comment">//åœ¨ES5çš„ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œdesugars to:</span>hello.call(<span class="hljs-literal">undefined</span>, <span class="hljs-string">&#x27;world&#x27;</span>)</code></pre><p>åœ¨å†…è”å£°æ˜çš„å‡½æ•°ä¸­ï¼Œä¹Ÿæœ‰ç›¸åŒçš„â€œè§£ç³–â€ï¼š<br>(function() {})()  = (function() {}).call(windowæˆ–undefined)</p><h5 id="ä¸‰ã€æˆå‘˜å‡½æ•°"><a href="#ä¸‰ã€æˆå‘˜å‡½æ•°" class="headerlink" title="ä¸‰ã€æˆå‘˜å‡½æ•°"></a>ä¸‰ã€æˆå‘˜å‡½æ•°</h5><pre><code class="hljs js"><span class="hljs-keyword">var</span> person = &#123;    name: <span class="hljs-string">&#x27;Eich&#x27;</span>,    hello: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">thing</span>)</span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span> + <span class="hljs-string">&#x27;say hello&#x27;</span> + thing)    &#125;&#125;<span class="hljs-comment">//æˆå‘˜å‡½æ•°è°ƒç”¨</span>person.hello(<span class="hljs-string">&#x27;world&#x27;</span>);<span class="hljs-comment">//desugars to:</span>person.hello.call(person,<span class="hljs-string">&#x27;world&#x27;</span>)</code></pre><p>å¦‚æœä¸ºä¸€ä¸ªå¯¹è±¡åŠ¨æ€çš„æ·»åŠ æˆå‘˜å‡½æ•°ï¼Œä¹Ÿæœ‰ç›¸åŒçš„â€œè§£ç³–â€ï¼š</p><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params">thing</span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span> + <span class="hljs-string">&#x27;say hello&#x27;</span> + thing);&#125;person = &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Eich&#x27;</span>&#125;;person.hello = hello;person.hello(<span class="hljs-string">&#x27;world&#x27;</span>);<span class="hljs-comment">//still desugars to :</span><span class="hljs-comment">//person.hello.call(person,&#x27;world&#x27;)</span>hello(<span class="hljs-string">&#x27;world&#x27;</span>);<span class="hljs-comment">//&quot;[object DOMwindow] say hello world&quot;</span></code></pre><p>ğŸ–ï¼šNotice that the function doesnâ€™t have a persistent notion of its â€˜thisâ€™. It is always set at call time based upon the way it was invoked by its caller.</p><h5 id="å››ã€ä½¿ç”¨å‡½æ•°åŸå‹ç»‘å®š-Function-prototype-bind"><a href="#å››ã€ä½¿ç”¨å‡½æ•°åŸå‹ç»‘å®š-Function-prototype-bind" class="headerlink" title="å››ã€ä½¿ç”¨å‡½æ•°åŸå‹ç»‘å®š Function.prototype.bind"></a>å››ã€ä½¿ç”¨å‡½æ•°åŸå‹ç»‘å®š Function.prototype.bind</h5><p>&emsp;å› ä¸ºæœ‰æ—¶ä½¿ç”¨æŒä¹…åŒ–thiså€¼å¼•ç”¨å‡½æ•°å¯èƒ½ä¼šå¾ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥äººä»¬ä¸€ç›´ä»¥æ¥éƒ½ä½¿ç”¨ç®€å•çš„é—­åŒ…æŠ€å·§å°†å‡½æ•°è½¬æ¢æˆä¸å˜çš„thiså€¼ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">var</span> person = &#123;    name: <span class="hljs-string">&#x27;Eich&#x27;</span>,    hello: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-built_in">this</span></span>)</span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name + <span class="hljs-string">&#x27;says hello&#x27;</span> +thing);    &#125;&#125;<span class="hljs-keyword">var</span> boundHello = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">thing</span>)</span>&#123;    <span class="hljs-comment">//ä½¿ç”¨åŸå§‹çš„callæ–¹æ³•æŠŠthisè½¬æ¢ä¸ºæˆ‘ä»¬æƒ³è¦å®ƒæŒ‡ä»£çš„å€¼</span>    <span class="hljs-keyword">return</span> person.hello.call(person,thing)&#125;boundHello(<span class="hljs-string">&#x27;world&#x27;</span>);<span class="hljs-comment">//desugars to: boundHello.call(window, &#x27;world&#x27;)</span></code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥è¿›ä¸€æ­¥æ”¹è¿›ï¼Œè®©ä¸Šé¢çš„å†™æ³•æ›´åŠ é€šç”¨ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">var</span> bind = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">func,thisValue</span>)</span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">return</span> func.apply(thisValue, <span class="hljs-built_in">arguments</span>);    &#125;&#125;<span class="hljs-keyword">var</span> boundHello = bind(person.hello, person);boundHello(<span class="hljs-string">&#x27;world&#x27;</span>)<span class="hljs-comment">//&#x27;Eich says hello world&#x27;</span></code></pre><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œargumentsæ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œä»£è¡¨æ‰€æœ‰è¢«ä¼ å…¥å‡½æ•°çš„å‚æ•°å€¼ã€‚apply() æ–¹æ³•è·Ÿcallç±»ä¼¼ï¼Œé™¤äº†å®ƒæ¥æ”¶çš„æ˜¯ç±»æ•°ç»„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè€Œcallæ¥æ”¶çš„æ˜¯ä¸€ä¸ªä¸€ä¸ªå‚æ•°ç»„æˆçš„åˆ—è¡¨ call(thisArg, arg1,arg2,â€¦)ã€‚<br>å¯¹ä¸Šè¿°ä»£ç çš„è§£é‡Šï¼šOur <strong>bind</strong> method simply returns a new function. When it is invoked, our new function simply invokes the original function that was passed in, setting the original value as <strong>this</strong>. It also passes through the arguments.</p><p>å‚è€ƒæ–‡ç« ï¼š <a href="https://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/">Understanding JavaScript Function Invocation and â€œthisâ€</a></p>]]></content>
    
    
    <categories>
      
      <category>JSå­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¢è¯•03-å¦‚ä½•é¿å…ç”Ÿå‘½å‘¨æœŸä¸­çš„å‘ï¼Ÿ</title>
    <link href="/2020/12/07/%E9%9D%A2%E8%AF%9503-%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%AD%E7%9A%84%E5%9D%91%EF%BC%9F/"/>
    <url>/2020/12/07/%E9%9D%A2%E8%AF%9503-%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%AD%E7%9A%84%E5%9D%91%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<h4 id="é¢è¯•åœºæ™¯3ï¼šå¦‚ä½•é¿å…ç”Ÿå‘½å‘¨æœŸä¸­çš„å‘ï¼Ÿï¼ˆç»éªŒé¢˜ï¼‰"><a href="#é¢è¯•åœºæ™¯3ï¼šå¦‚ä½•é¿å…ç”Ÿå‘½å‘¨æœŸä¸­çš„å‘ï¼Ÿï¼ˆç»éªŒé¢˜ï¼‰" class="headerlink" title="é¢è¯•åœºæ™¯3ï¼šå¦‚ä½•é¿å…ç”Ÿå‘½å‘¨æœŸä¸­çš„å‘ï¼Ÿï¼ˆç»éªŒé¢˜ï¼‰"></a>é¢è¯•åœºæ™¯3ï¼šå¦‚ä½•é¿å…ç”Ÿå‘½å‘¨æœŸä¸­çš„å‘ï¼Ÿï¼ˆç»éªŒé¢˜ï¼‰</h4><p>å¦‚ä½•é¿å…å‘ï¼Ÿæ¢ç§æ€ç»´ä¹Ÿå°±æ˜¯â€ä¸ºä»€ä¹ˆä¼šæœ‰å‘?â€,åœ¨ä»£ç ç¼–å†™ä¸­ï¼Œé‡åˆ°çš„å‘é€šå¸¸æœ‰ä¸¤ç§ï¼š</p><ul><li>1.åœ¨ä¸æ°å½“çš„æ—¶æœºè°ƒç”¨äº†ä¸åˆé€‚çš„ä»£ç </li><li>2.åœ¨éœ€è¦è°ƒç”¨æ—¶ï¼Œå´å¿˜äº†è°ƒç”¨</li></ul><p>é‚£ä¹ˆé’ˆå¯¹ç”Ÿå‘½å‘¨æœŸçš„å‘ï¼Œå¯ä»¥é€šè¿‡æ¢³ç†ç”Ÿå‘½å‘¨æœŸï¼Œæ˜ç¡®å‘¨æœŸå‡½æ•°èŒè´£ï¼Œç¡®è®¤ä»€ä¹ˆæ—¶å€™è¯¥åšä»€ä¹ˆäº‹ï¼Œä¾æ¬¡æ¥é¿å…å‘ã€‚å› æ­¤ç°åœ¨ä¸»è¦æ€è€ƒä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>1.åŸºäºå‘¨æœŸç±»å‹çš„æ¢³ç†ï¼Œç¡®è®¤ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„<strong>ä½¿ç”¨æ–¹å¼</strong></li><li>2.åŸºäºèŒè´£çš„æ¢³ç†ï¼Œç¡®è®¤ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„<strong>é€‚ç”¨èŒƒå›´</strong></li></ul><p><img src="https://pic.downk.cc/item/5fcdeaf03ffa7d37b3c10890.jpg" alt="ç”Ÿå‘½å‘¨æœŸçš„æ¢³ç†"></p><h5 id="ä¸€ã€ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µ"><a href="#ä¸€ã€ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µ" class="headerlink" title="ä¸€ã€ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µ"></a>ä¸€ã€ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µ</h5><p>å½“æˆ‘ä»¬åœ¨è®¨è®ºReactç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ—¶å€™ï¼Œä¸€å®šæ˜¯åœ¨è®¨è®ºç±»ç»„ä»¶ï¼ˆClass Component)ã€‚å‡½æ•°å¼ç»„ä»¶å¹¶æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåªä¼šä»å¤´æ‰§è¡Œåˆ°å°¾ã€‚</p><p>ç”Ÿå‘½å‘¨æœŸå…¶å®æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œæåˆ°ç”Ÿå‘½å‘¨æœŸæˆ‘ä»¬ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„æ˜¯componentDidMount, componenetWillMountç­‰å‡½æ•°ã€‚ç„¶è€Œè¿™äº›å‡½æ•°å¹¶ä¸ç­‰åŒäºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œåªæ˜¯åœ¨ç”Ÿå‘½å‘¨æœŸä¸­æŒ‰é¡ºåºè¢«è°ƒç”¨çš„å‡½æ•°ã€‚<strong>æŒ‚è½½ -&gt; æ›´æ–° -&gt;å¸è½½</strong>ï¼Œè¿™ä¸€å®Œæ•´çš„æµç¨‹ï¼Œæ‰æ˜¯Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><h5 id="äºŒã€ç”Ÿå‘½å‘¨æœŸæµç¨‹æ¢³ç†"><a href="#äºŒã€ç”Ÿå‘½å‘¨æœŸæµç¨‹æ¢³ç†" class="headerlink" title="äºŒã€ç”Ÿå‘½å‘¨æœŸæµç¨‹æ¢³ç†"></a>äºŒã€ç”Ÿå‘½å‘¨æœŸæµç¨‹æ¢³ç†</h5><p><strong>1.æŒ‚è½½é˜¶æ®µ</strong><br>&emsp;æŒ‚è½½é˜¶æ®µæ˜¯æŒ‡ç»„ä»¶ä»åˆå§‹åŒ–åˆ°å®ŒæˆåŠ è½½çš„è¿‡ç¨‹ã€‚</p><ul><li>âœ¨<strong>constructorå‡½æ•°</strong>ï¼šconstructoræ˜¯ç±»é€šç”¨çš„æ„é€ å‡½æ•°ï¼Œå¸¸ç”¨äºåˆå§‹åŒ–ï¼ˆé€šå¸¸æ˜¯åˆå§‹åŒ–state,ä»¥åŠç»‘å®šå‡½æ•°ï¼‰<pre><code class="hljs js"><span class="hljs-comment">//è¿‡å»çš„å†™æ³•</span><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Counter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>&#123;    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span>&#123;        <span class="hljs-built_in">super</span>(props);        <span class="hljs-built_in">this</span>.state=&#123;            count:<span class="hljs-number">0</span>        &#125;        <span class="hljs-built_in">this</span>.handleClick=<span class="hljs-built_in">this</span>.handleClick.bind(<span class="hljs-built_in">this</span>);    &#125;    <span class="hljs-function"><span class="hljs-title">handleClick</span>(<span class="hljs-params"></span>)</span>&#123;        ...    &#125;    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;    &#125;&#125;<span class="hljs-string">``</span><span class="hljs-string">` </span><span class="hljs-string">å½“ç±»å±æ€§å¼€å§‹æµè¡Œåï¼Œç°åœ¨Reactç¤¾åŒºçš„å†™æ³•å‘ç”Ÿäº†å˜åŒ–ï¼Œå»é™¤äº†constructorã€‚</span><span class="hljs-string"></span><span class="hljs-string">`</span><span class="hljs-string">``</span>js<span class="hljs-comment">//ç°åœ¨çš„å†™æ³•</span><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Counter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>&#123;    state=&#123;        count:<span class="hljs-number">0</span>,    &#125;    <span class="hljs-comment">//ç±»å±æ€§ç¬¬ä¸‰é˜¶æ®µææ¡ˆï¼Œè¿™ç§ä¸å†éœ€è¦é¢å¤–ç»‘å®š</span>    handleClick=<span class="hljs-function">()=&gt;</span>&#123;        ...    &#125;    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;    &#125;&#125;</code></pre>Reactç¤¾åŒºå»é™¤constructorçš„åŸå› ï¼š</li></ul><ol><li>constructoræœ¬èº«å¹¶ä¸å±äºReactçš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒåªæ˜¯Classç»„ä»¶çš„åˆå§‹åŒ–å‡½æ•°</li><li>constructorä¸­å¹¶ä¸æ¨èå»å¤„ç†åˆå§‹åŒ–ä»¥å¤–çš„é€»è¾‘</li><li>é€šè¿‡å»é™¤constructorï¼Œä»£ç å˜å¾—æ›´åŠ ç®€æ´</li></ol><ul><li>âœ¨<strong>getDerivedStateFromPropså‡½æ•°</strong>ï¼š ä½¿ç»„ä»¶åœ¨propså˜åŒ–æ—¶æ›´æ–°state</li></ul><p>å®ƒçš„è§¦å‘æ—¶æœºæ˜¯ï¼š</p><ol><li>å½“propsè¢«ä¼ å…¥æ—¶</li><li>stateå‘é€å˜åŒ–æ—¶</li><li>forceUpdateè¢«è°ƒç”¨æ—¶</li></ol><p>ğŸ–ï¼šä¸€ä¸ªå¸¸è§é”™è¯¯æ˜¯è®¤ä¸ºåªæœ‰propså‘é€å˜åŒ–æ—¶ï¼ŒgetDerivedStateFromPropsæ‰ä¼šè¢«è°ƒç”¨ï¼Œå®é™…ä¸Šåªè¦çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼ŒgetDerivedStateFromPropså°±ä¼šè¢«è°ƒç”¨ï¼Œå¤–éƒ¨å‚æ•°propsä¼ å…¥æ—¶å°±ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä»¥ä¸‹æ˜¯å®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„ä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExampleComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;Â  <span class="hljs-comment">// åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ– stateï¼Œ</span>Â  <span class="hljs-comment">// æˆ–è€…ä½¿ç”¨å±æ€§åˆå§‹åŒ–å™¨ã€‚</span>Â  state = &#123;Â  Â  isScrollingDown: <span class="hljs-literal">false</span>,Â  Â  lastRow: <span class="hljs-literal">null</span>,Â  &#125;;Â  <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-title">getDerivedStateFromProps</span>(<span class="hljs-params">props, state</span>)</span> &#123;Â  Â  <span class="hljs-keyword">if</span> (props.currentRow !== state.lastRow) &#123;Â  Â  Â  <span class="hljs-keyword">return</span> &#123;Â  Â  Â  Â  isScrollingDown: props.currentRow &gt; state.lastRow,Â  Â  Â  Â  lastRow: props.currentRow,Â  Â  Â  &#125;;Â  Â  &#125;Â  Â  <span class="hljs-comment">// è¿”å› null è¡¨ç¤ºæ— éœ€æ›´æ–° stateã€‚</span>Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;Â  &#125;&#125;</code></pre><p>æŒ‰ç…§å®˜æ–¹çš„è¯´è¯ï¼Œå®ƒçš„ä½¿ç”¨åœºæ™¯æ˜¯éå¸¸æœ‰é™çš„ã€‚ç”±äºå¤ªå¤šä½¿ç”¨é”™è¯¯çš„æ¡ˆä¾‹ï¼ŒReactå›¢é˜Ÿè¿˜å› æ­¤å†™äº†<a href="https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html">ä½ å¯èƒ½ä¸éœ€è¦ä½¿ç”¨æ´¾ç”Ÿstate</a>ï¼Œæ–‡ä¸­åˆ—ä¸¾äº†é”™è¯¯ä½¿ç”¨getDerivedStateFromPropsçš„ä¸¤ä¸ªå…¸å‹åé¢æ¡ˆä¾‹ï¼š</p><ol><li>ç›´æ¥å¤åˆ¶propåˆ°state</li><li>åœ¨propså˜åŒ–åä¿®æ”¹state</li></ol><p>è¿™ä¸¤ç§å†™æ³•é™¤äº†å¢åŠ ä»£ç çš„ç»´æŠ¤æˆæœ¬å¤–ï¼Œæ²¡æœ‰å¸¦æ¥ä»»ä½•å¥½å¤„ã€‚</p><ul><li>âœ¨<strong>UNSAFE_componentWillMountå‡½æ•°</strong>ï¼š ä¹Ÿå°±æ˜¯componentWillMountï¼Œç”¨äºç»„ä»¶åŠ è½½å‰åšæŸäº›æ“ä½œã€‚åœ¨Reactçš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ä¸‹ï¼Œè¯¥æ–¹æ³•å¯èƒ½ä¼šè¢«å¤šæ¬¡è°ƒç”¨ï¼Œæ‰€ä»¥ç›®å‰è¢«æ ‡è®°ä¸ºå¼ƒç”¨ã€‚</li></ul><p>ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯componentWillMountè·ŸæœåŠ¡å™¨ç«¯åŒæ„æ¸²æŸ“æ—¶ï¼Œå¦‚æœåœ¨è¯¥å‡½æ•°é‡Œé¢å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œæ‹‰å–æ•°æ®ï¼Œé‚£ä¹ˆä¼šåœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯åˆ†åˆ«æ‰§è¡Œä¸€æ¬¡ã€‚æ‰€ä»¥æ›´æ¨èä½¿ç”¨componentDidMountä¸­å®Œæˆæ‹‰å–æ•°æ®çš„æ“ä½œã€‚</p><ul><li><p>âœ¨<strong>renderå‡½æ•°</strong>ï¼š renderå‡½æ•°è¿”å›çš„JSXç»“æ„ï¼Œç”¨äºæè¿°å…·ä½“çš„æ¸²æŸ“å†…å®¹ã€‚ä½†æ˜¯ï¼Œrenderå‡½æ•°å¹¶æ²¡æœ‰çœŸæ­£çš„å»æ¸²æŸ“ç»„ä»¶ï¼Œæ¸²æŸ“æ˜¯ä¾é Reactæ“ä½œJSXç»“æ„å®Œæˆçš„ã€‚<br>ğŸ–ï¼šrenderå‡½æ•°åº”è¯¥æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä¸èƒ½åœ¨é‡Œé¢äº§ç”Ÿå‰¯ä½œç”¨ï¼Œæ¯”å¦‚è°ƒç”¨setStateæˆ–è€…ç»‘å®šäº‹ä»¶ã€‚â‘  ä¸èƒ½setStateæ˜¯å› ä¸ºrenderå‡½æ•°åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè¢«è°ƒç”¨ï¼Œè€ŒsetStateä¼šè§¦å‘æ¸²æŸ“ï¼Œå°±ä¼šé€ æˆæ­»å¾ªç¯ã€‚â‘¡ ä¸èƒ½ç»‘å®šäº‹ä»¶æ˜¯å› ä¸ºå®¹æ˜“è¢«é¢‘ç¹è°ƒç”¨æ³¨å†Œã€‚</p></li><li><p>âœ¨<strong>componentDidMountå‡½æ•°</strong>ï¼š ä¸»è¦ç”¨äºç»„ä»¶åŠ è½½å®Œæˆåè¿›è¡ŒæŸäº›æ“ä½œï¼Œæ¯”å¦‚å‘èµ·ç½‘ç»œè¯·æ±‚æˆ–è€…ç»‘å®šäº‹ä»¶ï¼Œè¯¥å‡½æ•°æ˜¯æ¥ç€renderä¹‹åè°ƒç”¨çš„ã€‚ä½†æ˜¯componentDidMountä¸€å®šæ˜¯åœ¨çœŸå®DOMç»˜åˆ¶å®Œæˆä¹‹åè°ƒç”¨å—ï¼Ÿåœ¨æµè§ˆå™¨ç«¯å¯ä»¥è¿™ä¹ˆè®¤ä¸ºã€‚ä½†æ˜¯åœ¨å…¶ä»–åœºæ™¯ä¸‹ï¼Œå°¤å…¶æ˜¯React Nativeåœºæ™¯ä¸‹ï¼ŒcomponentDidMountå¹¶ä¸æ„å‘³ç€çœŸå®çš„ç•Œé¢å·²ç»ç»˜åˆ¶å®Œæ¯•ã€‚ï¼ˆç”±äºæœºå™¨çš„æ€§èƒ½é™åˆ¶ï¼Œè§†å›¾å¯èƒ½è¿˜åœ¨ç»˜åˆ¶ä¸­ï¼‰</p></li></ul><p><strong>2.æ›´æ–°é˜¶æ®µ</strong><br>&emsp;æ›´æ–°é˜¶æ®µæ˜¯æŒ‡å¤–éƒ¨propsä¼ å…¥ï¼Œæˆ–è€…stateå‘ç”Ÿå˜åŒ–æ—¶çš„é˜¶æ®µã€‚è¿™ä¸ªé˜¶æ®µä¸»è¦æœ‰ä»¥ä¸‹6ä¸ªå‡½æ•°ï¼š</p><ul><li>ğŸ’–<strong>UNSAFE_componentWillReceivePropså‡½æ•°</strong>ï¼š è¯¥å‡½æ•°å·²ç»è¢«æ ‡è®°å¼ƒç”¨ï¼Œå› ä¸ºå…¶åŠŸèƒ½å¯è¢«getDerivedStateFromPropsæ‰€æ›¿ä»£ã€‚å½“getDerivedStateFromPropså­˜åœ¨æ—¶ï¼ŒUNSAFE_componentWillReceivePropsä¸ä¼šè¢«è°ƒç”¨ã€‚</li><li>ğŸ’–<strong>getDerivedStateFromPropså‡½æ•°</strong>: åŒæŒ‚è½½é˜¶æ®µçš„å˜ç°ä¸€è‡´ã€‚</li><li>ğŸ’–<strong>shouldComponentUpdateå‡½æ•°</strong>: è¯¥æ–¹æ³•é€šè¿‡è¿”å›trueæˆ–è€…falseæ¥ç¡®å®šæ˜¯å¦éœ€è¦è§¦å‘æ–°çš„æ¸²æŸ“ï¼Œå› ä¸ºæ¸²æŸ“è§¦å‘æœ€åä¸€é“å…³å¡ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯æ€§èƒ½ä¼˜åŒ–çš„å¿…äº‰ä¹‹åœ°ã€‚é€šè¿‡æ·»åŠ åˆ¤æ–­æ¡ä»¶æ¥é˜»æ­¢ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</li></ul><p>Reactå®˜æ–¹æä¾›äº†ä¸€ä¸ªé€šç”¨çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯PureComponentã€‚PureComponentçš„æ ¸å¿ƒåŸç†æ˜¯é»˜è®¤å®ç°äº†shouldComponentUpdateå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­å¯¹propså’Œstateè¿›è¡Œæµ…æ¯”è¾ƒï¼Œç”¨æ¥åˆ¤æ–­æ˜¯å¦è§¦å‘æ›´æ–°ã€‚</p><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-title">shouldComponentUpdate</span>(<span class="hljs-params">nextProps, nextState</span>)</span> &#123;  <span class="hljs-comment">// æµ…æ¯”è¾ƒä»…æ¯”è¾ƒå€¼ä¸å¼•ç”¨ï¼Œå¹¶ä¸ä¼šå¯¹ Object ä¸­çš„æ¯ä¸€é¡¹å€¼è¿›è¡Œæ¯”è¾ƒ</span>  <span class="hljs-keyword">if</span> (shadowEqual(nextProps, <span class="hljs-built_in">this</span>.props) || shadowEqual(nextState, <span class="hljs-built_in">this</span>.state) ) &#123;    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>&#125;</code></pre><ul><li><p>ğŸ’–<strong>UNSAFE_componentWillUpdateå‡½æ•°</strong>: åŒæ ·å·²åºŸå¼ƒï¼Œå› ä¸ºåœ¨åç»­çš„Reactå¼‚æ­¥æ¸²æŸ“è®¾è®¡ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ç»„ä»¶æš‚åœæ›´æ–°æ¸²æŸ“çš„æƒ…å†µã€‚</p></li><li><p>ğŸ’–<strong>renderå‡½æ•°</strong>: è·ŸæŒ‚è½½é˜¶æ®µçš„è¡¨ç°ä¸€è‡´</p></li><li><p>ğŸ’–<strong>getSnapshotBeforeUpdateå‡½æ•°</strong>: getSnapshotBeforeUpdateæ˜¯é…åˆReactæ–°çš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ï¼Œåœ¨DOMæ›´æ–°å‘ç”Ÿä¹‹å‰è¢«è°ƒç”¨ï¼Œè¿”å›å€¼ä½œä¸ºå¯¹componentDidUpdateçš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚å®˜æ–¹ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScrollingList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;Â  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span> &#123;Â  Â  <span class="hljs-built_in">super</span>(props);Â  Â  <span class="hljs-built_in">this</span>.listRef = React.createRef();Â  &#125;Â  <span class="hljs-function"><span class="hljs-title">getSnapshotBeforeUpdate</span>(<span class="hljs-params">prevProps, prevState</span>)</span> &#123;Â  Â  <span class="hljs-comment">// Are we adding new items to the list?</span>Â  Â  <span class="hljs-comment">// Capture the scroll position so we can adjust scroll later.</span>Â  Â  <span class="hljs-keyword">if</span> (prevProps.list.length &lt; <span class="hljs-built_in">this</span>.props.list.length) &#123;Â  Â  Â  <span class="hljs-keyword">const</span> list = <span class="hljs-built_in">this</span>.listRef.current;Â  Â  Â  <span class="hljs-keyword">return</span> list.scrollHeight - list.scrollTop;Â  Â  &#125;Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;Â  &#125;Â  <span class="hljs-function"><span class="hljs-title">componentDidUpdate</span>(<span class="hljs-params">prevProps, prevState, snapshot</span>)</span> &#123;Â  Â  <span class="hljs-comment">// If we have a snapshot value, we&#x27;ve just added new items.</span>Â  Â  <span class="hljs-comment">// Adjust scroll so these new items don&#x27;t push the old ones out of view.</span>Â  Â  <span class="hljs-comment">// (snapshot here is the value returned from getSnapshotBeforeUpdate)</span>Â  Â  <span class="hljs-keyword">if</span> (snapshot !== <span class="hljs-literal">null</span>) &#123;Â  Â  Â  <span class="hljs-keyword">const</span> list = <span class="hljs-built_in">this</span>.listRef.current;Â  Â  Â  list.scrollTop = list.scrollHeight - snapshot;Â  Â  &#125;Â  &#125;Â  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;Â  Â  <span class="hljs-keyword">return</span> (Â  Â  Â  &lt;div ref=&#123;<span class="hljs-built_in">this</span>.listRef&#125;&gt;&#123;<span class="hljs-comment">/* ...contents... */</span>&#125;&lt;/div&gt;Â  Â  );Â  &#125;</code></pre></li><li><p>ğŸ’–<strong>componentDidUpdateå‡½æ•°</strong>: æ­£å¦‚ä¸Šé¢çš„æ¡ˆä¾‹ï¼ŒgetSnapshotBeforeUpdateçš„è¿”å›å€¼ä¼šä½œä¸ºcomponentDidUpdateçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä½¿ç”¨ã€‚componentDidUpdateå‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨setStateæ¥è§¦å‘é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯ä¸€å®šè¦å°å¿ƒï¼Œé¿å…æ­»å¾ªç¯ï¼</p></li></ul><p><strong>3.æŒ‚è½½é˜¶æ®µ</strong><br>&emsp;æŒ‚è½½é˜¶æ®µï¼Œåªæœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚</p><ul><li>âœŒ<strong>componentWillUnmountå‡½æ•°</strong>ï¼šè¯¥å‡½æ•°ä¸»è¦ç”¨äºæ¸…ç†å·¥ä½œï¼Œä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„bugæ˜¯å¿˜è®°åœ¨componentWillUnmountä¸­å–æ¶ˆå®šæ—¶å™¨ï¼Œå¯¼è‡´å®šæ—¶æ“ä½œä¾ç„¶åœ¨ç»„ä»¶é”€æ¯åä¸åœåœ°æ‰§è¡Œã€‚æ‰€ä»¥åœ¨è¯¥é˜¶æ®µä¸€å®šè¦å®Œæˆäº‹ä»¶è§£ç»‘ï¼Œå–æ¶ˆå®šæ—¶å™¨ã€‚</li></ul><h5 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h5><p> æ ¹æ®ä¸Šé¢çš„å†…å®¹ï¼Œå¯ä»¥åšä¸€ä¸ªæ€ç»´å¯¼å›¾ï¼š<br> <img src="https://pic.downk.cc/item/5fce2a393ffa7d37b3f47cbd.jpg" alt="Reactç”Ÿå‘½å‘¨æœŸæ€ç»´å¯¼å›¾"></p><h5 id="äºŒã€ç”Ÿå‘½å‘¨æœŸèŒè´£æ¢³ç†"><a href="#äºŒã€ç”Ÿå‘½å‘¨æœŸèŒè´£æ¢³ç†" class="headerlink" title="äºŒã€ç”Ÿå‘½å‘¨æœŸèŒè´£æ¢³ç†"></a>äºŒã€ç”Ÿå‘½å‘¨æœŸèŒè´£æ¢³ç†</h5><p> èŒè´£æ¢³ç†ä¸»è¦æ˜¯ææ¸…æ¥šä¸¤ä¸ªäº‹æƒ…ï¼š<br> 1ã€ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ï¼Ÿ<br> 2ã€æ¸²æŸ“ä¸­å‘ç”ŸæŠ¥é”™åä¼šæ€æ ·ï¼Ÿ</p><p> <strong>1.è§¦å‘é‡æ–°æ¸²æŸ“çš„ä¸‰ç§æƒ…å†µ</strong>ï¼š</p><ul><li><p>ğŸ˜Š<strong>å‡½æ•°ç»„ä»¶</strong>ï¼š å‡½æ•°ç»„ä»¶åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½æœ‰å¯èƒ½é‡æ–°æ¸²æŸ“ã€‚å®ƒæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œä½†æ˜¯å®˜æ–¹æä¾›äº†ä¸€ä¸ªä¼˜åŒ–æ‰‹æ®µï¼Œé‚£å°±æ˜¯React.memo:</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> MyComponent = React.memo(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MyComponent</span>(<span class="hljs-params">props</span>)</span>&#123;    <span class="hljs-comment">/*ä½¿ç”¨propsæ¸²æŸ“*/</span>&#125;)</code></pre><p>React.memoå¹¶ä¸é˜»æ–­æ¸²æŸ“ï¼Œè€Œæ˜¯è·³è¿‡æ¸²æŸ“ç»„ä»¶çš„æ“ä½œå¹¶ç›´æ¥å¤ç”¨æœ€æ–°ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœï¼Œè¿™ä¸shouldComponentUpdateæ˜¯å®Œå…¨ä¸åŒçš„ã€‚</p></li><li><p>ğŸ˜Š<strong>React.Component</strong>ï¼šå¦‚æœä¸å®ç°shouldComponentUpdateå‡½æ•°ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§æƒ…å†µè§¦å‘æ¸²æŸ“ï¼š<br>1ã€å½“stateå‘ç”Ÿå˜åŒ–æ—¶ã€‚ï¼ˆæœ€å¸¸è§çš„æƒ…å†µï¼‰<br>2ã€å½“çˆ¶ç»„ä»¶çš„Propsä¼ å…¥æ—¶ã€‚ï¼ˆæ— è®ºPropsæœ‰æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåªæœ‰ä¼ å…¥å°±ä¼šå¼•å‘é‡æ–°æ¸²æŸ“ï¼‰</p></li><li><p>ğŸ˜Š<strong>React.PureComponent</strong>: PureComponenté»˜è®¤å®ç°äº†shouldComponentUpdateå‡½æ•°ï¼Œæ‰€ä»¥ä»…åœ¨propsä¸stateè¿›è¡Œæµ…æ¯”è¾ƒåï¼Œç¡®è®¤æœ‰å˜æ›´æ—¶æ‰ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p></li><li><p>*2.é”™è¯¯è¾¹ç•Œ**ï¼š </p></li></ul><p>&emsp;é”™è¯¯è¾¹ç•Œæ˜¯ä¸€ç§Reactç»„ä»¶ï¼Œè¿™ç§ç»„ä»¶å¯ä»¥æ•è·å¹¶æ‰“å°å‘ç”Ÿåœ¨å…¶å­ç»„ä»¶æ ‘ä¸Šä»»ä½•ä½ç½®çš„JavaScripté”™è¯¯ï¼Œå¹¶ä¸”ï¼Œå®ƒä¼šæ¸²æŸ“å‡ºå¤‡ç”¨UIï¼Œå¦‚ä¸‹å®˜æ–¹ç¤ºä¾‹ï¼š</p><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;Â  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span> &#123;Â  Â  <span class="hljs-built_in">super</span>(props);Â  Â  <span class="hljs-built_in">this</span>.state = &#123; <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span> &#125;;Â  &#125;Â  <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-title">getDerivedStateFromError</span>(<span class="hljs-params">error</span>)</span> &#123;Â  Â  <span class="hljs-comment">// æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI</span>Â  Â  <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> &#125;;Â  &#125;Â  <span class="hljs-function"><span class="hljs-title">componentDidCatch</span>(<span class="hljs-params">error, errorInfo</span>)</span> &#123;Â  Â  <span class="hljs-comment">// ä½ åŒæ ·å¯ä»¥å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨</span>Â  Â  logErrorToMyService(error, errorInfo);Â  &#125;Â  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;Â  Â  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.state.hasError) &#123;Â  Â  Â  <span class="hljs-comment">// ä½ å¯ä»¥è‡ªå®šä¹‰é™çº§åçš„ UI å¹¶æ¸²æŸ“</span>Â  Â  Â  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Something went wrong.<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;Â  Â  &#125;Â  Â  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.props.children;Â Â  &#125;&#125;</code></pre><p>æ— è®ºæ˜¯React,è¿˜æ˜¯React Native,å¦‚æœæ²¡æœ‰é”™è¯¯è¾¹ç•Œï¼Œåœ¨ç”¨æˆ·ä¾§çœ‹åˆ°çš„ç°è±¡æ˜¯ï¼šåœ¨æ‰§è¡ŒæŸä¸ªé”™è¯¯æ“ä½œæ—¶ï¼Œè§¦å‘äº†bug, å¼•å‘äº†å´©æºƒï¼Œé¡µé¢ä¼šçªç„¶ç™½å±ã€‚</p><p>ğŸ–ï¼šåœ¨æ¸²æŸ“æ—¶çš„æŠ¥é”™ï¼Œåªèƒ½é€šè¿‡componentDidCatchæ•è·ã€‚è¿™æ˜¯åœ¨åšçº¿ä¸Šé¡µé¢æŠ¥é”™ç›‘æ§æ—¶ï¼ŒåŠå…¶å®¹æ˜“å¿½ç•¥çš„ç‚¹ã€‚</p><h5 id="ä¸‰ã€ç­”é¢˜ï¼š"><a href="#ä¸‰ã€ç­”é¢˜ï¼š" class="headerlink" title="ä¸‰ã€ç­”é¢˜ï¼š"></a>ä¸‰ã€ç­”é¢˜ï¼š</h5><p>ç»è¿‡ä¸Šé¢çš„æ¢³ç†,ç°åœ¨å¯ä»¥å›ç­”å¼€å¤´çš„é—®é¢˜äº†ã€‚</p><blockquote><p>é¿å…ç”Ÿå‘½å‘¨æœŸä¸­çš„å‘éœ€è¦åšå¥½ä¸¤ä»¶äº‹ï¼š</p><p>1.ä¸åœ¨æ°å½“çš„æ—¶å€™è°ƒç”¨äº†ä¸è¯¥è°ƒç”¨çš„ä»£ç ï¼›<br>2.åœ¨éœ€è¦è°ƒç”¨æ—¶ï¼Œä¸è¦å¿˜äº†è°ƒç”¨ã€‚</p></blockquote><p>é‚£ä¹ˆï¼Œæœ‰7ç§æƒ…å†µå®¹æ˜“é€ æˆReactç”Ÿå‘½å‘¨æœŸçš„å‘ï¼š</p><blockquote><p>1.getDerivedStateFromProps å®¹æ˜“ç¼–å†™åæ¨¡å¼ä»£ç ï¼Œä½¿å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶åŒºåˆ†æ¨¡ç³Šã€‚</p></blockquote><blockquote><p>2.componentWillMount åœ¨ React ä¸­å·²è¢«æ ‡è®°å¼ƒç”¨ï¼Œä¸æ¨èä½¿ç”¨ï¼Œä¸»è¦åŸå› æ˜¯æ–°çš„å¼‚æ­¥æ¸²æŸ“æ¶æ„ä¼šå¯¼è‡´å®ƒè¢«å¤šæ¬¡è°ƒç”¨ã€‚æ‰€ä»¥ç½‘ç»œè¯·æ±‚åŠäº‹ä»¶ç»‘å®šä»£ç åº”ç§»è‡³ componentDidMountä¸­ã€‚</p></blockquote><blockquote><p>3.componentWillReceiveProps åŒæ ·è¢«æ ‡è®°å¼ƒç”¨ï¼Œè¢« getDerivedStateFromProps æ‰€å–ä»£ï¼Œä¸»è¦åŸå› æ˜¯æ€§èƒ½é—®é¢˜ã€‚</p></blockquote><blockquote><p>4.shouldComponentUpdate é€šè¿‡è¿”å› true æˆ–è€… false æ¥ç¡®å®šæ˜¯å¦éœ€è¦è§¦å‘æ–°çš„æ¸²æŸ“ã€‚ä¸»è¦ç”¨äºæ€§èƒ½ä¼˜åŒ–ã€‚</p></blockquote><blockquote><p>5.componentWillUpdate åŒæ ·æ˜¯ç”±äºæ–°çš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ï¼Œè€Œè¢«æ ‡è®°åºŸå¼ƒï¼Œä¸æ¨èä½¿ç”¨ï¼ŒåŸå…ˆçš„é€»è¾‘å¯ç»“åˆ getSnapshotBeforeUpdate ä¸ componentDidUpdate æ”¹é€ ä½¿ç”¨ã€‚</p></blockquote><blockquote><p>6.å¦‚æœåœ¨ componentWillUnmount å‡½æ•°ä¸­å¿˜è®°è§£é™¤äº‹ä»¶ç»‘å®šï¼Œå–æ¶ˆå®šæ—¶å™¨ç­‰æ¸…ç†æ“ä½œï¼Œå®¹æ˜“å¼•å‘ bugã€‚</p></blockquote><blockquote><p>7.å¦‚æœæ²¡æœ‰æ·»åŠ é”™è¯¯è¾¹ç•Œå¤„ç†ï¼Œå½“æ¸²æŸ“å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œç”¨æˆ·å°†ä¼šçœ‹åˆ°ä¸€ä¸ªæ— æ³•æ“ä½œçš„ç™½å±ï¼Œæ‰€ä»¥ä¸€å®šè¦æ·»åŠ ã€‚</p></blockquote><h5 id="å››ã€è¿›é˜¶æé—®ï¼šReact-çš„è¯·æ±‚åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Œä¸ºä»€ä¹ˆ"><a href="#å››ã€è¿›é˜¶æé—®ï¼šReact-çš„è¯·æ±‚åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Œä¸ºä»€ä¹ˆ" class="headerlink" title="å››ã€è¿›é˜¶æé—®ï¼šReact çš„è¯·æ±‚åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Œä¸ºä»€ä¹ˆ?"></a>å››ã€è¿›é˜¶æé—®ï¼šReact çš„è¯·æ±‚åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Œä¸ºä»€ä¹ˆ?</h5><p> å¯¹äºå¼‚æ­¥è¯·æ±‚ï¼Œåº”è¯¥æ”¾åœ¨componentDidUpdateä¸­æ“ä½œã€‚ä»æ—¶é—´é¡ºåºä¸Šçœ‹ï¼Œä¼¼ä¹è¿˜æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æœ‰å„è‡ªçš„å¼Šç«¯ï¼š</p><ul><li><p>constructorï¼šå¯ä»¥æ”¾ï¼Œä½†æ˜¯ä»è®¾è®¡ä¸Šçœ‹ä¸æ¨èï¼Œconstructorä¸»è¦ç”¨äºåˆå§‹åŒ–stateå’Œå‡½æ•°ç»‘å®šï¼Œå¹¶ä¸åº”è¯¥æ‰¿è½½ä¸šåŠ¡é€»è¾‘ã€‚è€Œä¸”éšç€ç±»å±æ€§çš„æµè¡Œï¼Œconstructorå·²ç»å¾ˆå°‘ä½¿ç”¨äº†ã€‚</p></li><li><p>componentWillMout: å·²ç»è¢«æ ‡åºŸå¼ƒï¼Œåœ¨æ–°çš„å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ä¸‹å›è§¦å‘å¤šæ¬¡æ¸²æŸ“ï¼Œå®¹æ˜“å¼•å‘bug,ä¸åˆ©äºReactå‡çº§åçš„ä»£ç ç»´æŠ¤ã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•å®å…¸ä¹‹Reactç¯‡</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>npm01--dependenciesä¸devDependenciesçš„åŒºåˆ«</title>
    <link href="/2020/12/06/npm01-dependencies%E4%B8%8EdevDependencies%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2020/12/06/npm01-dependencies%E4%B8%8EdevDependencies%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h4 id="dependencies-ä¸-devDependencies"><a href="#dependencies-ä¸-devDependencies" class="headerlink" title="dependencies ä¸ devDependencies"></a>dependencies ä¸ devDependencies</h4><p>&emsp;å½“æˆ‘ä»¬åœ¨ä½¿ç”¨npm install å®‰è£…nodeæ¨¡å—æ—¶ï¼Œæœ‰ä¸¤ç§å‘½ä»¤å‚æ•°å°†è¿™äº›nodeæ¨¡å—çš„ä¿¡æ¯å†™å…¥åˆ°package.jsonæ–‡ä»¶ä¸­ï¼š</p><ul><li>npm install *** â€“saveï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯å°†ä¾èµ–åŒ…çš„ä¿¡æ¯æ·»åŠ åˆ°package.jsonæ–‡ä»¶çš„dependenciesé”®ä¸‹ã€‚</li><li>npm install *** â€“save-devï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯å°†ä¾èµ–åŒ…çš„ä¿¡æ¯æ·»åŠ åˆ°devDependenciesé”®ä¸‹ã€‚</li></ul><h4 id="1-ä¸åŒç‚¹ï¼š"><a href="#1-ä¸åŒç‚¹ï¼š" class="headerlink" title="1.ä¸åŒç‚¹ï¼š"></a>1.ä¸åŒç‚¹ï¼š</h4><p><strong>devDependenciesæ˜¯å¼€å‘ç¯å¢ƒ</strong>ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ä¸€äº›æ„å»ºå·¥å…·å¦‚webpackã€glupç­‰åªæ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ç”¨çš„åŒ…ï¼Œä¸Šçº¿åå°±å’Œå®ƒä»¬æ²¡æœ‰å…³ç³»äº†ï¼Œæ‰€ä»¥è¿™ç§éƒ½å†™å…¥devDependenciesï¼ˆè¿˜æœ‰ä¸€äº›å•å…ƒæµ‹è¯•å·¥å…·ä¹Ÿå¸è½½è¿™é‡Œï¼‰</p><p><strong>dependenciesæ˜¯ç”Ÿäº§ç¯å¢ƒ</strong>ï¼Œæ¯”å¦‚æˆ‘ä»¬å†™ä¸€ä¸ªé¡¹ç›®éœ€è¦ä¾èµ–React/Vue/jQueryæ‰èƒ½æ‰§è¡Œï¼Œæ²¡æœ‰è¿™ä¸ªåŒ…çš„ä¾èµ–è¿è¡Œå°±ä¼šå‡ºé”™ï¼Œè¿™æ—¶å€™å°±å¿…é¡»æŠŠä¾èµ–å†™å…¥dependenciesé‡Œã€‚</p><h4 id="2-ç›¸åŒç‚¹ï¼š"><a href="#2-ç›¸åŒç‚¹ï¼š" class="headerlink" title="2.ç›¸åŒç‚¹ï¼š"></a>2.ç›¸åŒç‚¹ï¼š</h4><p>dependencieså’Œ devDependenciesç›¸åŒçš„åœ°æ–¹åœ¨äºï¼šå°±æ˜¯å½“æˆ‘ä»¬cloneåˆ«äººçš„åº“è¿›è¡Œå¼€å‘æµ‹è¯•çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡npm install ä¸€é”®å®‰è£…è¿™ä¸¤ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰ä¾èµ–ï¼Œè€Œä¸éœ€è¦ä¸€è¡Œè¡Œåœ°æŸ¥æ‰¾åˆ«äººåˆ°åº•åœ¨æ–‡ä»¶ä¸­å¼•ç”¨äº†å“ªäº›ä¾èµ–ã€‚</p><p>å‚è€ƒï¼š<a href="https://docs.npmjs.com/cli/v6/configuring-npm/package-json#dependencies">npmå®˜æ–¹æ–‡æ¡£â€“dependencies</a></p>]]></content>
    
    
    <categories>
      
      <category>npmå­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¢è¯•02-ä¸ºä»€ä¹ˆReactè¦ç”¨JSXï¼Ÿ</title>
    <link href="/2020/12/02/%E9%9D%A2%E8%AF%9502-%E4%B8%BA%E4%BB%80%E4%B9%88React%E8%A6%81%E7%94%A8JSX%EF%BC%9F/"/>
    <url>/2020/12/02/%E9%9D%A2%E8%AF%9502-%E4%B8%BA%E4%BB%80%E4%B9%88React%E8%A6%81%E7%94%A8JSX%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<h4 id="é¢è¯•åœºæ™¯2ï¼šä¸ºä»€ä¹ˆReactè¦ç”¨JSXï¼Ÿï¼ˆè®ºè¯é¢˜ï¼‰"><a href="#é¢è¯•åœºæ™¯2ï¼šä¸ºä»€ä¹ˆReactè¦ç”¨JSXï¼Ÿï¼ˆè®ºè¯é¢˜ï¼‰" class="headerlink" title="é¢è¯•åœºæ™¯2ï¼šä¸ºä»€ä¹ˆReactè¦ç”¨JSXï¼Ÿï¼ˆè®ºè¯é¢˜ï¼‰"></a>é¢è¯•åœºæ™¯2ï¼šä¸ºä»€ä¹ˆReactè¦ç”¨JSXï¼Ÿï¼ˆè®ºè¯é¢˜ï¼‰</h4><p>&emsp;é’ˆå¯¹â€ä¸ºä»€ä¹ˆé‡‡ç”¨æ”¹æŠ€æœ¯æ–¹æ¡ˆï¼Ÿâ€ç±»å‹çš„é¢˜ï¼Œå…¶å®ä¸»è¦åœ¨è€ƒå¯Ÿä¸¤ä¸ªæ–¹é¢ï¼š</p><ul><li>æŠ€æœ¯å¹¿åº¦ï¼Œæ·±æŒ–çŸ¥è¯†é¢æ¶‰çŒå¹¿åº¦ï¼Œå¯¹æµè¡Œæ¡†æ¶çš„æ¨¡æ¿æ–¹æ¡ˆæ˜¯å¦çŸ¥æ‚‰äº†è§£ã€‚</li><li>æŠ€æœ¯æ–¹æ¡ˆè°ƒç ”èƒ½åŠ›</li></ul><p>æ‰€ä»¥ï¼Œé’ˆå¯¹è¿™ç±»é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨ â€œä¸€å¥è¯è§£é‡Šï¼Œæ ¸å¿ƒæ¦‚å¿µï¼Œæ–¹æ¡ˆå¯¹æ¯”â€ ä¸‰æ­¥èµ°çš„æŠ€å·§æ¥ä½œç­”ï¼š</p><p>1ã€ä¸€å¥è¯è§£æJSXã€‚ç”¨ä¸€å¥è¯è¯´æ¸…æ¥šJSXåˆ°åº•æ˜¯ä»€ä¹ˆã€‚<br>2ã€æ ¸å¿ƒæ¦‚å¿µã€‚JSXç”¨äºè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ<br>3ã€æ–¹æ¡ˆå¯¹æ¯”ã€‚ä¸å…¶ä»–æ–¹æ¡ˆè¿›è¡Œå¯¹æ¯”ï¼Œè¯´æ˜Reacté€‰ç”¨JSXçš„å¿…è¦æ€§ã€‚</p><h5 id="ä¸€ã€ä¸€å¥è¯è§£é‡Š"><a href="#ä¸€ã€ä¸€å¥è¯è§£é‡Š" class="headerlink" title="ä¸€ã€ä¸€å¥è¯è§£é‡Š"></a>ä¸€ã€ä¸€å¥è¯è§£é‡Š</h5><p>&emsp;æŒ‰ç…§Reactå®˜æ–¹è§£é‡Šï¼Œ<strong>JSXæ˜¯ä¸€ä¸ªJavaScriptçš„è¯­æ³•æ‰©å±•ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªç±»ä¼¼äºXMLçš„ECMAScriptè¯­æ³•æ‰©å±•</strong>ï¼Œå®ƒæœ¬èº«æ²¡æœ‰å¤ªå¤šçš„è¯­æ³•å®šä¹‰ï¼Œä¹Ÿä¸æœŸæœ›å¼•å…¥æ›´å¤šçš„æ ‡å‡†ã€‚</p><h5 id="äºŒã€æ ¸å¿ƒæ¦‚å¿µ"><a href="#äºŒã€æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="äºŒã€æ ¸å¿ƒæ¦‚å¿µ"></a>äºŒã€æ ¸å¿ƒæ¦‚å¿µ</h5><p>&emsp;å…¶å®Reactæœ¬èº«å¹¶ä¸å¼ºåˆ¶ä½¿ç”¨JSXï¼Œåœ¨æ²¡æœ‰JSXçš„æ—¶å€™ï¼ŒReactå®ç°ä¸€ä¸ªç»„ä»¶ä¾èµ–äºä½¿ç”¨React.createElementå‡½æ•°ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hello</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>&#123;    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">return</span> React.createElment(            <span class="hljs-string">&#x27;div&#x27;</span>,            <span class="hljs-literal">null</span>,            <span class="hljs-string">`Hello <span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.props.toWhat&#125;</span>`</span>        );    &#125;&#125;ReactDOM.render(    React.createElement(<span class="hljs-string">&#x27;Hello,&#123;toWhat:&#x27;</span>World<span class="hljs-string">&#x27;&#125;),</span><span class="hljs-string">    document.getElementById(&#x27;</span>root<span class="hljs-string">&#x27;)</span><span class="hljs-string">)</span></code></pre><p>è€ŒJSXæ›´åƒæ˜¯è¯­æ³•ç³–ï¼Œé€šè¿‡ç±»ä¼¼XMLçš„æè¿°æ–¹å¼ï¼Œæå†™å‡½æ•°å¯¹è±¡ã€‚é‡‡ç”¨JSXä¹‹åï¼Œä¸Šè¿°ä»£ç ä¼šå˜æˆå¦‚ä¸‹ï¼š</p><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hello</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>&#123;    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello,&#123;this.props.toWhat&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>    &#125;&#125;ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Hello</span> <span class="hljs-attr">toWhat</span>=<span class="hljs-string">&#x27;world&#x27;</span>/&gt;</span></span>,<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;root&#x27;</span>))</code></pre><p>é€šè¿‡è¿™æ ·å¯¹æ¯”ï¼Œæ˜¾ç„¶å¯ä»¥çœ‹å‡ºï¼Œ<strong>JSXä½¿å¾—ä»£ç å˜å¾—æ›´ä¸ºç®€æ´ï¼Œè€Œä¸”ä»£ç ç»“æ„å±‚æ¬¡æ›´ä¸ºæ¸…æ™°ã€‚</strong></p><p>å› ä¸ºReactéœ€è¦å°†ç»„ä»¶è½¬åŒ–ä¸ºè™šæ‹ŸDOMæ ‘ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰‹å†™ä»£ç æ—¶ï¼Œå…¶å®æ˜¯åœ¨æ‰‹å†™ä¸€é¢—ç»“æ„æ ‘ã€‚è€ŒXMLåœ¨æ ‘ç»“æ„çš„æè¿°ä¸Šå¤©ç„¶å…·æœ‰å¯è¯»æ€§å¼ºä¼˜åŠ¿ã€‚<br>ğŸ–ï¼šå®é™…åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä¼šä½¿ç”¨Babelæ’ä»¶å°†JSXè¯­æ³•çš„ä»£ç è¿˜åŸä¸ºReact.createElementçš„ä»£ç ã€‚</p><h5 id="ä¸‰ã€æ–¹æ¡ˆå¯¹æ¯”"><a href="#ä¸‰ã€æ–¹æ¡ˆå¯¹æ¯”" class="headerlink" title="ä¸‰ã€æ–¹æ¡ˆå¯¹æ¯”"></a>ä¸‰ã€æ–¹æ¡ˆå¯¹æ¯”</h5><p><strong>1.Reactè®¾è®¡åˆè¡·</strong></p><p>Reactçš„è®¾è®¡åˆè¡·æ˜¯ï¼šå…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSeparation of concerns)ã€‚åœ¨Reactç§ï¼Œå…³æ³¨ç‚¹çš„åŸºæœ¬å•ä½æ˜¯ç»„ä»¶ã€‚Reactå•ä¸ªç»„ä»¶æ—¶é«˜å†…èšçš„ï¼Œè€Œç»„ä»¶ä¸ç»„ä»¶ä¹‹é—´æ—¶ä½è€¦åˆçš„ã€‚</p><blockquote><p>å…³æ³¨ç‚¹åˆ†ç¦»ï¼šæ˜¯è®¡ç®—æœºç§‘å­¦é‡Œé¢çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚ä¸»è¦æ€æƒ³æ˜¯å°†ä»£ç åˆ†éš”ä¸ºä¸åŒéƒ¨åˆ†ï¼Œæ¯ä¸€éƒ¨åˆ†éƒ½æœ‰å„è‡ªçš„å…³æ³¨ç‚¹ã€‚ä¼˜ç‚¹ï¼š å½“å…³æ³¨ç‚¹åˆ†å¼€æ—¶ï¼Œå„éƒ¨åˆ†å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œç‹¬ç«‹å¼€å‘å’Œæ›´æ–°ã€‚å…·æœ‰ç‰¹æ®Šä»·å€¼çš„éƒ¨åˆ†èƒ½å¤Ÿç¨åæ”¹è¿›æˆ–ä¿®æ”¹ä¸€æ®µä»£ç ï¼Œè€Œæ— é¡»çŸ¥é“å…¶ä»–éƒ¨åˆ†çš„ç»†èŠ‚åšå‡ºçš„ç›¸åº”æ›´æ”¹ã€‚</p></blockquote><p><strong>2.Reactä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ¨¡æ¿å‘¢ï¼Ÿ</strong></p><p>Reactå›¢é˜Ÿè®¤ä¸ºå¼•å…¥æ¨¡æ¿æ˜¯ä¸€ç§ä¸ä½³çš„å®ç°ã€‚å› ä¸ºæ¨¡æ¿åˆ†ç¦»äº†æŠ€æœ¯æ ˆï¼Œè€Œéå…³æ³¨ç‚¹çš„æ¨¡æ¿åŒæ—¶åˆå¼•å…¥äº†å¾ˆå¤šçš„æ¦‚å¿µï¼Œæ¯”å¦‚æ–°çš„æ¨¡æ¿è¯­æ³•ã€æ¨¡æ¿æŒ‡ä»¤ç­‰ã€‚ä»¥AngularJSä¸ºä¾‹ï¼Œå¯ä»¥çœ‹ä¸‹æœ‰å¤šå°‘æ–°æ¦‚å¿µï¼š</p><pre><code class="hljs js">&lt;!doctype html&gt;&lt;html ng-app=<span class="hljs-string">&quot;docsBindExample&quot;</span>&gt;  &lt;head&gt;    &lt;script src=<span class="hljs-string">&quot;http://code.angularjs.org/1.2.25/angular.min.js&quot;</span>&gt;&lt;/script&gt;    &lt;script src=<span class="hljs-string">&quot;script.js&quot;</span>&gt;&lt;/script&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;div ng-controller=<span class="hljs-string">&quot;Ctrl1&quot;</span>&gt;      Hello &lt;input ng-model=<span class="hljs-string">&#x27;name&#x27;</span>&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hr</span>/&gt;</span></span>      &lt;span ng-bind=<span class="hljs-string">&quot;name&quot;</span>&gt;&lt;<span class="hljs-regexp">/span&gt; &lt;br/</span>&gt;      &lt;span ng:bind=<span class="hljs-string">&quot;name&quot;</span>&gt;&lt;<span class="hljs-regexp">/span&gt; &lt;br/</span>&gt;      &lt;span ng_bind=<span class="hljs-string">&quot;name&quot;</span>&gt;&lt;<span class="hljs-regexp">/span&gt; &lt;br/</span>&gt;      &lt;span data-ng-bind=<span class="hljs-string">&quot;name&quot;</span>&gt;&lt;<span class="hljs-regexp">/span&gt; &lt;br/</span>&gt;      &lt;span x-ng-bind=<span class="hljs-string">&quot;name&quot;</span>&gt;&lt;<span class="hljs-regexp">/span&gt; &lt;br/</span>&gt;    &lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;angular.module(<span class="hljs-string">&#x27;docsBindExample&#x27;</span>, [])  .controller(<span class="hljs-string">&#x27;Ctrl1&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Ctrl1</span>(<span class="hljs-params">$scope</span>) </span>&#123;    $scope.name = <span class="hljs-string">&#x27;Max Karl Ernst Ludwig Planck (April 23, 1858 â€“ October 4, 1947)&#x27;</span>;  &#125;);</code></pre><p>çœ‹å®Œä¼šå‘ç°è¿™æ®µä»£ç å¾ˆéš¾æ‡‚ï¼Œå› ä¸ºå®ƒå¼•å…¥äº†éå¸¸å¤šçš„AngularJSç‹¬æœ‰çš„æ¦‚å¿µï¼Œä½†æ˜¯JSXå´ä¸ä¼šæœ‰å¾ˆå¤šæ–°æ¦‚å¿µï¼Œå®ƒä¾ç„¶æ˜¯JavaScriptï¼Œå°±è¿æ¡ä»¶è¡¨è¾¾å¼å’Œå¾ªç¯éƒ½ä»ç„¶æ˜¯JavaScriptçš„æ–¹å¼ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> App=<span class="hljs-function">(<span class="hljs-params">props</span>)=&gt;</span>&#123;    <span class="hljs-keyword">return</span>(        &lt;div&gt;            &#123;props.isShow?<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>show<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>:<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>hidden<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>&#125;            &#123;props.names.map(<span class="hljs-function"><span class="hljs-params">name</span>=&gt;</span><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span>)&#125;        &lt;/div&gt;    )&#125;</code></pre><p>è¿™æ ·æ¯”è¾ƒä¸‹æ¥ï¼Œå¯ä»¥çœ‹å‡ºReactä»£ç æ›´ç®€æ´ï¼Œæ›´å…·æœ‰å¯è¯»æ€§ï¼Œæ›´è´´è¿‘HTMLã€‚</p><p>é‚£æ¨¡æ¿å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥å¥—ç”¨HTMLï¼Œä¸ºä»€ä¹ˆä¸ç”¨æ¨¡æ¿å­—ç¬¦ä¸²å‘¢ï¼Ÿ</p><p><strong>3.Reactä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²å‘¢ï¼Ÿ</strong></p><p>æ¥çœ‹ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²çš„ä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">var</span> box = jsx<span class="hljs-string">`</span><span class="hljs-string"></span><span class="hljs-string">  &lt;<span class="hljs-subst">$&#123;Box&#125;</span>&gt;</span><span class="hljs-string"></span><span class="hljs-string">    <span class="hljs-subst">$&#123;</span></span><span class="hljs-string"><span class="hljs-subst"></span></span><span class="hljs-string"><span class="hljs-subst">      shouldShowAnswer(user) ?</span></span><span class="hljs-string"><span class="hljs-subst"></span></span><span class="hljs-string"><span class="hljs-subst">      jsx<span class="hljs-string">`&lt;<span class="hljs-subst">$&#123;Answer&#125;</span> value=<span class="hljs-subst">$&#123;<span class="hljs-literal">false</span>&#125;</span>&gt;no&lt;/<span class="hljs-subst">$&#123;Answer&#125;</span>&gt;`</span> :</span></span><span class="hljs-string"><span class="hljs-subst"></span></span><span class="hljs-string"><span class="hljs-subst">      jsx<span class="hljs-string">`</span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string"></span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">        &lt;<span class="hljs-subst">$&#123;Box.Comment&#125;</span>&gt;</span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string"></span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">         Text Content</span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string"></span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">        &lt;/<span class="hljs-subst">$&#123;Box.Comment&#125;</span>&gt;</span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string"></span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">      `</span></span></span><span class="hljs-string"><span class="hljs-subst"></span></span><span class="hljs-string"><span class="hljs-subst">    &#125;</span></span><span class="hljs-string"></span><span class="hljs-string">  &lt;/<span class="hljs-subst">$&#123;Box&#125;</span>&gt;</span><span class="hljs-string"></span><span class="hljs-string">`</span>;</code></pre><p>æ˜¾ç„¶ä»£ç ç»“æ„è¿˜æ˜¯éå¸¸å¤æ‚ï¼ˆå­˜åœ¨å¤šæ¬¡å†…éƒ¨åµŒå¥—ï¼‰ï¼Œä¹Ÿä¸åˆ©äºå¼€å‘å·¥å…·çš„ä»£ç æç¤ºã€‚</p><p><strong>4.Reactä¸ºä»€ä¹ˆä¸ä½¿ç”¨JXONå‘¢ï¼Ÿ</strong></p><p>JXONå¾ˆåƒç›®å‰ä½¿ç”¨çš„JSXï¼Œå®ƒçš„ç»“æ„å¦‚ä¸‹ï¼š</p><pre><code class="hljs js">&lt;catalog&gt;  &lt;product description=<span class="hljs-string">&quot;Cardigan Sweater&quot;</span>&gt;   &lt;catalog_item gender=<span class="hljs-string">&quot;Men&#x27;s&quot;</span>&gt;     &lt;item_number&gt;QWZ5671&lt;/item_number&gt;     &lt;price&gt;<span class="hljs-number">39.95</span>&lt;/price&gt;     &lt;size description=<span class="hljs-string">&quot;Medium&quot;</span>&gt;       &lt;color_swatch image=<span class="hljs-string">&quot;red_cardigan.jpg&quot;</span>&gt;Red&lt;/color_swatch&gt;       &lt;color_swatch image=<span class="hljs-string">&quot;burgundy_cardigan.jpg&quot;</span>&gt;Burgundy&lt;/color_swatch&gt;     &lt;/size&gt;     &lt;size description=<span class="hljs-string">&quot;Large&quot;</span>&gt;       &lt;color_swatch image=<span class="hljs-string">&quot;red_cardigan.jpg&quot;</span>&gt;Red&lt;/color_swatch&gt;       &lt;color_swatch image=<span class="hljs-string">&quot;burgundy_cardigan.jpg&quot;</span>&gt;Burgundy&lt;/color_swatch&gt;     &lt;/size&gt;   &lt;/catalog_item&gt;   &lt;catalog_item gender=<span class="hljs-string">&quot;Women&#x27;s&quot;</span>&gt;     &lt;item_number&gt;RRX9856&lt;/item_number&gt;     &lt;discount_until&gt;Dec <span class="hljs-number">25</span>, <span class="hljs-number">1995</span>&lt;/discount_until&gt;     &lt;price&gt;<span class="hljs-number">42.50</span>&lt;/price&gt;     &lt;size description=<span class="hljs-string">&quot;Medium&quot;</span>&gt;       &lt;color_swatch image=<span class="hljs-string">&quot;black_cardigan.jpg&quot;</span>&gt;Black&lt;/color_swatch&gt;     &lt;/size&gt;   &lt;/catalog_item&gt;  &lt;/product&gt;  &lt;script type=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;&lt;![CDATA[<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">matchwo</span>(<span class="hljs-params">a,b</span>) </span>&#123;    <span class="hljs-keyword">if</span> (a &lt; b &amp;&amp; a &lt; <span class="hljs-number">0</span>) &#123; <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; &#125;    <span class="hljs-keyword">else</span> &#123; <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; &#125;&#125;]]&gt;&lt;/script&gt;&lt;/catalog&gt;</code></pre><p>æœ€åæ”¾å¼ƒJXONè¿™ä¸€æ–¹æ¡ˆçš„åŸå› æ˜¯ï¼Œå¤§æ‹¬å·ä¸èƒ½ä½œä¸ºå…ƒç´ åœ¨æ ‘ç§å¼€å§‹å’Œç»“æŸçš„ä½ç½®ï¼Œæ— æ³•æä¾›å¾ˆå¥½çš„è¯­æ³•æç¤ºã€‚</p><p>æœ€åæ€»ç»“ä¸‹ï¼ŒReactä¸ºä»€ä¹ˆä½¿ç”¨JSX?</p><p><img src="https://pic.downk.cc/item/5fc752d5394ac523789ece3c.jpg" alt="reactä½¿ç”¨JSXåŸå› "></p><p>==ç­”é¢˜==ï¼š </p><blockquote><p>é¦–å…ˆï¼ŒJSX æ˜¯ä¸€ä¸ª JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œç»“æ„ç±»ä¼¼ XMLã€‚<br>ï¼ˆJSX ä¸»è¦ç”¨äºå£°æ˜ React å…ƒç´ ï¼Œä½† React ä¸­å¹¶ä¸å¼ºåˆ¶ä½¿ç”¨ JSXã€‚å³ä½¿ä½¿ç”¨äº† JSXï¼Œä¹Ÿä¼šåœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ Babel æ’ä»¶ç¼–è¯‘ä¸º React.createElementã€‚æ‰€ä»¥ JSX æ›´åƒæ˜¯ React.createElement çš„ä¸€ç§è¯­æ³•ç³–ã€‚<br>Reactå›¢é˜Ÿå¹¶ä¸æƒ³å¼•å…¥JavaScriptæœ¬èº«ä»¥å¤–çš„å¼€å‘ä½“ç³»ï¼Œè€Œæ˜¯å¸Œæœ›é€šè¿‡åˆç†çš„å…³æ³¨ç‚¹åˆ†ç¦»ä¿æŒç»„ä»¶å¼€å‘çš„çº¯ç²¹æ€§ã€‚ï¼‰</p></blockquote><blockquote><p>ç„¶åï¼Œæ˜¯JSXä¸å…¶ä»–ä¸‰ç§æŠ€æœ¯æ–¹æ¡ˆçš„å¯¹æ¯”ï¼š<br>1.æ¨¡æ¿ã€‚ React å›¢é˜Ÿè®¤ä¸ºæ¨¡æ¿ä¸åº”è¯¥æ˜¯å¼€å‘è¿‡ç¨‹ä¸­çš„å…³æ³¨ç‚¹ï¼Œå› ä¸ºå¼•å…¥äº†æ¨¡æ¿è¯­æ³•ã€æ¨¡æ¿æŒ‡ä»¤ç­‰æ¦‚å¿µï¼Œæ˜¯ä¸€ç§ä¸ä½³çš„å®ç°æ–¹æ¡ˆã€‚<br>2.æ¨¡æ¿å­—ç¬¦ä¸²ã€‚ æ¨¡æ¿å­—ç¬¦ä¸²ç¼–å†™çš„ç»“æ„ä¼šé€ æˆå¤šæ¬¡å†…éƒ¨åµŒå¥—ï¼Œä½¿æ•´ä¸ªç»“æ„å˜å¾—å¤æ‚ï¼Œå¹¶ä¸”ä¼˜åŒ–ä»£ç æç¤ºä¹Ÿä¼šå˜å¾—å›°éš¾é‡é‡ã€‚<br>3.JXONã€‚ åŒæ ·å› ä¸ºä»£ç æç¤ºå›°éš¾çš„åŸå› è€Œè¢«æ”¾å¼ƒ</p></blockquote><p>âœ¨æ‰€ä»¥ï¼ŒReacté€‰æ‹©äº†JSXï¼Œå› ä¸ºJSXä¸å…¶è®¾è®¡æ€æƒ³æœ€ä¸ºå»åˆï¼Œä¸éœ€è¦å¼•å…¥è¿‡å¤šçš„æ–°æ¦‚å¿µï¼Œå¯¹ç¼–è¾‘å™¨ä»£ç æç¤ºä¹Ÿå¾ˆå‹å¥½ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•å®å…¸ä¹‹Reactç¯‡</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>React03-React.cloneElementå‡½æ•°</title>
    <link href="/2020/12/01/React03-React-cloneElement%E5%87%BD%E6%95%B0/"/>
    <url>/2020/12/01/React03-React-cloneElement%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h4 id="React-cloneElement-element-props-â€¦children"><a href="#React-cloneElement-element-props-â€¦children" class="headerlink" title="React.cloneElement(element,[props],[â€¦children])"></a>React.cloneElement(element,[props],[â€¦children])</h4><p>&emsp;è¿™ä¸ªAPIä»¥elementå…ƒç´ ä¸ºæ ·æ¿å…‹éš†å¹¶è¿”å›æ–°çš„Reactå…ƒç´ ã€‚</p><ul><li>è¿”å›å…ƒç´ çš„propsæ˜¯å°†æ–°çš„propsä¸åŸå§‹å…ƒç´ çš„propsæµ…å±‚åˆå¹¶åçš„ç»“æœã€‚</li><li>æ–°çš„å­å…ƒç´ å°†å–ä»£ç°æœ‰çš„å­å…ƒç´ ï¼Œè€Œæ¥è‡ªåŸå§‹å…ƒç´ çš„keyå’Œrefå°†è¢«ä¿ç•™ã€‚</li></ul><p>React.cloneElement() åŸºæœ¬ç­‰åŒäºï¼š</p><pre><code class="hljs js">&lt;element.type &#123;...element.props&#125;&#123;...props&#125;&gt;&#123;children&#125;&lt;/element.type&gt;</code></pre><p>å‚è€ƒï¼š<a href="https://zh-hans.reactjs.org/docs/react-api.html#cloneelement">React.cloneElementå®˜æ–¹æ–‡æ¡£</a></p>]]></content>
    
    
    <categories>
      
      <category>Reactå­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>é¢è¯•01-ä½ çœŸçš„äº†è§£Reactå—ï¼Ÿ</title>
    <link href="/2020/11/30/%E9%9D%A2%E8%AF%9501-%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3React%E5%90%97%EF%BC%9F/"/>
    <url>/2020/11/30/%E9%9D%A2%E8%AF%9501-%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3React%E5%90%97%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<h4 id="é¢è¯•åœºæ™¯1ï¼šè°ˆè°ˆä½ å¯¹Reactçš„ç†è§£ï¼Ÿï¼ˆæ¦‚å¿µé¢˜ï¼‰"><a href="#é¢è¯•åœºæ™¯1ï¼šè°ˆè°ˆä½ å¯¹Reactçš„ç†è§£ï¼Ÿï¼ˆæ¦‚å¿µé¢˜ï¼‰" class="headerlink" title="é¢è¯•åœºæ™¯1ï¼šè°ˆè°ˆä½ å¯¹Reactçš„ç†è§£ï¼Ÿï¼ˆæ¦‚å¿µé¢˜ï¼‰"></a>é¢è¯•åœºæ™¯1ï¼šè°ˆè°ˆä½ å¯¹Reactçš„ç†è§£ï¼Ÿï¼ˆæ¦‚å¿µé¢˜ï¼‰</h4><p>é’ˆå¯¹è¿™ç§æ¦‚å¿µé¢˜ï¼Œä¸€èˆ¬é‡‡ç”¨å››å­—å£è¯€ï¼šâ€œè®²è¯´ç†åˆ—â€</p><ul><li>è®²æ¦‚å¿µ: ä¸€å¥è¯è®²æ¸…æ¥šè¯¥æŠ€æœ¯æ˜¯ä»€ä¹ˆã€‚  </li><li>è¯´ç”¨é€”ï¼šæè¿°è¯¥æŠ€æœ¯çš„ç”¨é€”ï¼ˆç»“åˆå…·ä½“åœºæ™¯ï¼Œæ‹“å±•æ€§çš„æè¿°)</li><li>ç†æ€è·¯ï¼šæ¢³ç†è¯¥æŠ€æœ¯çš„æ ¸å¿ƒæ€è·¯æˆ–è¿ä½œæµç¨‹ã€‚</li><li>åˆ—ä¼˜ç¼ºï¼šå¯¹è¯¥æŠ€æœ¯çš„ä¼˜ç‚¹ç¼ºç‚¹è¿›è¡Œåˆ—ä¸¾ï¼ˆä¸å…¶ä»–æŠ€æœ¯æ–¹æ¡ˆè¿›è¡Œæ¨ªå‘å¯¹æ¯”ï¼Œä½†åˆ‡å¿Œè¸©ä¸€æ§ä¸€ï¼ï¼‰</li></ul><h5 id="1ã€è®²Reactæ¦‚å¿µ"><a href="#1ã€è®²Reactæ¦‚å¿µ" class="headerlink" title="1ã€è®²Reactæ¦‚å¿µ"></a>1ã€è®²Reactæ¦‚å¿µ</h5><p><strong>Reactæ˜¯é€šè¿‡ç»„ä»¶åŒ–çš„æ–¹å¼è§£å†³è§†å›¾å±‚å¼€å‘å¤ç”¨çš„é—®é¢˜ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªç»„ä»¶åŒ–æ¡†æ¶ã€‚</strong></p><p>ç®€å•æ¦‚æ‹¬ä¸ºï¼š View = fn(props)ï¼Œ ç»™å®šç›¸åŒçš„è¾“å…¥çŠ¶æ€ï¼Œå‡½æ•°æ€»ä¼šç”Ÿæˆä¸€è‡´çš„ç»„ä»¶ã€‚å¦‚æœå˜é‡å¤šä¸€äº›ï¼Œä¹Ÿå¯ä»¥æ‰©å±•ä¸º View = fn(props,state,context)</p><h5 id="2ã€è¯´Reactç”¨é€”"><a href="#2ã€è¯´Reactç”¨é€”" class="headerlink" title="2ã€è¯´Reactç”¨é€”"></a>2ã€è¯´Reactç”¨é€”</h5><p><strong>Reactçš„ç”¨é€”å°±æ˜¯ï¼šæ„å»ºè§†å›¾ã€‚</strong> Reactçš„ç”Ÿæ€ä¸°å¯Œäº†å®ƒçš„ä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>é¦–å…ˆï¼ŒPCç½‘é¡µå’Œç§»åŠ¨ç«¯ç½‘é¡µï¼ŒReactéƒ½æ”¯æŒ</li><li>å…¶æ¬¡ï¼ŒReact Native å¯ç”¨äºå¼€å‘iosä¸Androidåº”ç”¨</li><li>React 360å¯ä»¥å¼€å‘VRåº”ç”¨</li><li>å†·é—¨çš„ink,å¯ä»¥ä½¿ç”¨Reactå¼€å‘å‘½ä»¤è¡Œåº”ç”¨ã€‚</li></ul><h5 id="3ã€ç†Reactæ€è·¯"><a href="#3ã€ç†Reactæ€è·¯" class="headerlink" title="3ã€ç†Reactæ€è·¯"></a>3ã€ç†Reactæ€è·¯</h5><p><strong>Reactçš„æ ¸å¿ƒæ€è·¯ï¼šå£°æ˜å¼ã€ç»„ä»¶åŒ–ã€é€šç”¨æ€§</strong>ï¼ˆå®˜æ–¹ç§°ï¼Œä¸€æ¬¡å­¦ä¹ ï¼Œéšå¤„ç¼–å†™ï¼‰</p><ul><li><strong>å£°æ˜å¼</strong>ï¼šä¼˜åŠ¿åœ¨äºç›´è§‚ï¼Œå¯ä»¥åšåˆ°ä¸€ç›®äº†ç„¶ï¼Œä¹Ÿä¾¿äºç»„åˆã€‚</li></ul><p>å‘½ä»¤å¼ç¼–ç¨‹ï¼š</p><pre><code class="hljs js"><span class="hljs-comment">//HTML</span>&lt;div <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&#x27;block&#x27;</span>&gt;&lt;/div&gt;<span class="hljs-comment">//JS</span><span class="hljs-keyword">const</span> block=$(<span class="hljs-string">&#x27;.block&#x27;</span>)block.css(<span class="hljs-string">&#x27;color&#x27;</span>,<span class="hljs-string">&#x27;red&#x27;</span>)</code></pre><p>å£°æ˜å¼ç¼–ç¨‹ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> Block=<span class="hljs-function">(<span class="hljs-params">props</span>)=&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;color:</span>&#x27;<span class="hljs-attr">red</span>&#x27;&#125;&#125;&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></code></pre><p>å¯ä»¥å‘ç°ï¼Œå£°æ˜å¼ç¼–ç¨‹æ›´å®¹æ˜“é˜…è¯»ï¼Œè€Œä¸”æ›´å®¹æ˜“ä¸å…¶ä»–ç»„ä»¶ä»£ç ç»„åˆã€‚</p><ul><li><p><strong>ç»„ä»¶åŒ–</strong>ï¼šç»„ä»¶åŒ–ä¼˜åŠ¿åœ¨äºå¯ä»¥é™ä½ç³»ç»Ÿé—´åŠŸèƒ½çš„è€¦åˆæ€§ï¼Œæé«˜åŠŸèƒ½å†…éƒ¨çš„èšåˆæ€§ã€‚è¿™æ ·ä¾¿äºä»£ç å¤ç”¨ã€‚</p></li><li><p><strong>é€šç”¨æ€§</strong>ï¼šReactå°†DOMæŠ½è±¡ä¸ºè™šæ‹ŸDOMï¼Œå¼€å‘è€…å¹¶ä¸æ˜¯ç›´æ¥æ“ä½œDOMã€‚æ­£å› ä¸ºè¿™ä¸€å±‚å°è£…çš„å­˜åœ¨ï¼Œä½¿å¾—Reactä¸å†å±€é™äºwebå¼€å‘ï¼Œè€Œæ˜¯å‡ºç°æ›´ç¹è£çš„ç”Ÿæ€ã€‚ä¸è®ºVRï¼ŒNative,è¿˜æ˜¯shellå‘½ä»¤ï¼Œåªæœ‰å…¼å®¹è™šæ‹ŸDOMå±‚ï¼Œéƒ½å¯ä»¥ç›´æ¥è¿è¡ŒReactã€‚</p></li></ul><h5 id="4ã€åˆ—Reactä¼˜ç¼º"><a href="#4ã€åˆ—Reactä¼˜ç¼º" class="headerlink" title="4ã€åˆ—Reactä¼˜ç¼º"></a>4ã€åˆ—Reactä¼˜ç¼º</h5><ul><li><p>ä¼˜ç‚¹ï¼šå…¶å®å°±æ˜¯Reactçš„æ ¸å¿ƒè®¾è®¡æ€è·¯ï¼šå£°æ˜å¼ï¼Œç»„ä»¶åŒ–ï¼Œé€šç”¨æ€§ã€‚</p></li><li><p>ç¼ºç‚¹ï¼šReactä¸æ˜¯ä¸€ä¸ªä¸€æ½å­æ¡†æ¶ï¼Œæ¯”å¦‚è·¯ç”±ä¸€ç±»çš„åŠŸèƒ½ï¼ŒReactå›¢é˜Ÿå¸Œæœ›äº¤ç»™ç¤¾åŒºè§£å†³ã€‚å¯¼è‡´æŠ€æœ¯é€‰å‹å’Œå­¦ä¹ ä½¿ç”¨ä¸Šæœ‰è¾ƒé«˜çš„æˆæœ¬ï¼Œåœ¨å¼€å‘å¤§å‹å‰ç«¯åº”ç”¨æ—¶éœ€è¦å‘ç¤¾åŒºå¯»æ‰¾å¹¶æ•´åˆè§£å†³æ–¹æ¡ˆã€‚ï¼ˆéå®˜æ–¹çš„ä¸€æ½å­è§£å†³æ–¹æ¡ˆæ˜¯æœ‰çš„ï¼Œæ¯”å¦‚DvaJSã€React-coatç­‰ï¼‰</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•å®å…¸ä¹‹Reactç¯‡</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>React02-setStateçš„ä½¿ç”¨</title>
    <link href="/2020/11/27/React02-setState%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2020/11/27/React02-setState%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h3 id="setState-updater-callback"><a href="#setState-updater-callback" class="headerlink" title="setState(updater, [callback])"></a>setState(updater, [callback])</h3><h4 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h4><p>1ã€setState()å°†å¯¹ç»„ä»¶stateçš„æ›´æ–°æ’å…¥é˜Ÿåˆ—ï¼Œå¹¶é€šçŸ¥Reactéœ€è¦ä½¿ç”¨æ›´æ–°åçš„stateé‡æ–°æ¸²æŸ“æ­¤ç»„ä»¶åŠå…¶å­ç»„ä»¶ã€‚è¿™æ˜¯ç”¨äºæ›´æ–°ç”¨æˆ·ç•Œé¢ä»¥å“åº”äº‹ä»¶å¤„ç†å™¨å’Œå¤„ç†æœåŠ¡å™¨æ•°æ®çš„ä¸»è¦æ–¹å¼ã€‚</p><p>2ã€<strong>å°†setState()è§†ä¸ºè¯·æ±‚è€Œä¸æ˜¯ç«‹å³æ›´æ–°ç»„ä»¶çš„å‘½ä»¤</strong>ã€‚ä¸ºäº†æ›´å¥½çš„æ„ŸçŸ¥æ€§èƒ½ï¼ŒReactä¼šå»¶è¿Ÿè°ƒç”¨å®ƒï¼Œç„¶åé€šè¿‡ä¸€æ¬¡ä¼ é€’æ›´æ–°å¤šä¸ªç»„ä»¶ã€‚Reactå¹¶ä¸ä¼šä¿è¯stateçš„å˜æ›´ä¼šç«‹å³ç”Ÿæ•ˆã€‚</p><p>3ã€<strong>setState()å¹¶ä¸æ€»æ˜¯ç«‹å³æ›´æ–°ç»„ä»¶ï¼Œå®ƒä¼šæ‰¹é‡æ¨è¿Ÿæ›´æ–°</strong>ã€‚è¿™ä½¿å¾—åœ¨è°ƒç”¨setState()åç«‹å³è¯»å–this.stateæˆä¸ºäº†éšæ‚£ã€‚ä¸ºäº†æ¶ˆé™¤éšæ‚£ï¼Œåº”å½“ä½¿ç”¨componentDidUpdateæˆ–è€…setStateçš„å›è°ƒå‡½æ•°ï¼Œè¿™ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ä¿è¯åœ¨åº”ç”¨æ›´æ–°åè§¦å‘ã€‚å¦‚æœéœ€è¦åŸºäºä¹‹å‰çš„stateæ¥è®¾ç½®å½“å‰çš„stateï¼ŒæŸ¥çœ‹å…³äºupdateréƒ¨åˆ†çš„æè¿°ã€‚</p><p>4ã€é™¤éshouldComponentUpate()è¿”å›false,å¦åˆ™setState()å°†å§‹ç»ˆæ‰§è¡Œé‡æ–°æ¸²æŸ“æ“ä½œã€‚</p><h4 id="äºŒã€å‚æ•°1ï¼šupdaterå‡½æ•°"><a href="#äºŒã€å‚æ•°1ï¼šupdaterå‡½æ•°" class="headerlink" title="äºŒã€å‚æ•°1ï¼šupdaterå‡½æ•°"></a>äºŒã€å‚æ•°1ï¼šupdaterå‡½æ•°</h4><pre><code class="hljs js">(state,props) =&gt; stateChange</code></pre><p>å…¶ä¸­ï¼Œstateæ˜¯å¯¹åº”ç”¨å˜åŒ–æ—¶ç»„ä»¶çŠ¶æ€çš„å¼•ç”¨ï¼Œå®ƒä¸åº”è¯¥ç›´æ¥è¢«ä¿®æ”¹ã€‚åº”å½“ä½¿ç”¨åŸºäºstateå’Œpropsæ„å»ºçš„æ–°å¯¹è±¡æ¥è¡¨ç¤ºå˜åŒ–ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨props.stepæ¥å¢åŠ stateï¼š</p><pre><code class="hljs js"><span class="hljs-built_in">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">state, props</span>)=&gt;</span>&#123;    <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">counter</span>: state.counter + props.step&#125;&#125;)</code></pre><p>updaterå‡½æ•°ä¸­æ¥æ”¶çš„stateå’Œpropséƒ½ä¿è¯ä¸ºæœ€æ–°ã€‚updaterçš„è¿”å›å€¼ä¼šä¸stateè¿›è¡Œæµ…åˆå¹¶ã€‚</p><p>ğŸ–ï¼šsetState()çš„ç¬¬ä¸€ä¸ªå‚æ•°é™¤äº†æ¥å—å‡½æ•°å¤–ï¼Œè¿˜æ¥å—å¯¹è±¡ç±»å‹ï¼š</p><pre><code class="hljs js">setState(stateChange[,callback])</code></pre><p>stateChangeä¼šå°†ä¼ å…¥çš„å¯¹è±¡æµ…åˆå¹¶åˆ°æ–°çš„stateä¸­ï¼Œä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-built_in">this</span>.setState(&#123;<span class="hljs-attr">counter</span>: <span class="hljs-number">2</span>&#125;)</code></pre><p>è¿™ç§å½¢å¼çš„setState()ä¹Ÿæ˜¯å¼‚æ­¥çš„ï¼å¹¶ä¸”åœ¨åŒä¸€ä¸ªå‘¨æœŸå†…å¯¹å¤šä¸ªsetStateè¿›è¡Œæ‰¹å¤„ç†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªæ—¶æœŸå¤šæ¬¡è®¾ç½®å•†å“æ•°é‡å¢åŠ ,åˆ™ç›¸å½“äºï¼š</p><pre><code class="hljs js"><span class="hljs-built_in">Object</span>.assign(    previousState,    &#123;<span class="hljs-attr">quantiity</span>: state.quantity + <span class="hljs-number">1</span>&#125;,    &#123;<span class="hljs-attr">quantiity</span>: state.quantity + <span class="hljs-number">1</span>&#125;)</code></pre><p>æ­¤æ—¶ï¼Œåè°ƒç”¨çš„setState()å°†è¦†ç›–åŒä¸€å‘¨æœŸå†…å…ˆè°ƒç”¨setStateçš„å€¼ï¼Œå› æ­¤å•†å“æ•°ä»…å¢åŠ 1æ¬¡ã€‚å¦‚æœåç»­çŠ¶æ€å–å†³äºå½“å‰çš„çŠ¶æ€ï¼Œå»ºè®®ä½¿ç”¨updaterå‡½æ•°çš„å½¢å¼ä»£æ›¿ï¼š</p><pre><code class="hljs js"><span class="hljs-built_in">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">state</span>)=&gt;</span>&#123;    <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">quantity</span>: state.quantity + <span class="hljs-number">1</span>&#125;;&#125;)</code></pre><h4 id="ä¸‰ã€å‚æ•°2ï¼šå›è°ƒå‡½æ•°callback-ï¼ˆå¯é€‰ï¼‰"><a href="#ä¸‰ã€å‚æ•°2ï¼šå›è°ƒå‡½æ•°callback-ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="ä¸‰ã€å‚æ•°2ï¼šå›è°ƒå‡½æ•°callback ï¼ˆå¯é€‰ï¼‰"></a>ä¸‰ã€å‚æ•°2ï¼šå›è°ƒå‡½æ•°callback ï¼ˆå¯é€‰ï¼‰</h4><p>è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œ<strong>å°†åœ¨setStateå®Œæˆåˆå¹¶å¹¶é‡æ–°æ¸²æŸ“ç»„ä»¶åæ‰§è¡Œ</strong>ã€‚é€šå¸¸ï¼Œå»ºè®®ä½¿ç”¨componentDidUpdate()æ–¹å¼æ¥ä»£æ›¿è¿™ä¸ªå›è°ƒå‡½æ•°çš„ä½¿ç”¨ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Reactå­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>React01--refçš„ä½¿ç”¨</title>
    <link href="/2020/11/24/React01-ref%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2020/11/24/React01-ref%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="refçš„è¯¦ç»†ç”¨æ³•"><a href="#refçš„è¯¦ç»†ç”¨æ³•" class="headerlink" title="refçš„è¯¦ç»†ç”¨æ³•"></a>refçš„è¯¦ç»†ç”¨æ³•</h2><p>åœ¨reactå…¸å‹çš„æ•°æ®æµä¸­ï¼Œpropsä¼ é€’æ—¶çˆ¶å­ç»„ä»¶äº¤äº’çš„å”¯ä¸€æ–¹å¼ï¼šé€šè¿‡ä¼ é€’ä¸€ä¸ªæ–°çš„propså€¼æ¥ä½¿å­ç»„ä»¶é‡æ–°renderï¼Œä»è€Œè¾¾åˆ°çˆ¶å­ç»„ä»¶é€šä¿¡ã€‚ä½†æ˜¯ï¼ŒæŸäº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨å…¸å‹æ•°æ®æµä¹‹å¤–å¼ºåˆ¶ä¿®æ”¹å­ç»„ä»¶ã€‚æ¯”å¦‚ï¼š</p><ul><li>ç®¡ç†ç„¦ç‚¹ï¼Œæ–‡æœ¬é€‰æ‹©æˆ–è€…åª’ä½“æ’­æ”¾</li><li>è§¦å‘å¼ºåˆ¶åŠ¨ç”»</li><li>é›†æˆç¬¬ä¸‰æ–¹DOMåº“</li></ul><p>è¿™äº›æƒ…å†µä¸‹ï¼Œreactæä¾›äº†æ–°çš„æ–¹æ¡ˆï¼šref</p><h4 id="ä¸€ã€refç®€ä»‹"><a href="#ä¸€ã€refç®€ä»‹" class="headerlink" title="ä¸€ã€refç®€ä»‹"></a>ä¸€ã€refç®€ä»‹</h4><p>Reactæä¾›çš„refå±æ€§ï¼Œ<strong>è¡¨ç¤ºå¯¹ç»„ä»¶çœŸæ­£å®ä¾‹çš„å¼•ç”¨</strong>ï¼Œå…¶å®å°±æ˜¯ReactDOM.render()è¿”å›çš„ç»„ä»¶å®ä¾‹ï¼›éœ€è¦åŒºåˆ†ä¸€ä¸‹ï¼šReactDOM.render()æ¸²æŸ“ç»„ä»¶æ—¶è¿”å›çš„æ˜¯ç»„ä»¶å®ä¾‹ï¼›è€Œæ¸²æŸ“domå…ƒç´ æ—¶ï¼Œè¿”å›çš„æ˜¯å…·ä½“çš„domèŠ‚ç‚¹ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> domCom=<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>button<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;<span class="hljs-keyword">const</span> refDom=ReactDOM.render(domCom,container);<span class="hljs-keyword">const</span> refCom=ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">myComponent</span> /&gt;</span></span>,container);<span class="hljs-built_in">console</span>.log(refDom);<span class="hljs-built_in">console</span>.log(refCom);</code></pre><p>ä¸Šè¿°ä»£ç è¿è¡Œå¦‚ä¸‹ï¼š<br><img src="https://pic.downk.cc/item/5fbcde31b18d6271133f9065.jpg"></p><p>refå¯ä»¥æŒ‚åœ¨ä»»ä½•ç»„ä»¶ä¸Šï¼Œå¯ä»¥æŒ‚åœ¨ç»„ä»¶ä¸Šä¹Ÿå¯ä»¥æ˜¯domå…ƒç´ ä¸Šï¼š</p><ul><li>æŒ‚åœ¨ç»„ä»¶ä¸Šï¼ˆæŒ‡æœ‰çŠ¶æ€ç»„ä»¶ï¼‰çš„refè¡¨ç¤ºå¯¹ç»„ä»¶å®ä¾‹çš„å¼•ç”¨</li><li>æŒ‚è½½åˆ°domå…ƒç´ ä¸Šæ—¶è¡¨ç¤ºå…·ä½“çš„domèŠ‚ç‚¹</li></ul><h4 id="äºŒã€refå¯ä»¥è®¾ç½®å›è°ƒå‡½æ•°"><a href="#äºŒã€refå¯ä»¥è®¾ç½®å›è°ƒå‡½æ•°" class="headerlink" title="äºŒã€refå¯ä»¥è®¾ç½®å›è°ƒå‡½æ•°"></a>äºŒã€refå¯ä»¥è®¾ç½®å›è°ƒå‡½æ•°</h4><p>refå±æ€§å¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¹Ÿæ˜¯å®˜æ–¹æ¨èçš„åšæ³•ã€‚è¿™ä¸ªå‡½æ•°çš„æ‰§è¡Œæ—¶æœºä¸ºï¼š</p><ul><li>==ç»„ä»¶è¢«æŒ‚è½½å==ï¼Œå›è°ƒå‡½æ•°ç«‹å³æ‰§è¡Œï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°ä¸ºè¯¥ç»„ä»¶çš„å…·ä½“å®ä¾‹ã€‚</li><li>==ç»„ä»¶è¢«å¸è½½æˆ–è€…åŸæœ‰çš„refå±æ€§æœ¬èº«å‘ç”Ÿå˜åŒ–æ—¶==ï¼Œå›è°ƒä¹Ÿä¼šè¢«ç«‹å³æ‰§è¡Œï¼Œæ­¤æ—¶å›è°ƒå‡½æ•°å‚æ•°ä¸ºnull,ä»¥é¿å…å†…å­˜æ³„æ¼ã€‚</li></ul><p>ä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomTextInput</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>&#123;    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span>&#123;        <span class="hljs-built_in">super</span>(props);        <span class="hljs-built_in">this</span>.textInput=<span class="hljs-literal">null</span>;        <span class="hljs-built_in">this</span>.setTextInputRef=<span class="hljs-function"><span class="hljs-params">element</span>=&gt;</span>&#123;            <span class="hljs-built_in">this</span>.textInput=element;        &#125;        <span class="hljs-built_in">this</span>.focusTextInput=<span class="hljs-function">()=&gt;</span>&#123;        <span class="hljs-comment">//ä½¿ç”¨åŸç”ŸDOM APIä½¿å¾—textè¾“å…¥æ¡†è·å¾—ç„¦ç‚¹</span>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.textInput) <span class="hljs-built_in">this</span>.textInput.focus();        &#125;    &#125;    <span class="hljs-function"><span class="hljs-title">componentDidMount</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-comment">//ç»„ä»¶æŒ‚è½½åï¼Œè®©æ–‡æœ¬è‡ªåŠ¨è·å¾—ç„¦ç‚¹</span>        <span class="hljs-built_in">this</span>.focusTextInput();    &#125;    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;        &lt;div&gt;            &lt;input              type=<span class="hljs-string">&#x27;text&#x27;</span>              ref=&#123;<span class="hljs-built_in">this</span>.setTextInputRef&#125;            /&gt;            &lt;input             type=<span class="hljs-string">&quot;button&quot;</span>             value=<span class="hljs-string">&quot;Focus the text input&quot;</span>             onClick=&#123;<span class="hljs-built_in">this</span>.focusTextInput&#125;            /&gt;        &lt;/div&gt;    &#125;  &#125;</code></pre><p>ä¸Šè¿°ä»£ç ä¸­ï¼ŒReactå°†åœ¨ç»„ä»¶æŒ‚è½½æ—¶ï¼Œä¼šè°ƒç”¨refå›è°ƒå‡½æ•°å¹¶ä¼ å…¥DOMå…ƒç´ ï¼Œå½“å¸è½½æ—¶è°ƒç”¨å®ƒå¹¶ä¼ å…¥nullã€‚åœ¨componentDidMountæˆ–componentDidUpdateè§¦å‘å‰ï¼ŒReactä¼šä¿è¯refsä¸€å®šæ˜¯æœ€æ–°çš„ã€‚</p><h4 id="ä¸‰ã€refå¯ä»¥è®¾ç½®å­—ç¬¦ä¸²-äº†è§£"><a href="#ä¸‰ã€refå¯ä»¥è®¾ç½®å­—ç¬¦ä¸²-äº†è§£" class="headerlink" title="ä¸‰ã€refå¯ä»¥è®¾ç½®å­—ç¬¦ä¸² (äº†è§£)"></a>ä¸‰ã€refå¯ä»¥è®¾ç½®å­—ç¬¦ä¸² (äº†è§£)</h4><p>&emsp;refè¿˜å¯ä»¥è®¾ç½®ä¸ºå­—ç¬¦ä¸²å€¼ï¼Œä¸è¿‡è¿™ç§æ–¹å¼åŸºæœ¬ä¸å†æ¨èä½¿ç”¨ã€‚</p><pre><code class="hljs js">&lt;input ref=<span class="hljs-string">&#x27;input&#x27;</span>&gt;</code></pre><p>&emsp;ç„¶åå†å…¶ä»–åœ°æ–¹å¦‚äº‹ä»¶å›è°ƒä¸­é€šè¿‡this.refs.inputå¯ä»¥è®¿é—®è¯¥ç»„ä»¶å®ä¾‹ï¼Œå…¶å®å°±æ˜¯domèŠ‚ç‚¹</p><pre><code class="hljs js"><span class="hljs-keyword">let</span> element=<span class="hljs-built_in">this</span>.refs.input</code></pre><h4 id="å››ã€åˆ›å»ºä¸è®¿é—®Refs"><a href="#å››ã€åˆ›å»ºä¸è®¿é—®Refs" class="headerlink" title="å››ã€åˆ›å»ºä¸è®¿é—®Refs"></a>å››ã€åˆ›å»ºä¸è®¿é—®Refs</h4><p><strong>1.åˆ›å»ºrefs:</strong></p><p>&emsp;refsæ˜¯ä½¿ç”¨React.createRef()åˆ›å»ºçš„ï¼Œå¹¶é€šè¿‡refå±æ€§é™„åŠ åˆ°Reactå…ƒç´ ã€‚åœ¨æ„å»ºç»„ä»¶æ—¶ï¼Œé€šå¸¸å°†refsåˆ†é…ç»™ç»„ä»¶å®ä¾‹å±æ€§ï¼Œä»¥ä¾¿åœ¨æ•´ä¸ªç»„ä»¶ä¸­éƒ½å¼•ç”¨å®ƒä»¬ã€‚</p><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span> &#123;    <span class="hljs-built_in">super</span>(props);    <span class="hljs-built_in">this</span>.myRef = React.createRef();  &#125;  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.myRef&#125;</span> /&gt;</span></span>;  &#125;&#125;</code></pre><p><strong>2.è®¿é—®refs:</strong></p><p>&emsp;å½“refè¢«ä¼ é€’ç»™renderä¸­çš„å…ƒç´ æ—¶ï¼Œå¯¹è¯¥èŠ‚ç‚¹çš„å¼•ç”¨å¯ä»¥å“refçš„currentå±æ€§ä¸­è¢«è®¿é—®ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> node = <span class="hljs-built_in">this</span>.myRef.current;</code></pre><p>refçš„å€¼æ ¹æ®èŠ‚ç‚¹ç±»å‹ä¸åŒè€Œæœ‰æ‰€ä¸åŒï¼š</p><ul><li>å½“refå±æ€§ç”¨äºHTMLå…ƒç´ æ—¶ï¼Œæ„é€ å‡½æ•°ä¸­ä½¿ç”¨ React.createRef() åˆ›å»ºçš„ ref æ¥æ”¶åº•å±‚ DOM å…ƒç´ ä½œä¸ºå…¶ current å±æ€§ã€‚</li><li>å½“refå±æ€§ç”¨äºè‡ªå®šä¹‰classç»„ä»¶æ—¶ï¼Œrefå¯¹è±¡æ¥æ”¶ç»„ä»¶çš„æŒ‚è½½å®ä¾‹ä½œä¸ºå…¶currentå±æ€§ã€‚</li></ul><p>ğŸ–ï¼šä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨refå±æ€§ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰å®ä¾‹ï¼</p>]]></content>
    
    
    <categories>
      
      <category>Reactå­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>28-æ—¶åˆ»è€ƒè™‘æ€§èƒ½é—®é¢˜</title>
    <link href="/2020/11/21/28-%E6%97%B6%E5%88%BB%E8%80%83%E8%99%91%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98/"/>
    <url>/2020/11/21/28-%E6%97%B6%E5%88%BB%E8%80%83%E8%99%91%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸€ã€å¦‚ä½•é¿å…æ€§èƒ½é—®é¢˜ï¼š"><a href="#ä¸€ã€å¦‚ä½•é¿å…æ€§èƒ½é—®é¢˜ï¼š" class="headerlink" title="ä¸€ã€å¦‚ä½•é¿å…æ€§èƒ½é—®é¢˜ï¼š"></a>ä¸€ã€å¦‚ä½•é¿å…æ€§èƒ½é—®é¢˜ï¼š</h4><p>1ã€äº†è§£å¸¸è§çš„æ€§èƒ½é—®é¢˜åœºæ™¯ï¼ˆè§£å†³æœ€å¯èƒ½äº§ç”Ÿæ€§èƒ½é—®é¢˜çš„åœºæ™¯ï¼‰</p><ul><li>  é”®ç›˜è¾“å…¥è¿‡ç¨‹å¡é¡¿</li><li>  é¼ æ ‡çš„ç§»åŠ¨è¿‡ç¨‹å¡é¡¿</li></ul><p>2ã€æ—¶åˆ»æ³¨æ„ä»£ç çš„æ½œåœ¨æ€§èƒ½é—®é¢˜</p><ul><li>ä»€ä¹ˆæ—¶å€™æ‹†åˆ†ç»„ä»¶</li><li>ç»„ä»¶ç²’åº¦æ˜¯å¦å¤Ÿç»†</li></ul><p>3ã€æ³¨æ„å¯é‡æ„çš„ä»£ç </p><ul><li>ä»£ç çš„è€¦åˆæ€§å¿…é¡»ä½ï¼ŒåŠŸèƒ½æ¨¡å—éå¸¸ç‹¬ç«‹</li></ul><p>4ã€äº†è§£å¦‚ä½•ä½¿ç”¨å·¥å…·å®šä½æ€§èƒ½é—®é¢˜ï¼š</p><ul><li>React-devTool</li><li>Chrome-devTool</li></ul><h4 id="äºŒã€ç½‘ç»œæ€§èƒ½ä¼˜åŒ–ï¼šè‡ªåŠ¨åŒ–æŒ‰éœ€åŠ è½½"><a href="#äºŒã€ç½‘ç»œæ€§èƒ½ä¼˜åŒ–ï¼šè‡ªåŠ¨åŒ–æŒ‰éœ€åŠ è½½" class="headerlink" title="äºŒã€ç½‘ç»œæ€§èƒ½ä¼˜åŒ–ï¼šè‡ªåŠ¨åŒ–æŒ‰éœ€åŠ è½½"></a>äºŒã€ç½‘ç»œæ€§èƒ½ä¼˜åŒ–ï¼šè‡ªåŠ¨åŒ–æŒ‰éœ€åŠ è½½</h4><p>å¦‚ä½•åœ¨reactä¸­å®ç°æŒ‰éœ€åŠ è½½ï¼š<br>1ã€æŒ‰éœ€åŠ è½½ï¼šç”¨æˆ·å½“å‰éœ€è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±åªåŠ è½½è¿™ä¸ªåŠŸèƒ½å¯¹åº”çš„ä»£ç ã€‚<br>2ã€ä½¿ç”¨Webpackçš„import API<br>3ã€ä½¿ç”¨react-loadableåº“å®ç°Reactå¼‚æ­¥åŠ è½½</p><p><img src="https://pic.downk.cc/item/5fb913a4b18d627113603f84.jpg" alt="æŒ‰éœ€åŠ è½½"></p><h4 id="ä¸‰ã€ä½¿ç”¨Reselecté¿å…é‡å¤è®¡ç®—"><a href="#ä¸‰ã€ä½¿ç”¨Reselecté¿å…é‡å¤è®¡ç®—" class="headerlink" title="ä¸‰ã€ä½¿ç”¨Reselecté¿å…é‡å¤è®¡ç®—"></a>ä¸‰ã€ä½¿ç”¨Reselecté¿å…é‡å¤è®¡ç®—</h4><p>Reselect:åˆ›å»ºè‡ªåŠ¨ç¼“å­˜çš„æ•°æ®å¤„ç†æµç¨‹ï¼ˆåªæœ‰æ•°æ®å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—ï¼Œå¦åˆ™ä½¿ç”¨ç¼“å­˜çš„ç»“æœï¼‰</p><p><strong>åŸåˆ™</strong>:æ‰€æœ‰èƒ½å¤Ÿè®¡ç®—å¾—åˆ°çš„æ•°æ®ä¸€å®šæ˜¯é€šè¿‡è®¡ç®—æ‹¿åˆ°</p><p><img src="https://pic.downk.cc/item/5fb91595b18d62711360ba51.jpg" alt="è‡ªåŠ¨ç¼“å­˜"></p><h4 id="å››ã€Reactå¼‚æ­¥æ¸²æŸ“"><a href="#å››ã€Reactå¼‚æ­¥æ¸²æŸ“" class="headerlink" title="å››ã€Reactå¼‚æ­¥æ¸²æŸ“"></a>å››ã€Reactå¼‚æ­¥æ¸²æŸ“</h4><p><img src="https://pic.downk.cc/item/5fb918ffb18d62711361b0b2.jpg"></p><p><strong>æ—¶é—´åˆ†ç‰‡ï¼š</strong><br>1ã€è™šæ‹ŸDOMçš„diffæ“ä½œå¯ä»¥åˆ†ç‰‡è¿›è¡Œ<br>2ã€Reactæ–°APIï¼šunstable_deferredUpdates<br>3ã€Chromeæ–°APIï¼šrequestIdleCallback æµè§ˆå™¨ä»€ä¹ˆæ—¶å€™ç©ºé—²</p><p><strong>æ¸²æŸ“æŒ‚èµ·ï¼š</strong></p><p>1ã€unstable_deferUpdate<br>2ã€Reactçš„æ–°å†…ç½®ç»„ä»¶ï¼šTimeoutç»„ä»¶</p><h4 id="äº”ã€ä½¿ç”¨å·¥å…·å‘ç°æ€§èƒ½é—®é¢˜"><a href="#äº”ã€ä½¿ç”¨å·¥å…·å‘ç°æ€§èƒ½é—®é¢˜" class="headerlink" title="äº”ã€ä½¿ç”¨å·¥å…·å‘ç°æ€§èƒ½é—®é¢˜"></a>äº”ã€ä½¿ç”¨å·¥å…·å‘ç°æ€§èƒ½é—®é¢˜</h4><p>1ã€ä½¿ç”¨React DevToolæ‰¾åˆ°å¤šä½™æ¸²æŸ“<br>2ã€ä½¿ç”¨Chrome DevToolå®šä½æ€§èƒ½ç“¶é¢ˆ</p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>27-Reactä¸­æ‹–æ”¾çš„å®ç°</title>
    <link href="/2020/11/21/27-React%E4%B8%AD%E6%8B%96%E6%94%BE%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <url>/2020/11/21/27-React%E4%B8%AD%E6%8B%96%E6%94%BE%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<p><strong>ç¬¬ä¸‰æ–¹åº“å®ç°æ‹–æ”¾çš„ç¼ºé™·ï¼š</strong></p><ul><li>ç¬¬ä¸‰æ–¹åº“å®ç°æ‹–æ”¾ä¸å¤Ÿçµæ´»ï¼Œ</li><li>å¾ˆå¤šåœºæ™¯æ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹åº“</li><li>å¢åŠ é¢å¤–çš„ä½“ç§¯ä¼šå½±å“æ€§èƒ½ã€‚</li></ul><p><strong>å®ç°æ‹–æ”¾çš„æŠ€æœ¯è¦ç‚¹ï¼š</strong></p><p>1ã€å¦‚ä½•ä½¿ç”¨Reactçš„é¼ æ ‡äº‹ä»¶ç³»ç»Ÿ<br>2ã€å¦‚ä½•åˆ¤æ–­æ‹–æ”¾å¼€å§‹å’Œç»“æŸ<br>3ã€å¦‚ä½•è®©å®ç°æ‹–æ”¾å…ƒç´ çš„ä½ç½®ç§»åŠ¨<br>4ã€æ‹–æ”¾çŠ¶æ€åœ¨ç»„ä»¶ä¸­å¦‚ä½•ç»´æŠ¤</p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>26-Reacté›†æˆç¬¬ä¸‰æ–¹JSåº“ï¼ˆd3.jsä¸ºä¾‹ï¼‰</title>
    <link href="/2020/11/21/26-React%E9%9B%86%E6%88%90%E7%AC%AC%E4%B8%89%E6%96%B9JS%E5%BA%93%EF%BC%88d3-js%E4%B8%BA%E4%BE%8B%EF%BC%89/"/>
    <url>/2020/11/21/26-React%E9%9B%86%E6%88%90%E7%AC%AC%E4%B8%89%E6%96%B9JS%E5%BA%93%EF%BC%88d3-js%E4%B8%BA%E4%BE%8B%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h4 id="é›†æˆç¬¬ä¸‰æ–¹JSåº“çš„æŠ€æœ¯è¦ç‚¹ï¼š"><a href="#é›†æˆç¬¬ä¸‰æ–¹JSåº“çš„æŠ€æœ¯è¦ç‚¹ï¼š" class="headerlink" title="é›†æˆç¬¬ä¸‰æ–¹JSåº“çš„æŠ€æœ¯è¦ç‚¹ï¼š"></a>é›†æˆç¬¬ä¸‰æ–¹JSåº“çš„æŠ€æœ¯è¦ç‚¹ï¼š</h4><p>1ã€ä½¿ç”¨refè·å–åŸç”ŸDOMèŠ‚ç‚¹å¼•ç”¨<br>2ã€æ‰‹åŠ¨å°†ç»„ä»¶çŠ¶æ€æ›´æ–°åˆ°DOMèŠ‚ç‚¹<br>3ã€ç»„ä»¶é”€æ¯æ—¶ç§»é™¤åŸç”ŸèŠ‚ç‚¹DOMäº‹ä»¶</p><p>d3.jsç”¨æ¥ç”»å›¾å½¢çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ“ä½œåŸç”ŸDOMèŠ‚ç‚¹ï¼Œä¹Ÿæ˜¯ä»¥æ•°æ®é©±åŠ¨ï¼ˆä¸Reactéå¸¸å»åˆï¼‰ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>25-ä½¿ç”¨React-Routerå®ç°åˆ†å¸ƒæ“ä½œ</title>
    <link href="/2020/11/21/25-%E4%BD%BF%E7%94%A8React-Router%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E6%93%8D%E4%BD%9C/"/>
    <url>/2020/11/21/25-%E4%BD%BF%E7%94%A8React-Router%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<h4 id="å‘å¯¼é¡µé¢éœ€è¦è€ƒè™‘çš„æŠ€æœ¯è¦ç‚¹ï¼š"><a href="#å‘å¯¼é¡µé¢éœ€è¦è€ƒè™‘çš„æŠ€æœ¯è¦ç‚¹ï¼š" class="headerlink" title="å‘å¯¼é¡µé¢éœ€è¦è€ƒè™‘çš„æŠ€æœ¯è¦ç‚¹ï¼š"></a>å‘å¯¼é¡µé¢éœ€è¦è€ƒè™‘çš„æŠ€æœ¯è¦ç‚¹ï¼š</h4><p>ä¾‹å­ï¼šä¸€ä¸ªå‘å¯¼é¡µé¢<br><img src="https://pic.downk.cc/item/5fb8dbeab18d62711350c62f.jpg"></p><p>1ã€ä½¿ç”¨URLè¿›è¡Œå¯¼èˆª<br>2ã€è¡¨å•æ•°æ®å¦‚ä½•ç®¡ç†<br>3.é¡µé¢çŠ¶æ€å¦‚ä½•åˆ‡æ¢ï¼ˆæ ¹æ®æ•°æ®çš„çŠ¶æ€å†³å®šUIçš„çŠ¶æ€ï¼‰</p><h4 id="åŸºäºè·¯ç”±å®ç°èœå•å¯¼èˆªï¼š"><a href="#åŸºäºè·¯ç”±å®ç°èœå•å¯¼èˆªï¼š" class="headerlink" title="åŸºäºè·¯ç”±å®ç°èœå•å¯¼èˆªï¼š"></a>åŸºäºè·¯ç”±å®ç°èœå•å¯¼èˆªï¼š</h4><p>æŠ€æœ¯è¦ç‚¹ï¼š<br>1.èœå•å¯¼èˆªåªæ”¹å˜URLçŠ¶æ€<br>2.æ ¹æ®å½“å‰URLæ˜¾ç¤ºèœå•çš„å½“å‰çŠ¶æ€ã€‚</p><p>å¯ä»¥ä½¿ç”¨react-routerçš„NavLink,å±•ç¤ºå½“å‰çš„é€‰ä¸­çŠ¶æ€ ï¼ˆNavLinkçš„activeClassNameå±æ€§ï¼‰</p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>24-é¡µé¢æ•°æ®æ¥æºäºå¤šä¸ªè¯·æ±‚</title>
    <link href="/2020/11/21/24-%E9%A1%B5%E9%9D%A2%E6%95%B0%E6%8D%AE%E6%9D%A5%E6%BA%90%E4%BA%8E%E5%A4%9A%E4%B8%AA%E8%AF%B7%E6%B1%82/"/>
    <url>/2020/11/21/24-%E9%A1%B5%E9%9D%A2%E6%95%B0%E6%8D%AE%E6%9D%A5%E6%BA%90%E4%BA%8E%E5%A4%9A%E4%B8%AA%E8%AF%B7%E6%B1%82/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸€ã€é¡µé¢æ•°æ®æ¥è‡ªå¤šä¸ªè¯·æ±‚ï¼š"><a href="#ä¸€ã€é¡µé¢æ•°æ®æ¥è‡ªå¤šä¸ªè¯·æ±‚ï¼š" class="headerlink" title="ä¸€ã€é¡µé¢æ•°æ®æ¥è‡ªå¤šä¸ªè¯·æ±‚ï¼š"></a>ä¸€ã€é¡µé¢æ•°æ®æ¥è‡ªå¤šä¸ªè¯·æ±‚ï¼š</h4><p>1ã€è¯·æ±‚ä¹‹é—´æ— ä¾èµ–å…³ç³»æ—¶ï¼Œå¤šä¸ªè¯·æ±‚å¯ä»¥å¹¶å‘è¿›è¡Œ</p><p>2ã€è¯·æ±‚ä¹‹é—´æœ‰ä¾èµ–å…³ç³»æ—¶ï¼Œéœ€è¦ä¾æ¬¡è¿›è¡Œ</p><p>3ã€è¯·æ±‚å®Œæˆä¹‹å‰ï¼Œé¡µé¢æ˜¾ç¤ºLodingçŠ¶æ€<br>ï¼ˆLodingå¯èƒ½å¹¶ä¸éœ€è¦ç‰¹åˆ«è®¾ä¸ºä¸€ä¸ªçŠ¶æ€å€¼ï¼Œå¯ä»¥æ ¹æ®æ•°æ®çš„çŠ¶æ€æ¥åˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºâ€™Loding..â€™)</p><h4 id="äºŒã€å†…å®¹é¡µçš„åŠ è½½ä¸ç¼“å­˜"><a href="#äºŒã€å†…å®¹é¡µçš„åŠ è½½ä¸ç¼“å­˜" class="headerlink" title="äºŒã€å†…å®¹é¡µçš„åŠ è½½ä¸ç¼“å­˜"></a>äºŒã€å†…å®¹é¡µçš„åŠ è½½ä¸ç¼“å­˜</h4><p><img src="https://pic.downk.cc/item/5fb8da68b18d627113503356.jpg"></p><p><strong>å†…å®¹é¡µå’Œåˆ—è¡¨é¡µçš„æ•°æ®å…³ç³»ï¼š</strong></p><ul><li>ç®€å•ä¸šåŠ¡ï¼šåˆ—è¡¨é¡µæ•°æ®åŒ…å«å†…å®¹é¡µçš„æ•°æ®</li><li>å¤æ‚ä¸šåŠ¡ï¼šå†…å®¹é¡µæ•°æ®éœ€è¦é¢å¤–è·å–</li><li>å†…å®¹é¡µæ•°æ®çš„ç¼“å­˜</li></ul><p>ğŸ–ï¼šå†…å®¹é¡µä¸èƒ½åªä¾é åˆ—è¡¨é¡µè¿›è¡Œï¼Œç”¨æˆ·å¯èƒ½åˆ·æ–°é¡µé¢ï¼Œæ‰€ä»¥å®ƒè‡ªå·±ä¹Ÿéœ€è¦å®šä¹‰ä¸€ä¸ªè®¿é—®æ¥å£çš„actionã€‚</p><p><img src="https://pic.downk.cc/item/5fb8d9d7b18d627113500886.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>23-åœ¨Reactä¸­å®ç°åˆ—è¡¨é¡µ</title>
    <link href="/2020/11/20/23-%E5%9C%A8React%E4%B8%AD%E5%AE%9E%E7%8E%B0%E5%88%97%E8%A1%A8%E9%A1%B5/"/>
    <url>/2020/11/20/23-%E5%9C%A8React%E4%B8%AD%E5%AE%9E%E7%8E%B0%E5%88%97%E8%A1%A8%E9%A1%B5/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸€ã€åˆ—è¡¨é¡µï¼šæœç´¢ã€æ•°æ®ç¼“å­˜å’Œåˆ†é¡µ"><a href="#ä¸€ã€åˆ—è¡¨é¡µï¼šæœç´¢ã€æ•°æ®ç¼“å­˜å’Œåˆ†é¡µ" class="headerlink" title="ä¸€ã€åˆ—è¡¨é¡µï¼šæœç´¢ã€æ•°æ®ç¼“å­˜å’Œåˆ†é¡µ"></a>ä¸€ã€åˆ—è¡¨é¡µï¼šæœç´¢ã€æ•°æ®ç¼“å­˜å’Œåˆ†é¡µ</h4><p>å¼€å‘åˆ—è¡¨é¡µéœ€è¦è€ƒè™‘çš„æŠ€æœ¯è¦ç‚¹ï¼š</p><ul><li>å¦‚ä½•ç¿»é¡µ</li><li>å¦‚ä½•è¿›è¡Œå†…å®¹æœç´¢</li><li>å¦‚ä½•ç¼“å­˜æ•°æ®</li><li>ä½•æ—¶è¿›è¡Œé¡µé¢åˆ·æ–°</li></ul><p><img src="https://pic.downk.cc/item/5fb76b52b18d627113ee2145.jpg" alt="åˆ—è¡¨é¡µçš„æ•°æ®æ¨¡å‹"></p><p><img src="https://pic.downk.cc/item/5fb76b8eb18d627113ee2fe8.jpg" alt="Storeçš„è®¾è®¡"></p><p><img src="https://pic.downk.cc/item/5fb76ccbb18d627113ee8a4b.jpg" alt="URLè®¾è®¡å’ŒStoreåŒæ­¥"></p><h4 id="äºŒã€åˆ—è¡¨é¡µï¼šç¼“å­˜æ›´æ–°ã€åŠ è½½çŠ¶æ€ä»¥åŠé”™è¯¯å¤„ç†"><a href="#äºŒã€åˆ—è¡¨é¡µï¼šç¼“å­˜æ›´æ–°ã€åŠ è½½çŠ¶æ€ä»¥åŠé”™è¯¯å¤„ç†" class="headerlink" title="äºŒã€åˆ—è¡¨é¡µï¼šç¼“å­˜æ›´æ–°ã€åŠ è½½çŠ¶æ€ä»¥åŠé”™è¯¯å¤„ç†"></a>äºŒã€åˆ—è¡¨é¡µï¼šç¼“å­˜æ›´æ–°ã€åŠ è½½çŠ¶æ€ä»¥åŠé”™è¯¯å¤„ç†</h4><p><img src="https://pic.downk.cc/item/5fb76f47b18d627113ef65f6.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>22-åœ¨Reactä¸­å®ç°è¡¨å•</title>
    <link href="/2020/11/20/22-%E5%9C%A8React%E4%B8%AD%E5%AE%9E%E7%8E%B0%E8%A1%A8%E5%8D%95/"/>
    <url>/2020/11/20/22-%E5%9C%A8React%E4%B8%AD%E5%AE%9E%E7%8E%B0%E8%A1%A8%E5%8D%95/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸€ã€å®ç°è¡¨å•ï¼šåˆå§‹æ•°æ®ã€æäº¤å’Œè·³è½¬"><a href="#ä¸€ã€å®ç°è¡¨å•ï¼šåˆå§‹æ•°æ®ã€æäº¤å’Œè·³è½¬" class="headerlink" title="ä¸€ã€å®ç°è¡¨å•ï¼šåˆå§‹æ•°æ®ã€æäº¤å’Œè·³è½¬"></a>ä¸€ã€å®ç°è¡¨å•ï¼šåˆå§‹æ•°æ®ã€æäº¤å’Œè·³è½¬</h4><p>1ã€å•çº¯ä½¿ç”¨Reactçš„æ–¹å¼å®ç°è¡¨å•</p><p><img src="https://pic.downk.cc/item/5fb76076b18d627113eb2a31.jpg"></p><p>ğŸ–ï¼šæ˜¯åœ¨formä¸­ç¼–è¾‘onSubmitï¼Œè€Œä¸æ˜¯åœ¨buttonçš„ç‚¹å‡»äº‹ä»¶é‡Œæäº¤ï¼Œè¿™æ ·å³ä½¿ä½ ç‚¹å›è½¦ä¹Ÿä¼šè¿›è¡Œæäº¤ï¼ˆç»™å‡ºé”™è¯¯æç¤ºï¼‰</p><p>å¯ä»¥å‘ç°è¿™æ ·å®ç°è¡¨å•æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼</p><p>2ã€ä½¿ç”¨UI libraryå®ç°è¡¨å•ï¼ˆæ¯”å¦‚Antd)</p><p>å…·ä½“å‚ç…§ï¼š<a href="https://ant.design/components/form-cn/#header">Antd-Formè¡¨å•</a></p><p>3ã€å¯ä»¥å¯¹APIè¿›è¡Œå°è£…</p><h4 id="äºŒã€å®ç°è¡¨å•ï¼šé”™è¯¯å¤„ç†ã€åŠ¨æ€æ“ä½œè¡¨å•å…ƒç´ ï¼Œå†…å®¹åŠ¨æ€åŠ è½½"><a href="#äºŒã€å®ç°è¡¨å•ï¼šé”™è¯¯å¤„ç†ã€åŠ¨æ€æ“ä½œè¡¨å•å…ƒç´ ï¼Œå†…å®¹åŠ¨æ€åŠ è½½" class="headerlink" title="äºŒã€å®ç°è¡¨å•ï¼šé”™è¯¯å¤„ç†ã€åŠ¨æ€æ“ä½œè¡¨å•å…ƒç´ ï¼Œå†…å®¹åŠ¨æ€åŠ è½½"></a>äºŒã€å®ç°è¡¨å•ï¼šé”™è¯¯å¤„ç†ã€åŠ¨æ€æ“ä½œè¡¨å•å…ƒç´ ï¼Œå†…å®¹åŠ¨æ€åŠ è½½</h4><p>ä»¥Antdä¸ºä¾‹ï¼šä¸€ä¸ªdemo<br><a href="https://codesandbox.io/s/6n20nrzlxz?file=/src/c29/FormBuilder.js">https://codesandbox.io/s/6n20nrzlxz?file=/src/c29/FormBuilder.js</a></p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>21-ReactRouterç®¡ç†ç™»å½•å’Œæˆæƒ</title>
    <link href="/2020/11/20/21-ReactRouter%E7%AE%A1%E7%90%86%E7%99%BB%E5%BD%95%E5%92%8C%E6%8E%88%E6%9D%83/"/>
    <url>/2020/11/20/21-ReactRouter%E7%AE%A1%E7%90%86%E7%99%BB%E5%BD%95%E5%92%8C%E6%8E%88%E6%9D%83/</url>
    
    <content type="html"><![CDATA[<h3 id="ä½¿ç”¨React-Router-ç®¡ç†è·¯ç”±æˆæƒ"><a href="#ä½¿ç”¨React-Router-ç®¡ç†è·¯ç”±æˆæƒ" class="headerlink" title="ä½¿ç”¨React-Router ç®¡ç†è·¯ç”±æˆæƒ"></a>ä½¿ç”¨React-Router ç®¡ç†è·¯ç”±æˆæƒ</h3><p>1ã€å®ç°åŸºç¡€ï¼šReact Routerçš„åŠ¨æ€è·¯ç”±æœºåˆ¶<br>2ã€åŒºåˆ†å—ä¿æŠ¤è·¯ç”±å’Œå…¬å¼€è·¯ç”±<br>3ã€è®¿é—®æœªæˆæƒè·¯ç”±æ—¶é‡å®šå‘åˆ°ç™»å½•é¡µé¢æˆ–æ˜¾ç¤ºç¦æ­¢è®¿é—®</p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>20-ä½¿ç”¨Rekitå¼€å‘å¯æ‰©å±•çš„Reactåº”ç”¨</title>
    <link href="/2020/11/20/20-%E4%BD%BF%E7%94%A8Rekit%E5%BC%80%E5%8F%91%E5%8F%AF%E6%89%A9%E5%B1%95%E7%9A%84React%E5%BA%94%E7%94%A8/"/>
    <url>/2020/11/20/20-%E4%BD%BF%E7%94%A8Rekit%E5%BC%80%E5%8F%91%E5%8F%AF%E6%89%A9%E5%B1%95%E7%9A%84React%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h3 id="Rekit-Reactä¸“å±IDEå’Œå·¥å…·é›†"><a href="#Rekit-Reactä¸“å±IDEå’Œå·¥å…·é›†" class="headerlink" title="Rekit: Reactä¸“å±IDEå’Œå·¥å…·é›†"></a>Rekit: Reactä¸“å±IDEå’Œå·¥å…·é›†</h3><p><img src="https://pic.downk.cc/item/5fb7295cb18d627113dc80e8.jpg"></p><h4 id="ä¸€ã€ä½¿ç”¨Rekitåˆ›å»ºé¡¹ç›®ï¼Œä»£ç ç”Ÿæˆå’Œé‡æ„"><a href="#ä¸€ã€ä½¿ç”¨Rekitåˆ›å»ºé¡¹ç›®ï¼Œä»£ç ç”Ÿæˆå’Œé‡æ„" class="headerlink" title="ä¸€ã€ä½¿ç”¨Rekitåˆ›å»ºé¡¹ç›®ï¼Œä»£ç ç”Ÿæˆå’Œé‡æ„"></a>ä¸€ã€ä½¿ç”¨Rekitåˆ›å»ºé¡¹ç›®ï¼Œä»£ç ç”Ÿæˆå’Œé‡æ„</h4><p>åªéœ€è¦å†™åŠŸèƒ½éƒ¨åˆ†çš„ä»£ç ï¼Œä¸ç”¨å†è‡ªå·±æ„å»ºéª¨æ¶ã€‚</p><p><img src="https://pic.downk.cc/item/5fb729deb18d627113dca15a.jpg"></p><p><img src="https://pic.downk.cc/item/5fb72aa5b18d627113dccff5.jpg"></p><p><img src="https://pic.downk.cc/item/5fb72b4cb18d627113dcfc0c.jpg"></p><p><img src="https://pic.downk.cc/item/5fb72c21b18d627113dd4456.jpg"></p><p><img src="https://pic.downk.cc/item/5fb72c51b18d627113dd4ee6.jpg"></p><p><img src="https://pic.downk.cc/item/5fb72ceeb18d627113dd7003.jpg"></p><h4 id="äºŒã€ä½¿ç”¨Rekitéµå¾ªæœ€ä½³å®è·µå’Œä¿æŒä»£ç ä¸€è‡´æ€§"><a href="#äºŒã€ä½¿ç”¨Rekitéµå¾ªæœ€ä½³å®è·µå’Œä¿æŒä»£ç ä¸€è‡´æ€§" class="headerlink" title="äºŒã€ä½¿ç”¨Rekitéµå¾ªæœ€ä½³å®è·µå’Œä¿æŒä»£ç ä¸€è‡´æ€§"></a>äºŒã€ä½¿ç”¨Rekitéµå¾ªæœ€ä½³å®è·µå’Œä¿æŒä»£ç ä¸€è‡´æ€§</h4><p>==æœ€ä½³å®è·µ:==</p><ul><li>1.ä»¥featureæ–¹å¼ç»„ç»‡ä»£ç </li><li>2.æ‹†åˆ†ç»„ä»¶componentï¼Œactionå’Œreducer</li><li>3.æ‹†åˆ†è·¯ç”±é…ç½®</li></ul><p>==é€šè¿‡ä»£ç è‡ªåŠ¨ç”Ÿæˆä¿æŒä¸€è‡´æ€§ï¼š==</p><ul><li>1.æ–‡ä»¶å¤¹ç»“æ„ä¸€è‡´æ€§</li><li>2.æ–‡ä»¶åä¸€è‡´æ€§</li><li>3.å˜é‡åä¸€è‡´æ€§</li><li>4.ä»£ç é€»è¾‘ä¸€è‡´æ€§</li></ul>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>19-æ‹†åˆ†å¤§å‹é¡¹ç›®çš„å¤æ‚åº¦</title>
    <link href="/2020/11/20/19-%E6%8B%86%E5%88%86%E5%A4%A7%E5%9E%8B%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%A4%8D%E6%9D%82%E5%BA%A6/"/>
    <url>/2020/11/20/19-%E6%8B%86%E5%88%86%E5%A4%A7%E5%9E%8B%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%A4%8D%E6%9D%82%E5%BA%A6/</url>
    
    <content type="html"><![CDATA[<h3 id="æ‹†åˆ†å¤æ‚åº¦"><a href="#æ‹†åˆ†å¤æ‚åº¦" class="headerlink" title="æ‹†åˆ†å¤æ‚åº¦"></a>æ‹†åˆ†å¤æ‚åº¦</h3><h4 id="ä¸€ã€æŒ‰é¢†åŸŸæ¨¡å‹ï¼ˆfeatureï¼‰ç»„ç»‡ä»£ç ï¼Œé™ä½è€¦åˆåº¦"><a href="#ä¸€ã€æŒ‰é¢†åŸŸæ¨¡å‹ï¼ˆfeatureï¼‰ç»„ç»‡ä»£ç ï¼Œé™ä½è€¦åˆåº¦" class="headerlink" title="ä¸€ã€æŒ‰é¢†åŸŸæ¨¡å‹ï¼ˆfeatureï¼‰ç»„ç»‡ä»£ç ï¼Œé™ä½è€¦åˆåº¦"></a>ä¸€ã€æŒ‰é¢†åŸŸæ¨¡å‹ï¼ˆfeatureï¼‰ç»„ç»‡ä»£ç ï¼Œé™ä½è€¦åˆåº¦</h4><p><img src="https://pic.downk.cc/item/5fb71ee0b18d627113d9dabc.jpg"></p><p><img src="https://pic.downk.cc/item/5fb71f0ab18d627113d9e304.jpg"></p><p><img src="https://pic.downk.cc/item/5fb71f24b18d627113d9e849.jpg"></p><p><strong>è§£å†³ï¼šå…ˆä»¥ä¸šåŠ¡é€»è¾‘,ä»¥åŠŸèƒ½è¿›è¡Œåˆ’åˆ†ï¼Œç„¶åæ¯ä¸ªåŠŸèƒ½(feature)å†…éƒ¨æœ‰è‡ªå·±çš„reducerï¼Œcomponentï¼Œaction</strong></p><p><img src="https://pic.downk.cc/item/5fb71f7db18d627113d9fdb5.jpg"></p><p>ä½¿ç”¨ReactæŠ€æœ¯æ ˆå¦‚ä½•å®ç°è¿™ç§æ¶æ„ï¼Ÿ</p><p><img src="https://pic.downk.cc/item/5fb71fe1b18d627113da1548.jpg"></p><p>ä»¥åŠŸèƒ½åŒºåˆ†ï¼Œè·¯ç”±é…ç½®ä¹Ÿå¯ä»¥åˆ†æ•£åœ¨æ¯ä¸ªfeatureä¸­ï¼Œè¿™æ ·å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§æ›´å¥½ï¼</p><h4 id="äºŒã€å¦‚ä½•ç»„ç»‡componentï¼Œaction-å’Œ-reducer"><a href="#äºŒã€å¦‚ä½•ç»„ç»‡componentï¼Œaction-å’Œ-reducer" class="headerlink" title="äºŒã€å¦‚ä½•ç»„ç»‡componentï¼Œaction å’Œ reducer"></a>äºŒã€å¦‚ä½•ç»„ç»‡componentï¼Œaction å’Œ reducer</h4><p><img src="https://pic.downk.cc/item/5fb720bab18d627113da4750.jpg"></p><p>å•å…ƒæµ‹è¯•æ–‡ä»¶å¤¹testsæ˜¯å•ç‹¬ç»´æŠ¤çš„ï¼Œå•ç‹¬æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚</p><p>å¸¸é‡ï¼šé€šå¸¸åœ¨æ¯ä¸ªfeatureä¸‹é¢æœ‰ä¸ªconstant.jsæ–‡ä»¶</p><p><img src="https://pic.downk.cc/item/5fb72191b18d627113da77a0.jpg"></p><p>rootReducerçš„å†™æ³•ï¼š<br><img src="https://pic.downk.cc/item/5fb721e2b18d627113da87fe.jpg"></p><p><strong>æ€»ç»“</strong>ï¼š</p><ul><li>æŒ‰ç…§featureç»„ç»‡ç»„ä»¶componentï¼Œactionå’Œreducer</li><li>ä½¿ç”¨root loaderåŠ è½½featureä¸‹çš„å„ä¸ªèµ„æº</li><li>åšåˆ°é«˜å†…èšã€æ¾è€¦åˆ</li></ul><h4 id="ä¸‰ã€å¦‚ä½•ç»„ç»‡React-Routeçš„è·¯ç”±é…ç½®"><a href="#ä¸‰ã€å¦‚ä½•ç»„ç»‡React-Routeçš„è·¯ç”±é…ç½®" class="headerlink" title="ä¸‰ã€å¦‚ä½•ç»„ç»‡React Routeçš„è·¯ç”±é…ç½®"></a>ä¸‰ã€å¦‚ä½•ç»„ç»‡React Routeçš„è·¯ç”±é…ç½®</h4><p><img src="https://pic.downk.cc/item/5fb72294b18d627113dabdf7.jpg"></p><p>æ¨èJSONæ–¹å¼çš„è·¯ç”±ï¼š</p><p><img src="https://pic.downk.cc/item/5fb722f6b18d627113dae650.jpg"></p><p>è§£æJSONè·¯ç”±ï¼š<br><img src="https://pic.downk.cc/item/5fb72375b18d627113db0340.jpg"></p><p><strong>æ€»ç»“</strong>ï¼š</p><ul><li>æ¯ä¸ªfeatureéƒ½æœ‰è‡ªå·±çš„ä¸“å±è·¯ç”±é…ç½®</li><li>é¡¶å±‚è·¯ç”±ä½¿ç”¨JSONé…ç½®æ›´å®¹æ˜“ç»´æŠ¤</li><li>å¦‚ä½•è§£æJSONé…ç½®åˆ°React Routerè¯­æ³•ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>18-å‰ç«¯é¡¹ç›®çš„ç†æƒ³æ¶æ„</title>
    <link href="/2020/11/20/18-%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E7%9A%84%E7%90%86%E6%83%B3%E6%9E%B6%E6%9E%84/"/>
    <url>/2020/11/20/18-%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E7%9A%84%E7%90%86%E6%83%B3%E6%9E%B6%E6%9E%84/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰ç«¯é¡¹ç›®çš„ç†æƒ³æ¶æ„"><a href="#å‰ç«¯é¡¹ç›®çš„ç†æƒ³æ¶æ„" class="headerlink" title="å‰ç«¯é¡¹ç›®çš„ç†æƒ³æ¶æ„"></a>å‰ç«¯é¡¹ç›®çš„ç†æƒ³æ¶æ„</h3><p><img src="https://pic.downk.cc/item/5fb71b94b18d627113d91010.jpg"></p><h4 id="1ã€-æ˜“äºå¼€å‘"><a href="#1ã€-æ˜“äºå¼€å‘" class="headerlink" title="1ã€ æ˜“äºå¼€å‘"></a>1ã€ æ˜“äºå¼€å‘</h4><ul><li>å¼€å‘å·¥å…·æ˜¯å¦å®Œå–„</li><li>ç”Ÿæ€åœˆæ˜¯å¦ç¹è£</li><li>ç¤¾åŒºæ˜¯å¦æ´»è·ƒ</li></ul><h4 id="2ã€æ˜“äºæ‰©å±•"><a href="#2ã€æ˜“äºæ‰©å±•" class="headerlink" title="2ã€æ˜“äºæ‰©å±•"></a>2ã€æ˜“äºæ‰©å±•</h4><ul><li>å¢åŠ æ–°åŠ¨èƒ½æ˜¯å¦å®¹æ˜“</li><li>æ–°åŠŸèƒ½æ˜¯å¦ä¼šæ˜¾è‘—å¢åŠ ç³»ç»Ÿå¤æ‚åº¦</li></ul><h4 id="3ã€æ˜“äºç»´æŠ¤"><a href="#3ã€æ˜“äºç»´æŠ¤" class="headerlink" title="3ã€æ˜“äºç»´æŠ¤"></a>3ã€æ˜“äºç»´æŠ¤</h4><ul><li>ä»£ç æ˜¯å¦å®¹æ˜“ç†è§£</li><li>æ–‡æ¡£æ˜¯å¦å¥å…¨</li></ul><h4 id="4ã€æ˜“äºæµ‹è¯•"><a href="#4ã€æ˜“äºæµ‹è¯•" class="headerlink" title="4ã€æ˜“äºæµ‹è¯•"></a>4ã€æ˜“äºæµ‹è¯•</h4><p>ï¼ˆæµ‹è¯•åäºå¼€å‘ï¼Œæ‰€ä»¥å¿…é¡»åœ¨å¼€å‘æ—¶å°±è€ƒè™‘æ¸…æ¥šï¼‰</p><ul><li>åŠŸèƒ½çš„åˆ†å±‚æ˜¯å¦æ¸…æ™°ï¼ˆJqueryé‚£ç§å°±å¾ˆéš¾è¿›è¡Œå•å…ƒæµ‹è¯•ï¼‰</li><li>å‰¯ä½œç”¨å°‘</li><li>å°½é‡ä½¿ç”¨çº¯å‡½æ•°</li></ul><h4 id="5ã€æ˜“äºæ„å»º"><a href="#5ã€æ˜“äºæ„å»º" class="headerlink" title="5ã€æ˜“äºæ„å»º"></a>5ã€æ˜“äºæ„å»º</h4><ul><li>ä½¿ç”¨é€šç”¨æŠ€æœ¯å’Œæ¶æ„</li><li>æ„å»ºå·¥å…·çš„é€‰æ‹©ï¼ˆwebpackç­‰ï¼Œ</li></ul>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>17-å¸¸ç”¨å¼€å‘è°ƒè¯•å·¥å…·</title>
    <link href="/2020/11/20/17-%E5%B8%B8%E7%94%A8%E5%BC%80%E5%8F%91%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/"/>
    <url>/2020/11/20/17-%E5%B8%B8%E7%94%A8%E5%BC%80%E5%8F%91%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7/</url>
    
    <content type="html"><![CDATA[<h3 id="å¸¸ç”¨å¼€å‘è°ƒè¯•å·¥å…·ï¼š"><a href="#å¸¸ç”¨å¼€å‘è°ƒè¯•å·¥å…·ï¼š" class="headerlink" title="å¸¸ç”¨å¼€å‘è°ƒè¯•å·¥å…·ï¼š"></a>å¸¸ç”¨å¼€å‘è°ƒè¯•å·¥å…·ï¼š</h3><h4 id="1-ESLint"><a href="#1-ESLint" class="headerlink" title="1.ESLint"></a>1.ESLint</h4><ul><li>ä½¿ç”¨.eslintrcè¿›è¡Œè§„åˆ™çš„é…ç½®</li><li>å‘Šè¯‰ä½ å“ªé‡Œä¸ç¬¦åˆè§„åˆ™</li><li>å¯ä»¥ä½¿ç”¨airbnbçš„JavaScriptä»£ç é£æ ¼</li></ul><h4 id="2-Prettier"><a href="#2-Prettier" class="headerlink" title="2.Prettier"></a>2.Prettier</h4><ul><li>ä»£ç æ ¼å¼åŒ–çš„ç¥å™¨ï¼ˆå¯ä»¥è‡ªåŠ¨ä¿®æ”¹ä¸ç¬¦åˆè§„åˆ™çš„ï¼‰</li><li>åŒ…è£…æ›´å®¹æ˜“å†™å‡ºé£æ ¼ä¸€è‡´çš„ä»£ç </li></ul><h4 id="3-React-Dev-Tools"><a href="#3-React-Dev-Tools" class="headerlink" title="3.React Dev Tools"></a>3.React Dev Tools</h4><p><img src="https://pic.downk.cc/item/5fb71930b18d627113d88a26.jpg"></p><ul><li>å¯ä»¥è§‚å¯ŸReactç»„ä»¶æ ‘çš„DOMç»“æ„</li><li>å¯ä»¥çœ‹åˆ°å“ªäº›ç»„ä»¶render</li></ul><h4 id="4-Redux-Dev-Tools"><a href="#4-Redux-Dev-Tools" class="headerlink" title="4.Redux Dev Tools"></a>4.Redux Dev Tools</h4><p><img src="https://pic.downk.cc/item/5fb7197bb18d627113d898dd.jpg"></p><ul><li>å¯ä»¥è§‚å¯Ÿå½“å‰Storeçš„çŠ¶æ€</li><li>ç”¨æˆ·å‘å‡ºåŠ¨ä½œåï¼Œä¼šçœ‹åˆ°action</li><li>æ—¶é—´çº¿ï¼šå¯ä»¥æ¢å¤åˆ°actionå˜åŒ–ä¹‹å‰çš„æ—¶é—´çº¿</li><li>å¯ä»¥è‡ªåŠ¨ç”Ÿæˆä¸€äº›æµ‹è¯•çš„ä»£ç ï¼Œç›´æ¥copyåˆ°å•å…ƒæµ‹è¯•æ–‡ä»¶ä¸­</li></ul>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>16-ä½¿ç”¨Jestå’ŒEnzymeç­‰å·¥å…·è¿›è¡Œå•å…ƒæµ‹è¯•</title>
    <link href="/2020/11/18/16-%E4%BD%BF%E7%94%A8Jest%E5%92%8CEnzyme%E7%AD%89%E5%B7%A5%E5%85%B7%E8%BF%9B%E8%A1%8C%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
    <url>/2020/11/18/16-%E4%BD%BF%E7%94%A8Jest%E5%92%8CEnzyme%E7%AD%89%E5%B7%A5%E5%85%B7%E8%BF%9B%E8%A1%8C%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€Reactè®©å‰ç«¯å•å…ƒæµ‹è¯•å˜å¾—å®¹æ˜“ï¼š"><a href="#ä¸€ã€Reactè®©å‰ç«¯å•å…ƒæµ‹è¯•å˜å¾—å®¹æ˜“ï¼š" class="headerlink" title="ä¸€ã€Reactè®©å‰ç«¯å•å…ƒæµ‹è¯•å˜å¾—å®¹æ˜“ï¼š"></a>ä¸€ã€Reactè®©å‰ç«¯å•å…ƒæµ‹è¯•å˜å¾—å®¹æ˜“ï¼š</h3><p>1ã€Reactåº”ç”¨å¾ˆå°‘éœ€è¦è®¿é—®æµè§ˆå™¨API<br>2ã€è™šæ‹ŸDOMå¯ä»¥åœ¨NodeJSç¯å¢ƒè¿è¡Œå’Œæµ‹è¯•<br>3ã€Reduxéš”ç¦»äº†çŠ¶æ€ç®¡ç†ï¼Œçº¯æ•°æ®å±‚å•å…ƒæµ‹è¯•</p><h3 id="äºŒã€å•å…ƒæµ‹è¯•æ¶‰åŠçš„å·¥å…·"><a href="#äºŒã€å•å…ƒæµ‹è¯•æ¶‰åŠçš„å·¥å…·" class="headerlink" title="äºŒã€å•å…ƒæµ‹è¯•æ¶‰åŠçš„å·¥å…·"></a>äºŒã€å•å…ƒæµ‹è¯•æ¶‰åŠçš„å·¥å…·</h3><p>1ã€Jest: FaceBookå¼€æºçš„JSå•å…ƒæµ‹è¯•æ¡†æ¶<br>2ã€JS DOMï¼š æµè§ˆå™¨ç¯å¢ƒçš„NodeJSæ¨¡æ‹Ÿ<br>3ã€Enzymeï¼š reactç»„ä»¶æ¸²æŸ“å’Œæµ‹è¯•<br>4ã€nockï¼š æ¨¡æ‹ŸHTTPè¯·æ±‚<br>5ã€sinonï¼š å‡½æ•°æ¨¡æ‹Ÿå’Œè°ƒç”¨è·Ÿè¸ª<br>6ã€istanbul: å•å…ƒæµ‹è¯•è¦†ç›–ç‡ï¼ˆå¯¹å·²æœ‰æ–¹æ³•ä¿®æ”¹å’ŒåŸ‹ç‚¹ï¼‰</p><p><img src="https://pic.downk.cc/item/5fb4bc4cb18d62711351ecbc.jpg"></p><p><img src="https://pic.downk.cc/item/5fb4bc5fb18d62711351f09e.jpg"></p><p><img src="https://pic.downk.cc/item/5fb4bc9db18d62711351fc16.jpg"></p><p><img src="https://pic.downk.cc/item/5fb4bdf1b18d6271135241c2.jpg"></p><p><img src="https://pic.downk.cc/item/5fb4be5eb18d627113525540.jpg"></p><p><img src="https://pic.downk.cc/item/5fb4bef6b18d627113527125.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å•å…ƒæµ‹è¯•å·¥å…·</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>15-ä½¿ç”¨Next.js</title>
    <link href="/2020/11/18/15-%E4%BD%BF%E7%94%A8Next-js/"/>
    <url>/2020/11/18/15-%E4%BD%BF%E7%94%A8Next-js/</url>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨next.jså¼€å‘Reacté¡¹ç›®çš„åŒæ„åº”ç”¨ã€‚</p><h3 id="ä¸€ã€ä»€ä¹ˆæ˜¯åŒæ„åº”ç”¨ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯åŒæ„åº”ç”¨ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯åŒæ„åº”ç”¨ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯åŒæ„åº”ç”¨ï¼Ÿ</h3><p><img src="https://pic.downk.cc/item/5fb4b6adb18d62711350daf9.jpg"></p><p>next.jså¯ä»¥è‡ªåŠ¨é…ç½®å¥½åŒæ„åº”ç”¨çš„webpacké…ç½®ç­‰ç»†èŠ‚ã€‚</p><h3 id="äºŒã€nextçš„åŸºæœ¬ç”¨æ³•"><a href="#äºŒã€nextçš„åŸºæœ¬ç”¨æ³•" class="headerlink" title="äºŒã€nextçš„åŸºæœ¬ç”¨æ³•"></a>äºŒã€nextçš„åŸºæœ¬ç”¨æ³•</h3><p><img src="https://pic.downk.cc/item/5fb4b787b18d62711350fce5.jpg"></p><p><strong>åœ¨é¡µé¢ä¸­ä½¿ç”¨å…¶ä»–çš„Reactç»„ä»¶ï¼š</strong></p><p>1ã€é¡µé¢ä¹Ÿæ˜¯æ ‡å‡†çš„nodeæ¨¡å—ï¼Œå¯ä½¿ç”¨å…¶ä»–çš„Reactç»„ä»¶ ï¼ˆæ”¾åœ¨componentsç›®å½•ä¸‹é¢ï¼‰<br>2ã€é¡µé¢ä¼šé’ˆå¯¹æ€§æ‰“åŒ…ï¼Œ ä»…åŒ…å«èµ·å¼•å…¥çš„ç»„ä»¶ã€‚</p><p><img src="https://pic.downk.cc/item/5fb4b95bb18d627113515a13.jpg"></p><p>ğŸ–ï¼šprefetchå¹¶ä¸ä¼šé¢„åŠ è½½æœåŠ¡å™¨ç«¯çš„æ•°æ®</p><p><strong>å…³äºlazy load:</strong><br><img src="https://pic.downk.cc/item/5fb4ba11b18d627113517eef.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>14-UIç»„ä»¶åº“çš„å¯¹æ¯”</title>
    <link href="/2020/11/18/14-UI%E7%BB%84%E4%BB%B6%E5%BA%93%E7%9A%84%E5%AF%B9%E6%AF%94/"/>
    <url>/2020/11/18/14-UI%E7%BB%84%E4%BB%B6%E5%BA%93%E7%9A%84%E5%AF%B9%E6%AF%94/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€Ant-Design"><a href="#ä¸€ã€Ant-Design" class="headerlink" title="ä¸€ã€Ant Design"></a>ä¸€ã€Ant Design</h3><p>æœåŠ¡äºä¼ä¸šçº§äº§å“çš„è®¾è®¡ä½“ç³»ï¼Œæœ‰å®Œå–„çš„æ–‡æ¡£</p><h3 id="äºŒã€Marterial-UI"><a href="#äºŒã€Marterial-UI" class="headerlink" title="äºŒã€Marterial-UI"></a>äºŒã€Marterial-UI</h3><p>é£æ ¼æ›´æ—¶å°šï¼Œæ›´èŠ±å“¨ï¼Œé¢å‘æ¶ˆè´¹è€…</p><h3 id="ä¸‰ã€Semantic-UI"><a href="#ä¸‰ã€Semantic-UI" class="headerlink" title="ä¸‰ã€Semantic UI"></a>ä¸‰ã€Semantic UI</h3><p>æŠŠUIä½œä¸ºlanguageæè¿°ï¼Œæä¾›äº†ä¸åŒlibraryçš„å®ç°ã€‚</p><p><strong>é€‰æ‹©UIåº“çš„è€ƒè™‘å› ç´ ï¼š</strong></p><ul><li>1ã€ç»„ä»¶åº“æ˜¯å¦é½å…¨</li><li>2ã€æ ·å¼é£æ ¼æ˜¯å¦ç¬¦åˆä¸šåŠ¡éœ€æ±‚</li><li>3ã€APIçš„è®¾è®¡æ˜¯å¦ä¾¿æ·çµæ´»</li><li>4ã€æŠ€æœ¯æ”¯æŒæ˜¯å¦å®Œå–„ï¼ˆæ–‡æ¡£ï¼Œissueï¼‰</li><li>5ã€å¼€å‘æ˜¯å¦æ´»è·ƒï¼ˆç»´æŠ¤ï¼Œè¿­ä»£ï¼‰</li></ul>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>bugè®°å½•</title>
    <link href="/2020/11/18/bug%E8%AE%B0%E5%BD%95/"/>
    <url>/2020/11/18/bug%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h3 id="1ã€-Error-â€œObjects-are-not-valid-as-a-React-childâ€"><a href="#1ã€-Error-â€œObjects-are-not-valid-as-a-React-childâ€" class="headerlink" title="1ã€ Error: â€œObjects are not valid as a React childâ€"></a>1ã€ Error: â€œObjects are not valid as a React childâ€</h3><p>åœ¨reduxçš„ç»ƒä¹ ä¸­ï¼Œblogè¿™ä¸ªdemoæŠ¥äº†è¿™ä¸ªé”™ï¼š</p><p><img src="https://pic.downk.cc/item/5fb48937b18d62711347d6df.jpg"></p><p>åŸä»£ç ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> jsonPlaceholder.get(<span class="hljs-string">`/users/<span class="hljs-subst">$&#123;id&#125;</span>`</span>);dispatch(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;FETCH_USER&quot;</span>, <span class="hljs-attr">payload</span>: response.data &#125;);</code></pre><p>æ‰“å¼€è®¿é—®çš„APIåå‘ç°ï¼Œresponse.dataæ˜¯ä¸ªobjectç±»å‹ï¼Œä¸èƒ½ç›´æ¥èµ‹å€¼ç»™payload<br>åº”è¯¥å…ˆé€šè¿‡JSON.stringify()å°†å…¶è½¬æ¢ä¸ºJSONæ ¼å¼ï¼Œå†è¿›è¡Œèµ‹å€¼ã€‚</p><p>ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> jsonPlaceholder.get(<span class="hljs-string">`/users/<span class="hljs-subst">$&#123;id&#125;</span>`</span>);<span class="hljs-keyword">const</span> data = <span class="hljs-built_in">JSON</span>.stringify(response.data);dispatch(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;FETCH_USER&quot;</span>, <span class="hljs-attr">payload</span>: data &#125;);</code></pre>]]></content>
    
    
    <categories>
      
      <category>bugæ±‡æ€»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>13-React-Router:è·¯ç”±ä¸åªæ˜¯é¡µé¢åˆ‡æ¢ï¼Œæ›´æ˜¯ä»£ç ç»„ç»‡æ–¹å¼</title>
    <link href="/2020/11/17/13-React-Router-%E8%B7%AF%E7%94%B1%E4%B8%8D%E5%8F%AA%E6%98%AF%E9%A1%B5%E9%9D%A2%E5%88%87%E6%8D%A2%EF%BC%8C%E6%9B%B4%E6%98%AF%E4%BB%A3%E7%A0%81%E7%BB%84%E7%BB%87%E6%96%B9%E5%BC%8F/"/>
    <url>/2020/11/17/13-React-Router-%E8%B7%AF%E7%94%B1%E4%B8%8D%E5%8F%AA%E6%98%AF%E9%A1%B5%E9%9D%A2%E5%88%87%E6%8D%A2%EF%BC%8C%E6%9B%B4%E6%98%AF%E4%BB%A3%E7%A0%81%E7%BB%84%E7%BB%87%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦è·¯ç”±ï¼Ÿ"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦è·¯ç”±ï¼Ÿ" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦è·¯ç”±ï¼Ÿ"></a>ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦è·¯ç”±ï¼Ÿ</h3><ul><li>1.å•é¡µåº”ç”¨éœ€è¦è¿›è¡Œé¡µé¢åˆ‡æ¢</li><li>2.é€šè¿‡URLå¯ä»¥å®šä½åˆ°é¡µé¢</li><li>3.æ›´æœ‰è¯­ä¹‰çš„ç»„ç»‡èµ„æº</li></ul><p><img src="https://pic.downk.cc/item/5fb37daab18d62711306e930.jpg"></p><p><img src="https://pic.downk.cc/item/5fb37e3cb18d6271130703a8.jpg"></p><h3 id="äºŒã€React-Routerçš„ç‰¹æ€§ï¼š"><a href="#äºŒã€React-Routerçš„ç‰¹æ€§ï¼š" class="headerlink" title="äºŒã€React-Routerçš„ç‰¹æ€§ï¼š"></a>äºŒã€React-Routerçš„ç‰¹æ€§ï¼š</h3><p>1ã€å£°æ˜å¼è·¯ç”±å®šä¹‰<br>2ã€åŠ¨æ€è·¯ç”±ï¼šé¡µé¢renderæ—¶ï¼Œpathæ‰ä¼šè¢«è§£æ</p><h3 id="ä¸‰ã€å®ç°è·¯ç”±çš„ä¸‰ç§æ–¹å¼"><a href="#ä¸‰ã€å®ç°è·¯ç”±çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="ä¸‰ã€å®ç°è·¯ç”±çš„ä¸‰ç§æ–¹å¼"></a>ä¸‰ã€å®ç°è·¯ç”±çš„ä¸‰ç§æ–¹å¼</h3><p>1ã€URLè·¯ç”±<br>2ã€Hashè·¯ç”±ï¼š #+ è·¯å¾„ï¼Œæ”¯æŒä½ç‰ˆæœ¬<br>3ã€å†…å­˜è·¯ç”±ï¼šMemoryRouterï¼ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“</p><h3 id="å››ã€åŸºäºè·¯ç”±é…ç½®è¿›è¡Œèµ„æºç»„ç»‡"><a href="#å››ã€åŸºäºè·¯ç”±é…ç½®è¿›è¡Œèµ„æºç»„ç»‡" class="headerlink" title="å››ã€åŸºäºè·¯ç”±é…ç½®è¿›è¡Œèµ„æºç»„ç»‡"></a>å››ã€åŸºäºè·¯ç”±é…ç½®è¿›è¡Œèµ„æºç»„ç»‡</h3><p>1ã€å®ç°ä¸šåŠ¡é€»è¾‘çš„æ¾è€¦åˆ<br>2ã€æ˜“äºæ‰©å±•ï¼Œé‡æ„å’Œç»´æŠ¤<br>3ã€è·¯ç”±å±‚é¢å®ç°Lazy Load</p><h3 id="äº”ã€React-Router-çš„å‡ ä¸ªAPI"><a href="#äº”ã€React-Router-çš„å‡ ä¸ªAPI" class="headerlink" title="äº”ã€React-Router çš„å‡ ä¸ªAPI"></a>äº”ã€React-Router çš„å‡ ä¸ªAPI</h3><p><img src="https://pic.downk.cc/item/5fb37fdab18d627113075987.jpg"></p><p><img src="https://pic.downk.cc/item/5fb37feeb18d627113075f96.jpg"></p><p><img src="https://pic.downk.cc/item/5fb38003b18d627113076520.jpg"></p><p><img src="https://pic.downk.cc/item/5fb38032b18d627113076f40.jpg"></p><p><img src="https://pic.downk.cc/item/5fb38056b18d627113077657.jpg"></p><p><img src="https://pic.downk.cc/item/5fb380a8b18d627113078667.jpg"></p><h3 id="å…­ã€é€šè¿‡URLä¼ é€’å‚æ•°"><a href="#å…­ã€é€šè¿‡URLä¼ é€’å‚æ•°" class="headerlink" title="å…­ã€é€šè¿‡URLä¼ é€’å‚æ•°"></a>å…­ã€é€šè¿‡URLä¼ é€’å‚æ•°</h3><p><img src="https://pic.downk.cc/item/5fb3827bb18d62711307e56e.jpg"></p><p><img src="https://pic.downk.cc/item/5fb3834eb18d627113081472.jpg"></p><p><img src="https://pic.downk.cc/item/5fb3842ab18d627113084eaf.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>12-Reduxåœ¨Rectä¸­çš„ç”¨æ³•</title>
    <link href="/2020/11/17/12-Redux%E5%9C%A8Rect%E4%B8%AD%E7%9A%84%E7%94%A8%E6%B3%95/"/>
    <url>/2020/11/17/12-Redux%E5%9C%A8Rect%E4%B8%AD%E7%9A%84%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>&emsp;ä¸ºäº†æ–¹ä¾¿åœ¨reactä¸­ä½¿ç”¨redux, Reduxçš„ä½œè€…å°è£…äº†ä¸€ä¸ªReactä¸“ç”¨çš„åº“<strong>React-Redux</strong>.</p><p>&emsp;è¿™ä¸ªåº“æ˜¯å¯é€‰çš„ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­åº”è¯¥æƒè¡¡ä¸‹æ˜¯ç›´æ¥ä½¿ç”¨reduxè¿˜æ˜¯ä½¿ç”¨React-Reduxã€‚åè€…è™½ç„¶æ–¹ä¾¿ï¼Œä½†æ˜¯è¦æŒæ¡é¢å¤–çš„APIï¼Œå¹¶ä¸”è¦éµå®ˆå®ƒçš„ç»„ä»¶æ‹†åˆ†è§„åˆ™ã€‚</p><h3 id="ä¸€ã€UIç»„ä»¶"><a href="#ä¸€ã€UIç»„ä»¶" class="headerlink" title="ä¸€ã€UIç»„ä»¶"></a>ä¸€ã€UIç»„ä»¶</h3><p>&emsp;React-Reduxå°†æ‰€æœ‰ç»„ä»¶åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><ul><li>UIç»„ä»¶ï¼ˆpresentational componentï¼‰</li><li>å®¹å™¨ç»„ä»¶ï¼ˆcontainer componentï¼‰</li></ul><p>&emsp;UIç»„ä»¶æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>1ã€åªè´Ÿè´£UIçš„å‘ˆç°ï¼Œä¸å¸¦ä»»ä½•ä¸šåŠ¡é€»è¾‘</li><li>2ã€æ²¡æœ‰çŠ¶æ€ï¼ˆå³ä¸é€‚ç”¨this.stateè¿™ä¸ªå˜é‡ï¼‰</li><li>3ã€æ‰€æœ‰æ•°æ®éƒ½ç”±å‚æ•°ï¼ˆthis.props)æä¾›</li><li>4ã€ä¸ä½¿ç”¨ä»»ä½•Reduxçš„API</li></ul><p>ä¸€ä¸ªUIç»„ä»¶çš„ä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> Title = <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;value&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span></code></pre><p>&emsp;å› ä¸ºä¸å«æœ‰çŠ¶æ€ï¼ŒUIç»„ä»¶åˆç§°ä¸ºâ€˜çº¯ç»„ä»¶â€™ï¼Œå³å®ƒå’Œçº¯å‡½æ•°ä¸€æ ·ï¼Œçº¯ç²¹ç”±å‚æ•°å†³å®šå®ƒçš„å€¼ã€‚</p><h3 id="äºŒã€å®¹å™¨ç»„ä»¶"><a href="#äºŒã€å®¹å™¨ç»„ä»¶" class="headerlink" title="äºŒã€å®¹å™¨ç»„ä»¶"></a>äºŒã€å®¹å™¨ç»„ä»¶</h3><p>&emsp; å®¹å™¨ç»„ä»¶çš„ç‰¹å¾æ°æ°ç›¸åï¼š</p><ul><li>è´Ÿè´£ç®¡ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œä¸è´Ÿè´£UIçš„å‘ˆç°</li><li>å¸¦æœ‰å†…éƒ¨çŠ¶æ€</li><li>ä½¿ç”¨Reduxçš„API</li></ul><p>&emsp;æ€»ä¹‹ï¼ŒUIç»„ä»¶è´Ÿè´£UIçš„å‘ˆç°ï¼Œå®¹å™¨ç»„ä»¶è´Ÿè´£ç®¡ç†æ•°æ®å’Œé€»è¾‘ã€‚</p><p>&emsp;å¦‚æœä¸€ä¸ªç»„ä»¶æ—¢æœ‰UIåˆæœ‰ä¸šåŠ¡é€»è¾‘ï¼Œé‚£ä¹ˆåº”è¯¥å°†å®ƒæ‹†åˆ†ä¸ºä¸‹é¢çš„ç»“æ„ï¼šå¤–é¢æ˜¯ä¸€ä¸ªå®¹å™¨ç»„ä»¶ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªUIç»„ä»¶ã€‚å‰è€…è´Ÿè´£ä¸å¤–éƒ¨çš„é€šä¿¡ï¼Œå°†æ•°æ®ä¼ ç»™åè€…ï¼Œç”±åè€…æ¸²æŸ“å‡ºè¯•å›¾ã€‚</p><p>&emsp;React-Reduxè§„å®šï¼Œæ‰€æœ‰çš„UIç»„ä»¶ç”±ç”¨æˆ·æä¾›ï¼Œå®¹å™¨ç»„ä»¶åˆ™ç”±React-Reduxè‡ªåŠ¨ç”Ÿæˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·è´Ÿè´£è§†è§‰å±‚ï¼ŒçŠ¶æ€ç®¡ç†åˆ™æ˜¯å…¨éƒ¨äº¤ç»™å®ƒã€‚</p><h3 id="ä¸‰ã€connect"><a href="#ä¸‰ã€connect" class="headerlink" title="ä¸‰ã€connect()"></a>ä¸‰ã€connect()</h3><p>&emsp;React-Reduxæä¾›connectæ–¹æ³•ï¼Œç”¨äºä»UIç»„ä»¶ç”Ÿæˆå®¹å™¨ç»„ä»¶ã€‚ï¼ˆconnectçš„æ„æ€å°±æ˜¯å°†è¿™ä¸¤ç§ç»„ä»¶è¿èµ·æ¥ï¼‰</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;connect&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span><span class="hljs-keyword">const</span> VisibleTodoList = connect()(TodoList);<span class="hljs-comment">//TodoListæ˜¯UIç»„ä»¶ï¼ŒVisibleTodoListå°±æ˜¯é€šè¿‡connectæ–¹æ³•è‡ªåŠ¨ç”Ÿæˆçš„å®¹å™¨ç»„ä»¶</span></code></pre><p>&emsp;ä½†æ˜¯ç”±äºæ²¡æœ‰å®šä¹‰ä¸šåŠ¡é€»è¾‘ï¼Œä¸Šé¢è¿™ä¸ªå®¹å™¨ç»„ä»¶æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œåªæ˜¯UIç»„ä»¶çš„ä¸€ä¸ªå•çº¯çš„åŒ…è£…å±‚ã€‚ä¸ºäº†å®šä¹‰ä¸šåŠ¡é€»è¾‘ï¼Œéœ€è¦ç»™å‡ºä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li>ï¼ˆ1ï¼‰è¾“å…¥é€»è¾‘ï¼šå¤–éƒ¨çš„æ•°æ®ï¼ˆå³stateå¯¹è±¡ï¼‰å¦‚ä½•è½¬æ¢ä¸ºUIç»„ä»¶çš„å‚æ•°ã€‚</li><li>ï¼ˆ2ï¼‰è¾“å‡ºé€»è¾‘ï¼šç”¨æˆ·å‘å‡ºçš„åŠ¨ä½œå¦‚ä½•å˜ä¸ºActionå¯¹è±¡ï¼Œä»UIç»„ä»¶ä¼ å‡ºå»ã€‚</li></ul><p>&emsp;å› æ­¤ï¼Œconnectæ–¹æ³•çš„å®Œæ•´APIå¦‚ä¸‹ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;connect&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span>;<span class="hljs-keyword">const</span> VisibleTodoList = connect(    mapStateToProps,    mapDispatchToProps)(TodoList)</code></pre><p>&emsp;connectå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šmapStateToProps  å’Œ mapDispatchToPropsã€‚å®ƒä»¬å®šä¹‰äº†UIç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘ï¼šå‰è€…è´Ÿè´£è¾“å…¥é€»è¾‘ï¼Œå³å°†stateæ˜ å°„åˆ°UIç»„ä»¶çš„å‚æ•°ï¼ˆprops),åè€…è´Ÿè´£è¾“å‡ºé€»è¾‘ï¼Œå³å°†ç”¨æˆ·å¯¹UIç»„ä»¶çš„æ“ä½œæ˜ å°„ä¸ºActionå¯¹è±¡ã€‚</p><h3 id="å››ã€mapStateToProps"><a href="#å››ã€mapStateToProps" class="headerlink" title="å››ã€mapStateToProps()"></a>å››ã€mapStateToProps()</h3><p>&emsp; mapStateToPropsæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯åƒå®ƒçš„åå­—é‚£æ ·ï¼Œå»ºç«‹ä¸€ä¸ªä»ï¼ˆå¤–éƒ¨çš„ï¼‰stateå¯¹è±¡åˆ°ï¼ˆUIç»„ä»¶çš„ï¼‰propså¯¹è±¡çš„æ˜ å°„å…³ç³»ã€‚</p><p>&emsp;ä½œä¸ºå‡½æ•°ï¼ŒmapStateToPropsæ‰§è¡Œååº”è¯¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢çš„æ¯ä¸€ä¸ªé”®å€¼å¯¹å°±æ˜¯ä¸€ä¸ªæ˜ å°„ã€‚<br>ä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> mapStateToProps=<span class="hljs-function">(<span class="hljs-params">state</span>)=&gt;</span>&#123;    <span class="hljs-keyword">return</span> &#123;        <span class="hljs-comment">//todoså±æ€§ï¼Œä»£è¡¨UIç»„ä»¶çš„åŒåå±æ€§</span>        <span class="hljs-comment">//getVisibleTodoså¯ä»¥ä»stateç®—å‡ºtodosçš„å€¼</span>        todos: getVisibleTodos(state.todos,state.visibilityFilter)    &#125;&#125;<span class="hljs-comment">//getVisibleTodoså¯ä»¥ä»stateç®—å‡ºtodosçš„å€¼</span><span class="hljs-keyword">const</span> getVisibleTodos=<span class="hljs-function">(<span class="hljs-params">todos,filter</span>)=&gt;</span>&#123;    <span class="hljs-function"><span class="hljs-title">switch</span>(<span class="hljs-params">filter</span>)</span>&#123;        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;SHOW_ALL&#x27;</span>:            <span class="hljs-keyword">return</span> todos;        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;SHOW_COMPLETED&#x27;</span>:            <span class="hljs-keyword">return</span> todos.filter(<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span>t.completed);        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;SHOW_ACTIVE&#x27;</span>:            <span class="hljs-keyword">return</span> todos.filter(<span class="hljs-function"><span class="hljs-params">t</span>=&gt;</span>!t.completed);        <span class="hljs-keyword">default</span>:            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;Unknow filter:&#x27;</span>+filter)    &#125;&#125;</code></pre><p>&emsp;mapStateToProps ä¼šè®¢é˜…Store,æ¯å½“stateæ›´æ–°çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œé‡æ–°è®¡ç®—UIç»„ä»¶çš„å‚æ•°ï¼Œä»è€Œè§¦å‘UIç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p><p>&emsp;mapStateToProps çš„ç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯stateå¯¹è±¡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»£è¡¨å®¹å™¨ç»„ä»¶çš„propså¯¹è±¡ã€‚</p><pre><code class="hljs js"><span class="hljs-comment">//å®¹å™¨ç»„ä»¶çš„ä»£ç </span><span class="hljs-comment">// &lt;FilterLink filter=&#x27;SHOW_ALL&#x27;&gt;ALL&lt;/FilterLink&gt;</span><span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function">(<span class="hljs-params">state,ownProps</span>) =&gt;</span>&#123;    <span class="hljs-keyword">return</span> &#123;        active:ownProps.filter === state.visibilityFilter    &#125;&#125;</code></pre><p> &emsp;ä½¿ç”¨ownPropsä½œä¸ºå‚æ•°åï¼Œå¦‚æœå®¹å™¨ç»„ä»¶çš„å‚æ•°å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¼šå¼•èµ·UIç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p><p> &emsp;connectæ–¹æ³•å¯ä»¥çœç•¥mapStateToPropså‚æ•°ï¼Œé‚£æ ·çš„è¯UIç»„ä»¶å°±ä¸ä¼šè®¢é˜…Store, ä¹Ÿå°±æ˜¯è¯´Storeçš„æ›´æ–°ä¸ä¼šå¼•èµ·UIç»„ä»¶æ¸²æŸ“ã€‚</p><h3 id="äº”ã€mapDispatchToProps"><a href="#äº”ã€mapDispatchToProps" class="headerlink" title="äº”ã€mapDispatchToProps()"></a>äº”ã€mapDispatchToProps()</h3><p> &emsp;mapDispatchToProps æ˜¯connectå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥å»ºç«‹UIç»„ä»¶çš„å‚æ•°åˆ°Store.dispatchçš„æ˜ å°„ï¼Œå®ƒå®šä¹‰äº†å“ªäº›ç”¨æˆ·çš„æ“ä½œåº”è¯¥å½“ä½œActionï¼Œä¼ ç»™Storeã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p><p> &emsp;1ã€<strong>å¦‚æœmapDispatchToPropsæ˜¯ä¸€ä¸ªå‡½æ•°</strong>ï¼Œä¼šå¾—åˆ°dispatchå’ŒownProps(å®¹å™¨ç»„ä»¶çš„propså¯¹è±¡)ä¸¤ä¸ªå‚æ•°ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> mapDispatchToProps = (    dispatch,    ownProps) =&gt; &#123;    <span class="hljs-keyword">return</span> &#123;        onClick:<span class="hljs-function">()=&gt;</span>&#123;            dispatch(&#123;                type:<span class="hljs-string">&#x27;SET_VISIBILITY_FILTER&#x27;</span>,                filter:ownProps.filter            &#125;)        &#125;    &#125;&#125;</code></pre><p>&emsp;ä»ä¸Šè¿°ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼ŒmapispatchToPropsä½œä¸ºå‡½æ•°ï¼Œåº”è¯¥è¿”å›ä»¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„æ¯ä¸ªé”®å€¼å¯¹éƒ½æ˜¯ä¸€ä¸ªæ˜ å°„ï¼Œå®šä¹‰äº†UIç»„ä»¶çš„å‚æ•°æ€æ ·å‘å‡ºactionã€‚</p><p>&emsp;2ã€<strong>å¦‚æœmapDispatchToPropsæ˜¯ä¸€ä¸ªå¯¹è±¡</strong>ï¼Œå®ƒçš„æ¯ä¸ªé”®åä¹Ÿæ˜¯å¯¹åº”UIçš„åŒåå‚æ•°ï¼Œé”®å€¼åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼šè¢«å½“ä½œæ˜¯Action Creator,è¿”å›çš„Actionä¼šç”±Reduxè‡ªåŠ¨å‘å‡ºã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> mapDispatchToProps=&#123;    onClick:<span class="hljs-function">(<span class="hljs-params">filter</span>)=&gt;</span>&#123;        type:<span class="hljs-string">&#x27;SET_VISIBILITY_FILTER&#x27;</span>,        filter:filter    &#125;&#125;</code></pre><h3 id="å…­ã€Providerç»„ä»¶"><a href="#å…­ã€Providerç»„ä»¶" class="headerlink" title="å…­ã€Providerç»„ä»¶"></a>å…­ã€Providerç»„ä»¶</h3><p>&emsp;connectæ–¹æ³•ç”Ÿæˆå®¹å™¨ç»„ä»¶ä»¥åï¼Œéœ€è¦è®©å®¹å™¨ç»„ä»¶æ‹¿åˆ°stateå¯¹è±¡ï¼Œæ‰èƒ½ç”ŸæˆUIç»„ä»¶çš„å‚æ•°ã€‚ä¸€ç§è§£å†³æ–¹æ³•æ˜¯å°†stateå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œä¼ ç»™å®¹å™¨ç»„ä»¶ã€‚ä½†æ˜¯è¿™æ ·æ¯”è¾ƒéº»çƒ¦ï¼Œå°¤å…¶æ˜¯å®¹å™¨ç»„ä»¶åœ¨å¾ˆæ·±çš„å±‚çº§æ—¶ï¼Œä¸€çº§çº§å°†stateä¼ ä¸‹å»å°±å¾ˆéº»çƒ¦ã€‚</p><p>&emsp;React-Reduxæä¾›Providerç»„ä»¶ï¼Œå¯ä»¥è®©å®¹å™¨ç»„ä»¶æ‹¿åˆ°stateã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;Provider&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span>;<span class="hljs-keyword">import</span> &#123;createStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span>;<span class="hljs-keyword">import</span> todoApp <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./reducers&#x27;</span>;<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/App&#x27;</span>;<span class="hljs-keyword">let</span> store = createStore(todoApp);render(    &lt;Provider store=&#123;store&#125;&gt;        &lt;App /&gt;    &lt;/Provider&gt;,    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;root&#x27;</span>))</code></pre><p>&emsp;Provider åœ¨æ ¹ç»„ä»¶å¤–é¢åŒ…äº†ä¸€å±‚ï¼Œè¿™æ ·ä¸€æ¥ï¼ŒAppçš„æ‰€æœ‰å­ç»„ä»¶é»˜è®¤éƒ½å¯ä»¥æ‹¿åˆ°stateäº†ã€‚Providerçš„åŸç†æ—¶Reactç»„ä»¶çš„contextå±æ€§ã€‚<br>æºç ï¼š</p><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Provider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span></span>&#123;    <span class="hljs-function"><span class="hljs-title">getChildContext</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">return</span> &#123;            store:<span class="hljs-built_in">this</span>.props.store        &#125;    &#125;    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.props.children;    &#125;&#125;Provider.childContextTypes = &#123;    store:React.PropTypes.object&#125;</code></pre><p>&emsp;ä¸Šé¢ä»£ç ä¸­ï¼Œstoreæ”¾åœ¨äº†ä¸Šä¸‹æ–‡å¯¹è±¡contextä¸Šé¢ã€‚ç„¶åï¼Œå­ç»„ä»¶å°±å¯ä»¥ä»contextæ‹¿åˆ°storeã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VisibleTodoList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span></span>&#123;    <span class="hljs-function"><span class="hljs-title">componentDidMount</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">const</span> &#123;store&#125; = <span class="hljs-built_in">this</span>.context;        <span class="hljs-built_in">this</span>.unsubscribe=store.subscribe(<span class="hljs-function">()=&gt;</span>            <span class="hljs-built_in">this</span>.forceUpdate()        );    &#125;    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">const</span> props=<span class="hljs-built_in">this</span>.props;        <span class="hljs-keyword">const</span> &#123;store&#125;=<span class="hljs-built_in">this</span>.context;        <span class="hljs-keyword">const</span> state=store.getState();        <span class="hljs-comment">//...</span>    &#125;&#125;VisibleTodoList.contextTypes = &#123;    store:React.PropTypes.object&#125;</code></pre><p>React-Redux è‡ªåŠ¨ç”Ÿæˆçš„å®¹å™¨ç»„ä»¶çš„ä»£ç å°±æ˜¯ç±»ä¼¼äºä¸Šé¢è¿™æ ·ï¼Œæ‹¿åˆ°storeã€‚</p><h3 id="ä¸ƒã€React-Router-è·¯ç”±åº“"><a href="#ä¸ƒã€React-Router-è·¯ç”±åº“" class="headerlink" title="ä¸ƒã€React-Router è·¯ç”±åº“"></a>ä¸ƒã€React-Router è·¯ç”±åº“</h3><p>&emsp;ä½¿ç”¨React-Routerçš„é¡¹ç›®ï¼Œä¸å…¶ä»–é¡¹ç›®æ²¡æœ‰ä¸åŒä¹‹å¤„ï¼Œä¹Ÿæ˜¯ä½¿ç”¨Provideråœ¨Routerå¤–é¢åŒ…ä¸€å±‚ã€‚æ¯•ç«ŸProviderçš„å”¯ä¸€åŠŸèƒ½å°±æ˜¯ä¼ å…¥storeå¯¹è±¡ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> Root = <span class="hljs-function">(<span class="hljs-params">&#123;store&#125;</span>) =&gt;</span> (    &lt;Provider store=&#123;store&#125;&gt;        &lt;Router&gt;            &lt;Route path=<span class="hljs-string">&quot;/&quot;</span> component=&#123;App&#125; /&gt;        &lt;/Router&gt;    &lt;/Provider&gt;)</code></pre>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>11-reduxä¹‹ä¸­é—´ä»¶ä¸å¼‚æ­¥æ“ä½œ</title>
    <link href="/2020/11/16/11-redux%E4%B9%8B%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%B8%8E%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/"/>
    <url>/2020/11/16/11-redux%E4%B9%8B%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%B8%8E%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<p>ç¬¬10ç¯‡æ–‡ç« é‡Œï¼Œä»‹ç»äº†reduxçš„åŸºæœ¬åšæ³•ï¼šç”¨æˆ·å‘å‡ºAction, Reducerå‡½æ•°ç®—å‡ºæ–°çš„Stateï¼ŒViewé‡æ–°æ¸²æŸ“ã€‚<br><img src="https://pic.downk.cc/item/5fb26119b18d627113c52bcf.jpg"><br>ä½†æ˜¯å¼‚æ­¥æ“ä½œåº”è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼ŸActionå‘å‡ºä»¥åï¼ŒReducerç«‹å³ç®—å‡ºæ–°çš„State, è¿™å°±å«åšåŒæ­¥ï¼›Actionå‘å‡ºåï¼Œè¿‡ä¸€æ®µæ—¶é—´å†æ‰§è¡ŒReducer,è¿™å°±å«åšå¼‚æ­¥ã€‚<br>æ€ä¹ˆæ‰èƒ½è®©reduceråœ¨å¼‚æ­¥æ“ä½œç»“æŸåè‡ªåŠ¨æ‰§è¡Œå‘¢ï¼Ÿè¿™å°±è¦ç”¨åˆ°æ–°çš„å·¥å…·ï¼š <strong>ä¸­é—´ä»¶</strong>ï¼ˆmiddlewareï¼‰<br><img src="https://pic.downk.cc/item/5fb27135b18d627113c87d35.jpg"></p><h3 id="ä¸€ã€ä¸­é—´ä»¶çš„æ¦‚å¿µ"><a href="#ä¸€ã€ä¸­é—´ä»¶çš„æ¦‚å¿µ" class="headerlink" title="ä¸€ã€ä¸­é—´ä»¶çš„æ¦‚å¿µ"></a>ä¸€ã€ä¸­é—´ä»¶çš„æ¦‚å¿µ</h3><p>ä¸ºäº†è®©reduxå¯ä»¥è¿›è¡Œå¼‚æ­¥æ“ä½œï¼ŒåŠ¿å¿…è¦åœ¨reduxå·¥ä½œæµç¨‹ä¸­æ·»åŠ æ–°çš„åŠŸèƒ½ã€‚é‚£ä¹ˆåœ¨å“ªä¸ªç¯èŠ‚æ·»åŠ åˆé€‚å‘¢ï¼Ÿ</p><p>ï¼ˆ1ï¼‰Reducer: çº¯å‡½æ•°ï¼Œåªèƒ½æ‰¿æ‹…è®¡ç®—Stateçš„åŠŸèƒ½ï¼Œä¸é€‚åˆæ‰¿æ‹…å…¶ä»–åŠŸèƒ½ï¼Œä¹Ÿæ‰¿æ‹…ä¸äº†ã€‚å› ä¸ºç†è®ºä¸Šï¼Œçº¯å‡½æ•°ä¸èƒ½è¿›è¡Œè¯»å†™çš„æ“ä½œã€‚</p><p>ï¼ˆ2ï¼‰View: ä¸Stateä¸€ä¸€å¯¹åº”ï¼Œå¯ä»¥çœ‹ä½œæ˜¯Stateçš„è§†è§‰å±‚ï¼Œä¹Ÿä¸åˆé€‚æ‰¿æ‹…å…¶ä»–åŠŸèƒ½ã€‚</p><p>ï¼ˆ3ï¼‰Action: å­˜æ”¾æ•°æ®çš„å¯¹è±¡ï¼Œå³æ¶ˆæ¯çš„è½½ä½“ï¼Œåªèƒ½è¢«åˆ«äººæ“ä½œï¼Œè‡ªå·±ä¸èƒ½è¿›è¡Œä»»ä½•æ“ä½œã€‚</p><p>æƒ³æ¥æƒ³å»ï¼Œåªæœ‰å‘é€Actionçš„è¿™ä¸ªæ­¥éª¤ï¼Œå³Store.dispatch()è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ·»åŠ åŠŸèƒ½ã€‚<br>ä¸­é—´ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯¹store.dispatchæ–¹æ³•è¿›è¡Œäº†æ”¹é€ ï¼Œåœ¨å‘å‡ºActionå’Œæ‰§è¡ŒReducerè¿™ä¸¤æ­¥ä¹‹é—´ï¼Œæ·»åŠ äº†å…¶ä»–åŠŸèƒ½ã€‚</p><h3 id="äºŒã€ä¸­é—´ä»¶çš„ä½¿ç”¨"><a href="#äºŒã€ä¸­é—´ä»¶çš„ä½¿ç”¨" class="headerlink" title="äºŒã€ä¸­é—´ä»¶çš„ä½¿ç”¨"></a>äºŒã€ä¸­é—´ä»¶çš„ä½¿ç”¨</h3><p>å¸¸ç”¨çš„ä¸­é—´ä»¶éƒ½æ˜¯ç°æˆçš„ï¼Œåªæœ‰å¼•ç”¨åˆ«äººå†™å¥½çš„æ¨¡å—å°±è¡Œã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; applyMiddleware,createStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span>;<span class="hljs-keyword">import</span> createLogger <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux-logger&#x27;</span>;<span class="hljs-keyword">const</span> logger = createLogger();<span class="hljs-keyword">const</span> store = createStore(    reducer,    initialState, <span class="hljs-comment">//æ•´ä¸ªåº”ç”¨çš„åˆå§‹çŠ¶æ€</span>    applyMiddleware(logger))</code></pre><p>ğŸ–ï¼šä¸­é—´ä»¶çš„æ¬¡åºæœ‰è®²ç©¶ã€‚æœ‰çš„ä¸­é—´ä»¶æœ‰æ¬¡åºè¦æ±‚ï¼Œæ¯”å¦‚loggerå°±ä¸€å®šæ”¾åœ¨æœ€åï¼Œå¦åˆ™è¾“å‡ºç»“æœä¼šä¸æ­£ç¡®ã€‚ä½¿ç”¨å‰è¦æŸ¥é˜…ç›¸å…³æ–‡æ¡£</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> store = createStore(    reducer,    appltMiddleware(thunk,promise,logger)    <span class="hljs-comment">//è¿™é‡Œæ˜¯ç”¨äº†ä¸‰ä¸ªä¸­é—´ä»¶</span>)</code></pre><p>==applyMiddlewares()ï¼š== applyMiddlewaresæ˜¯Reduxçš„åŸç”Ÿæ–¹æ³•ï¼Œä½œç”¨æ˜¯å°†æ‰€æœ‰ä¸­é—´ä»¶ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¾æ¬¡æ‰§è¡Œã€‚</p><h3 id="ä¸‰ã€å¼‚æ­¥æ“ä½œçš„åŸºæœ¬æ€è·¯"><a href="#ä¸‰ã€å¼‚æ­¥æ“ä½œçš„åŸºæœ¬æ€è·¯" class="headerlink" title="ä¸‰ã€å¼‚æ­¥æ“ä½œçš„åŸºæœ¬æ€è·¯"></a>ä¸‰ã€å¼‚æ­¥æ“ä½œçš„åŸºæœ¬æ€è·¯</h3><p>åŒæ­¥æ“ä½œåªè¦å‘å‡ºä¸€ç§Actionå³å¯ï¼Œå¼‚æ­¥æ“ä½œçš„å·®åˆ«æ˜¯å®ƒè¦å‘å‡ºä¸‰ç§Action:</p><ul><li>æ“ä½œå‘èµ·æ—¶çš„Action</li><li>æ“ä½œæˆåŠŸæ—¶çš„Action</li><li>æ“ä½œå¤±è´¥æ—¶çš„Action</li></ul><p>ä»¥æœåŠ¡å™¨å–å‡ºæ•°æ®ä¸ºä¾‹ï¼Œä¸‰ç§Actionå¯ä»¥æœ‰ä¸¤ç§å†™æ³•ï¼š</p><pre><code class="hljs js"><span class="hljs-comment">//å†™æ³•ä¸€ï¼šåç§°ç›¸åŒï¼Œå‚æ•°ä¸åŒ</span>&#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;FETCH_POSTS&#x27;</span>&#125;&#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;FETCH_POSTS&#x27;</span>,<span class="hljs-attr">status</span>:<span class="hljs-string">&#x27;error&#x27;</span>,<span class="hljs-attr">error</span>:<span class="hljs-string">&#x27;OoPS&#x27;</span>&#125;&#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;FETCH_POSTS&#x27;</span>,<span class="hljs-attr">status</span>:<span class="hljs-string">&#x27;success&#x27;</span>,<span class="hljs-attr">response</span>:&#123;...&#125; &#125;<span class="hljs-comment">//å†™æ³•äºŒï¼šåç§°ä¸åŒ</span>&#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;FETCH_POSTS_REQUEST&#x27;</span>&#125;&#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;FETCH_POSTS_FAILURE&#x27;</span>,<span class="hljs-attr">error</span>:<span class="hljs-string">&#x27;Oops&#x27;</span>&#125;&#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;FETCH_POSTS_SUCCESS&#x27;</span>,<span class="hljs-attr">response</span>:&#123;...&#125;&#125;</code></pre><p>é™¤äº†Actionç§ç±»ä¸åŒï¼Œå¼‚æ­¥æ“ä½œçš„Stateä¹Ÿè¦è¿›è¡Œæ”¹é€ ï¼Œåæ˜ ä¸åŒçš„æ“ä½œçŠ¶æ€ã€‚<br>ä¾‹å­ï¼š</p><pre><code class="hljs js"><span class="hljs-keyword">let</span> state=&#123;    <span class="hljs-comment">//...</span>    isFetching:<span class="hljs-literal">true</span>, <span class="hljs-comment">//æ˜¯å¦æ­£åœ¨æŠ“å–æ•°æ®</span>    didInvalidate:<span class="hljs-literal">true</span>,<span class="hljs-comment">//æ˜¯å¦è¶…æ—¶</span>    lastUpdated:<span class="hljs-string">&#x27;xxxx&#x27;</span><span class="hljs-comment">//ä¸Šä¸€æ¬¡æ›´æ–°æ—¶é—´</span>&#125;</code></pre><p>ç°åœ¨ï¼Œæ•´ä¸ªå¼‚æ­¥æ“ä½œçš„æ€è·¯å°±æ¯”è¾ƒæ¸…æ™°äº†</p><ul><li>1.æ“ä½œå¼€å§‹æ—¶ï¼Œå‘é€ä¸€ä¸ªAction,è§¦å‘State æ›´æ–°ä¸ºâ€œæ­£åœ¨æ“ä½œâ€çŠ¶æ€ï¼ŒViewé‡æ–°æ¸²æŸ“</li><li>2.æ“ä½œç»“æŸåï¼Œå†é€å‡ºä¸€ä¸ªAction,è§¦å‘State æ›´æ–°ä¸ºâ€œæ“ä½œç»“æŸâ€çŠ¶æ€ï¼ŒViewå†æ¬¡é‡æ–°æ¸²æŸ“ã€‚</li></ul><h3 id="å››ã€redux-thunkä¸­é—´ä»¶"><a href="#å››ã€redux-thunkä¸­é—´ä»¶" class="headerlink" title="å››ã€redux-thunkä¸­é—´ä»¶"></a>å››ã€redux-thunkä¸­é—´ä»¶</h3><p>å¼‚æ­¥æ“ä½œè‡³å°‘è¦å‘ä¸¤ä¸ªActionï¼šç”¨æˆ·è§¦å‘ç¬¬ä¸€ä¸ªAction,è¿™ä¸ªè·ŸåŒæ­¥æ“ä½œä¸€æ ·æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ï¼Œå¦‚ä½•æ‰èƒ½å†æ“ä½œç»“æŸæ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨é€å‡ºç¬¬äºŒä¸ªActionå‘¢ï¼Ÿ</p><p>è¿™ä¸ªå¥¥å¦™åœ¨äºAction Creatorä¹‹ä¸­ã€‚</p><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AsyncApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span></span>&#123;    <span class="hljs-comment">//åŠ è½½æˆåŠŸåï¼Œ</span>    <span class="hljs-function"><span class="hljs-title">componentDidMount</span>(<span class="hljs-params"></span>)</span>&#123;        <span class="hljs-keyword">const</span> &#123;dispatch,selectedPost&#125;=<span class="hljs-built_in">this</span>.props;        <span class="hljs-comment">//å‘é€ä¸€ä¸ªAction,å‘æœåŠ¡å™¨è¦æ•°æ®</span>        <span class="hljs-comment">//è¿™é‡Œçš„fetchPosts()å‡½æ•°å°±æ˜¯Action Creator</span>        dispatch(fetchPosts(selectedPost));    &#125;&#125;</code></pre><p>ä¸‹é¢å°±æ˜¯fetchPostsçš„ä»£ç </p><pre><code class="hljs js"><span class="hljs-keyword">const</span> fetchPosts = <span class="hljs-function"><span class="hljs-params">postTitle</span> =&gt;</span><span class="hljs-function">(<span class="hljs-params">dispatch,getState</span>)=&gt;</span>&#123;    <span class="hljs-comment">//1.å…ˆå‘å‡ºä¸€ä¸ªAction</span>    dispatch(requestPosts(postTitle));    <span class="hljs-comment">//2.è¿›è¡Œå¼‚æ­¥æ“ä½œ</span>    <span class="hljs-keyword">return</span> fetch(<span class="hljs-string">&#x27;/some/API/$&#123;postTitle&#125;.json&#x27;</span>)        <span class="hljs-comment">//3.æ‹¿åˆ°ç»“æœï¼Œå°†ç»“æœè½¬æ¢ä¸ºJSONæ ¼å¼</span>        .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.json())        <span class="hljs-comment">//4.å†å‘å‡ºä¸€ä¸ªAction</span>        .then(<span class="hljs-function"><span class="hljs-params">json</span> =&gt;</span> dispatch(receivePosts(postTitle,json)))&#125;</code></pre><p>ğŸ–ï¼š</p><ul><li>fetchPosts è¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œè€Œæ™®é€šçš„Action Creatorè¿”å›ä¸€ä¸ªActionå¯¹è±¡</li><li>fetchPosts è¿”å›çš„å‡½æ•°å…¥å‚æ—¶dispatchå’ŒgetStateè¿™ä¸¤ä¸ªreduxæ–¹æ³•ï¼Œæ™®é€šçš„Action Creatorçš„å‚æ•°æ˜¯Actionçš„å†…å®¹ã€‚</li><li>åœ¨è¿”å›çš„å‡½æ•°ä¸­ï¼Œå…ˆå‘å‡ºä¸€ä¸ªActionï¼ˆrequestPosts(postTitle)ï¼‰ï¼Œè¡¨ç¤ºæ“ä½œå¼€å§‹</li><li>å¼‚æ­¥æ“ä½œç»“æŸä¹‹åï¼Œåˆå‘å‡ºä¸€ä¸ªActionï¼ˆreceivePosts(postTitle,json)ï¼‰ï¼Œè¡¨ç¤ºæ“ä½œç»“æŸã€‚</li></ul><p>è¿™æ ·çš„å¤„ç†ï¼Œè§£å†³äº†å¼‚æ­¥æ“ä½œä¸­éœ€è¦è‡ªåŠ¨å‘å‡ºç¬¬äºŒä¸ªActionçš„é—®é¢˜ï¼Œä½†æ˜¯ï¼ŒActionæ˜¯ç”±store.dispatchæ–¹æ³•å‘å‡ºçš„ï¼Œè€Œè¿™ä¸ªæ–¹æ³•æ­£å¸¸æƒ…å†µä¸‹ï¼Œå…¥å‚åªèƒ½æ˜¯å¯¹è±¡è€Œä¸èƒ½æ˜¯å‡½æ•°ã€‚<br>====&gt; è¿™æ—¶ï¼Œå°±éœ€è¦ä¸­é—´ä»¶redux-think</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span>;<span class="hljs-keyword">import</span> thunk <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux-thunk&#x27;</span>;<span class="hljs-keyword">import</span> reducer <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./reducers&#x27;</span>;<span class="hljs-comment">// Note: this API requires redux@&gt;=3.1.0</span><span class="hljs-keyword">const</span> store = createStore(  reducer,  applyMiddleware(thunk));</code></pre><p>ä¸Šé¢ä»£ç ä½¿ç”¨redux-thunk,æ”¹é€ store.dispatch,ä½¿å¾—åè€…å¯ä»¥æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°ã€‚</p><p>å› æ­¤ï¼Œå¼‚æ­¥æ“ä½œçš„ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼šå†™ä¸€ä¸ªè¿”å›å‡½æ•°çš„Action Creator,ç„¶åä½¿ç”¨redux-thunk ä¸­é—´ä»¶æ”¹é€ store.dispatch.</p><h3 id="äº”ã€redux-promiseä¸­é—´ä»¶"><a href="#äº”ã€redux-promiseä¸­é—´ä»¶" class="headerlink" title="äº”ã€redux-promiseä¸­é—´ä»¶"></a>äº”ã€redux-promiseä¸­é—´ä»¶</h3><p>&emsp;æ—¢ç„¶Action Creator å¯ä»¥è¿”å›å‡½æ•°ï¼Œå½“ç„¶ä¹Ÿå¯è¿”å›å…¶ä»–å€¼ã€‚æ‰€ä»¥å¦ä¸€ç§å¼‚æ­¥æ“ä½œçš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ï¼Œè®©Action Creatorè¿”å›ä¸€ä¸ªPromiseå¯¹è±¡.</p><p>&emsp;è¿™å°±éœ€è¦ä½¿ç”¨redux-promiseä¸­é—´ä»¶ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;createStore,applyMiddleware&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span>;<span class="hljs-keyword">import</span> promiseMiddleware <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux-promise&#x27;</span>;<span class="hljs-keyword">import</span> reducer <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./reducers&#x27;</span>;<span class="hljs-comment">//è¿™æ—¶Action Creatoræœ‰ä¸¤ç§å†™æ³•ï¼Œ</span><span class="hljs-comment">//1.è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡</span><span class="hljs-keyword">const</span> fetchPosts=<span class="hljs-function">(<span class="hljs-params">dispatch,postTitle</span>)=&gt;</span><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve,reject</span>)</span>&#123;    dispatch(requestPosts(postTitle));    <span class="hljs-keyword">return</span> fetch(<span class="hljs-string">&#x27;/some/API/$&#123;postTitle&#125;.json)</span><span class="hljs-string">        .then(response=&gt;&#123;</span><span class="hljs-string">            type:&#x27;</span>FETCH_POSTS<span class="hljs-string">&#x27;,</span><span class="hljs-string">            payload:response.json()</span><span class="hljs-string">        &#125;)</span><span class="hljs-string">&#125;)</span><span class="hljs-string"></span><span class="hljs-string">//2.Actionå¯¹è±¡çš„payloadå±æ€§æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œ</span><span class="hljs-string">// è¿™æ—¶éœ€è¦ä»redux-actionsæ¨¡å—å¼•å…¥createActionæ–¹æ³•</span></code></pre><p>å‚è€ƒæ–‡ç« ï¼š<a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_two_async_operations.html">é˜®ä¸€å³°reduxæ•™ç¨‹</a></p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>010-çŠ¶æ€ç®¡ç†åº“Redux</title>
    <link href="/2020/11/16/010-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93Redux/"/>
    <url>/2020/11/16/010-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93Redux/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€Reactä¸ºä½•éœ€è¦çŠ¶æ€ç®¡ç†åº“"><a href="#ä¸€ã€Reactä¸ºä½•éœ€è¦çŠ¶æ€ç®¡ç†åº“" class="headerlink" title="ä¸€ã€Reactä¸ºä½•éœ€è¦çŠ¶æ€ç®¡ç†åº“"></a>ä¸€ã€Reactä¸ºä½•éœ€è¦çŠ¶æ€ç®¡ç†åº“</h3><p><img src="https://i.bmp.ovh/imgs/2020/11/26a4726bd6216f11.png"></p><p><img src="https://i.bmp.ovh/imgs/2020/11/8ed5fe88ed497e9c.png"><br>ç»„ä»¶ä¹‹é—´é€šä¿¡éå¸¸éº»çƒ¦ï¼Œæœ‰äº†reduxæŠŠçŠ¶æ€å•ç‹¬æ‹§å‡ºæ¥ï¼Œç»„ä»¶é€šä¿¡å°±å˜å¾—ç®€å•äº†ã€‚</p><p>Reduxçš„ç‰¹æ€§ï¼š</p><ul><li><strong>1ã€Single Source of Truth</strong></li></ul><p>&emsp;ä¼ ç»Ÿçš„MVCæ¶æ„ï¼šä¸€ä¸ªviewå¯èƒ½å¯¹åº”å¤šä¸ªmodel,ä¸€ä¸ªmodelä¹Ÿå¯èƒ½å¯¹åº”å¤šä¸ªview,å…³ç³»é”™ç»¼å¤æ‚ï¼Œè¿™æ ·ä¸€æ—¦å‡ºç°é”™è¯¯å¾ˆéš¾è¿½è¸ªã€‚<br><img src="https://i.bmp.ovh/imgs/2020/11/5a9cb384b94cc272.png"></p><p>&emsp;Reduxçš„ç»“æ„ï¼šåªæœ‰ä¸€ä¸ªStore,å‡ºç°é”™è¯¯å®¹æ˜“è¿½è¸ªã€‚</p><p><img src="https://i.bmp.ovh/imgs/2020/11/fbb96f01a9c20437.png"></p><ul><li><p><strong>2ã€å¯é¢„æµ‹æ€§</strong> ï¼ˆä¸å¯å˜æ€§immutableï¼‰</p><p><img src="https://i.bmp.ovh/imgs/2020/11/4753506caf528c03.png"></p></li><li><p><strong>3ã€çº¯å‡½æ•°æ›´æ–°State</strong></p></li></ul><p>&emsp;&emsp;reduxæ²¡æœ‰å‰¯ä½œç”¨.<br><img src="https://i.bmp.ovh/imgs/2020/11/17c05a6f634a7eaf.png"></p><h3 id="äºŒã€ç†è§£Reduxçš„æ ¸å¿ƒæ¦‚å¿µï¼šStore-Action-Reducer"><a href="#äºŒã€ç†è§£Reduxçš„æ ¸å¿ƒæ¦‚å¿µï¼šStore-Action-Reducer" class="headerlink" title="äºŒã€ç†è§£Reduxçš„æ ¸å¿ƒæ¦‚å¿µï¼šStore, Action,Reducer"></a>äºŒã€ç†è§£Reduxçš„æ ¸å¿ƒæ¦‚å¿µï¼šStore, Action,Reducer</h3><p><strong>1.ç†è§£Store:</strong><br><img src="https://i.bmp.ovh/imgs/2020/11/bc6be7d1bc1deaf2.png"></p><p>Storeå°±æ˜¯ä¿å­˜æ•°æ®çš„åœ°æ–¹ï¼Œå¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ä¸ªå®¹å™¨ã€‚æ•´ä¸ªåº”ç”¨åªèƒ½æœ‰ä¸€ä¸ªStoreã€‚<br>Reduxæä¾›<strong>createStore</strong>è¿™ä¸ªå‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆStoreã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;createStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span>;<span class="hljs-comment">//createStoreæ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›æ–°ç”Ÿæˆçš„storeå¯¹è±¡ã€‚</span><span class="hljs-keyword">const</span> store = createStore(fn);</code></pre><p><strong>==State:==</strong> &emsp;Storeå¯¹è±¡åŒ…å«æ‰€æœ‰æ•°æ®ï¼Œå¦‚æœæƒ³å¾—åˆ°æŸä¸ªæ—¶ç‚¹çš„æ•°æ®ï¼Œå°±è¦å¯¹Storeç”Ÿæˆå¿«ç…§ã€‚è¿™ç§æ—¶ç‚¹çš„æ•°æ®é›†åˆï¼Œå°±å«åšStateã€‚<br>å½“å‰æ—¶åˆ»çš„State,å¯ä»¥é€šè¿‡ store.getState() æ‹¿åˆ°ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;createStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span>;<span class="hljs-keyword">const</span> store = createStore(fn);<span class="hljs-keyword">const</span> state = store.getState();</code></pre><p>reduxè§„å®šï¼Œ<strong>ä¸€ä¸ªstateå¯¹åº”ä¸€ä¸ªview</strong>ã€‚åªè¦stateç›¸åŒï¼Œviewå°±ç›¸åŒã€‚çŸ¥é“äº†State,å°±çŸ¥é“äº†Viewæ˜¯ä»€ä¹ˆæ ·ï¼Œåä¹‹äº¦ç„¶ã€‚</p><p><strong>2.ç†è§£Action:</strong></p><p>&emsp;Stateçš„å˜åŒ–ï¼Œä¼šå¯¼è‡´viewçš„å˜åŒ–ã€‚ä½†æ˜¯ï¼Œç”¨æˆ·æ¥è§¦ä¸åˆ°State,åªèƒ½æ¥è§¦åˆ°viewã€‚æ‰€ä»¥ï¼ŒStateçš„å˜åŒ–å¿…é¡»æ˜¯viewå¯¼è‡´çš„ã€‚Actionå°±æ˜¯viewå‘å‡ºçš„é€šçŸ¥ï¼Œæ ‡è¯†Stateåº”è¯¥è¦å˜åŒ–äº†ã€‚</p><p>&emsp;Actionæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­çš„typeå±æ€§æ˜¯å¿…é¡»çš„ï¼Œæ ‡è¯†Actionçš„åç§°ã€‚å…¶ä»–å±æ€§å¯ä»¥è‡ªç”±è®¾ç½®ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> action = &#123;  type:<span class="hljs-string">&#x27;ADD_TODO&#x27;</span>,  payload:<span class="hljs-string">&#x27;learn redux&#x27;</span>&#125;</code></pre><p>ä¸Šè¿°ä»£ç ä¸­ï¼ŒActionçš„åç§°æ˜¯ADD_TODOï¼Œå®ƒæºå¸¦çš„ä¿¡æ¯æ˜¯å­—ç¬¦ä¸² learn redux.</p><p>å¯ä»¥è¿™ä¹ˆç†è§£ï¼ŒActionæè¿°å½“å‰å‘ç”Ÿçš„äº‹æƒ…ã€‚æ”¹å˜Stateçš„å”¯ä¸€æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨Actionã€‚å®ƒä¼šè¿é€æ•°æ®ç»™Storeã€‚</p><p><strong>Action Creator:</strong><br>Viewè¦å‘ç”Ÿå¤šå°‘ç§æ¶ˆæ¯ï¼Œå°±ä¼šæœ‰å¤šå°‘ç§Action.å¦‚æœéƒ½æ‰‹å†™ï¼Œä¼šå¾ˆéº»çƒ¦ã€‚æ‰€ä»¥ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ç”¨æ¥ç”ŸæˆAction,è¿™ä¸ªå‡½æ•°å°±å« Action Creator</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> ADD_TODO = <span class="hljs-string">&#x27;æ·»åŠ TODO&#x27;</span>;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addTodo</span>(<span class="hljs-params">text</span>)</span>&#123;  <span class="hljs-keyword">return</span> &#123;    type:ADD_TODO,    text  &#125;&#125;<span class="hljs-keyword">const</span> action=addTodo(<span class="hljs-string">&#x27;learn redux&#x27;</span>)<span class="hljs-string">``</span><span class="hljs-string">` </span><span class="hljs-string">ä¸Šé¢ä»£ç ä¸­ï¼ŒaddTodoå‡½æ•°å°±æ˜¯ä¸€ä¸ªAction Creator</span><span class="hljs-string"></span><span class="hljs-string">**store.dispatch():**</span><span class="hljs-string">store.dispatch()æ˜¯Viewå‘å‡ºActionçš„å”¯ä¸€æ–¹æ³•ã€‚</span><span class="hljs-string">`</span><span class="hljs-string">``</span>js<span class="hljs-keyword">import</span> &#123;createStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span>;<span class="hljs-keyword">const</span> store = createStore(fn);store.dispatch(&#123;  type:<span class="hljs-string">&#x27;ADD_TODO&#x27;</span>,  payload:<span class="hljs-string">&#x27;learn redux&#x27;</span>&#125;)</code></pre><p>ç»“åˆ Action Crreator,è¿™æ®µä»£ç å¯ä»¥æ”¹å†™å¦‚ä¸‹ï¼š</p><pre><code class="hljs js">store.dispatch(addTodo(<span class="hljs-string">&#x27;learn redux&#x27;</span>));</code></pre><p><strong>3.ç†è§£Reducerï¼š</strong></p><p>Storeåœ¨æ”¶åˆ°Actionä¹‹åï¼Œå¿…é¡»ç»™å‡ºä¸€ä¸ªæ–°çš„State,è¿™æ ·Viewæ‰ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™ç§Stateçš„è®¡ç®—è¿‡ç¨‹ï¼Œå°±å«åš Reducerã€‚</p><p>Reduceræ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—Actionå’Œå½“å‰çš„State,è¿”å›ä¸€ä¸ªæ–°çš„Stateã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> reducer = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">state,action</span>)</span>&#123;  <span class="hljs-comment">//...</span>  <span class="hljs-keyword">return</span> new_state;&#125;</code></pre><p>æ•´ä¸ªåº”ç”¨çš„åˆå§‹çŠ¶æ€ï¼Œå¯ä»¥ä½œä¸ºStateçš„é»˜è®¤å€¼ï¼Œä¸‹é¢å°±æ˜¯ä¸€ä¸ªå®é™…çš„ä¾‹å­ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> defaultState=<span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> reducer = <span class="hljs-function">(<span class="hljs-params">state=defaultState,action</span>)=&gt;</span>&#123;  <span class="hljs-function"><span class="hljs-title">switch</span>(<span class="hljs-params">action.type</span>)</span>&#123;    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;ADD&#x27;</span>:      <span class="hljs-keyword">return</span> state + action.payload;    <span class="hljs-keyword">default</span>:      <span class="hljs-keyword">return</span> state;  &#125;&#125;;<span class="hljs-keyword">const</span> state=reducer(<span class="hljs-number">1</span>,&#123;  type:<span class="hljs-string">&#x27;ADD&#x27;</span>,  payload:<span class="hljs-number">2</span>&#125;)</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œreducerå‡½æ•°æ¥æ”¶åˆ°ä¸€ä¸ªåä¸ºADDçš„actionä»¥åï¼Œå°±è¿”å›ä¸€ä¸ªæ–°çš„Stateã€‚<br>å®é™…åº”ç”¨ä¸­ï¼ŒReducerä¸éœ€è¦åƒä¸Šé¢è¿™æ ·æ‰‹åŠ¨è°ƒç”¨ï¼Œstore.dispatchæ–¹æ³•ä¼šè§¦å‘reducerçš„è‡ªåŠ¨æ‰§è¡Œã€‚ä¸ºæ­¤ï¼ŒStoreéœ€è¦çŸ¥é“reducerå‡½æ•°ï¼Œåšæ³•å°±æ˜¯åœ¨ç”ŸæˆStoreçš„æ—¶å€™ï¼Œå°±å°†reducerä¼ å…¥ç»™createStoreæ–¹æ³•ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;createStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span>;<span class="hljs-keyword">const</span> store = createStore(reducer);<span class="hljs-comment">//ä»¥åæ¯å½“store.dispatchå‘é€è¿‡æ¥ä¸€ä¸ªæ–°çš„Action,</span><span class="hljs-comment">//å°±ä¼šè‡ªåŠ¨è°ƒç”¨Reducerï¼Œå¾—åˆ°æ–°çš„State</span></code></pre><p>ğŸ–ä¸ºä»€ä¹ˆè¿™ä¸ªå‡½æ•°è¢«å«åšReducerå‘¢ï¼Ÿ<br>âœ¨å› ä¸ºå®ƒå¯ä»¥ä½œä¸ºæ•°ç»„çš„reduceæ–¹æ³•çš„å‚æ•°ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œä¸€ç³»åˆ—çš„Actionå¯¹è±¡æŒ‰ç…§é¡ºåºä½œä¸ºä¸€ä¸ªæ•°ç»„ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> actions = [  &#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;ADD&#x27;</span>,<span class="hljs-attr">payload</span>:<span class="hljs-number">0</span>&#125;,  &#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;ADD&#x27;</span>,<span class="hljs-attr">payload</span>:<span class="hljs-number">1</span>&#125;,  &#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;ADD&#x27;</span>,<span class="hljs-attr">payload</span>:<span class="hljs-number">2</span>&#125;];<span class="hljs-keyword">const</span> total = actions.reduce(reducer,<span class="hljs-number">0</span>)<span class="hljs-comment">//3</span></code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„actionsè¡¨ç¤ºä¾æ¬¡æœ‰ä¸‰ä¸ª Actionï¼Œåˆ†åˆ«æ˜¯åŠ 0ã€åŠ 1å’ŒåŠ 2ã€‚æ•°ç»„çš„reduceæ–¹æ³•æ¥å— Reducer å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå°±å¯ä»¥ç›´æ¥å¾—åˆ°æœ€ç»ˆçš„çŠ¶æ€3ã€‚ </p><p><img src="https://i.bmp.ovh/imgs/2020/11/43ed9499a953d590.png"></p><p><strong>Reducerå‡½æ•°æœ€é‡è¦çš„ç‰¹å¾æ˜¯:å®ƒæ˜¯ä¸€ä¸ªçº¯å‡½æ•°ã€‚</strong><br>==çº¯å‡½æ•°==ï¼š çº¯å‡½æ•°æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µï¼Œå¿…é¡»éµå®ˆä»¥ä¸‹ä¸€äº›çº¦æŸã€‚</p><ul><li>ä¸å¾—æ”¹å†™å‚æ•°</li><li>ä¸èƒ½è°ƒç”¨ç³»ç»Ÿ I/Oçš„API</li><li>ä¸èƒ½è°ƒç”¨Date.now()æˆ–è€…Math.randomç­‰ä¸çº¯çš„æ–¹æ³•ï¼Œå› ä¸ºæ¯æ¬¡éƒ½ä¼šå¾—åˆ°ä¸ä¸€æ ·çš„ç»“æœã€‚</li></ul><p>ç”±äºReduceræ˜¯çº¯å‡½æ•°ï¼Œå°±å¯ä»¥ä¿è¯åŒæ ·çš„Stateå¿…å®šå¾—åˆ°åŒæ ·çš„Viewã€‚ä½†ä¹Ÿæ­£å› ä¸ºè¿™ä¸€ç‚¹ï¼ŒReducerå‡½æ•°é‡Œé¢ä¸èƒ½æ”¹å˜Stateï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬å¸¸é‡‡ç”¨ æ‹“å±•è¿ç®—ç¬¦â€¦å’ŒObject.assign()å¯¹stateè¿›è¡Œæ›´æ–°ã€‚(æœ€å¥½æŠŠStateå¯¹è±¡è®¾ä¸ºåªè¯»)</p><pre><code class="hljs js"><span class="hljs-comment">//1.stateæ˜¯ä¸€ä¸ªå¯¹è±¡</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reducer</span>(<span class="hljs-params">state,action</span>)</span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.assign(&#123;&#125;,state,&#123;thingTochange&#125;);  <span class="hljs-comment">//æˆ–è€…</span>  <span class="hljs-keyword">return</span> &#123;...state,...newState&#125;;&#125;<span class="hljs-comment">//2.stateæ˜¯ä¸€ä¸ªæ•°ç»„</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reducer</span>(<span class="hljs-params">state,action</span>)</span>&#123;  <span class="hljs-keyword">return</span> [...state,newItem]&#125;</code></pre><p>ä¸‹å›¾ç»¼åˆç†è§£è¿™ä¸‰ä¸ªæ¦‚å¿µï¼Œå¯ä»¥çœ‹å‡ºreduxçš„å•å‘æ•°æ®æµåŠ¨ã€‚<br><img src="https://i.bmp.ovh/imgs/2020/11/9fceb4adcb97b639.png"></p><h3 id="ä¸‰ã€reduxçš„å‡ ä¸ªå·¥å…·å‡½æ•°"><a href="#ä¸‰ã€reduxçš„å‡ ä¸ªå·¥å…·å‡½æ•°" class="headerlink" title="ä¸‰ã€reduxçš„å‡ ä¸ªå·¥å…·å‡½æ•°"></a>ä¸‰ã€reduxçš„å‡ ä¸ªå·¥å…·å‡½æ•°</h3><p><strong>1.combineReducers:</strong></p><p>å°†å¤šä¸ªreducerç»“åˆèµ·æ¥å½¢æˆæ–°çš„reducerã€‚</p><p><img src="https://pic.downk.cc/item/5fb1ddf2b18d627113a841a0.jpg"></p><p><strong>2.bindActionCreators:</strong></p><p><img src="https://pic.downk.cc/item/5fb1de1eb18d627113a848fb.jpg"></p><p><img src="https://pic.downk.cc/item/5fb1de6fb18d627113a8563c.jpg"></p><h3 id="å››ã€åœ¨Reactä¸­ä½¿ç”¨Redux"><a href="#å››ã€åœ¨Reactä¸­ä½¿ç”¨Redux" class="headerlink" title="å››ã€åœ¨Reactä¸­ä½¿ç”¨Redux"></a>å››ã€åœ¨Reactä¸­ä½¿ç”¨Redux</h3><p>reduxæä¾›äº†ä¸€ä¸ª<strong>react-redux</strong>çš„packageï¼Œç”¨connectæŠŠä¸€ä¸ªå·²æœ‰çš„ç»„ä»¶è¿æ¥åˆ°storeä¸Šã€‚</p><p><img src="https://pic.downk.cc/item/5fb1e29cb18d627113a9146f.jpg"></p><p><img src="https://pic.downk.cc/item/5fb1e356b18d627113a93618.jpg"></p><h3 id="äº”ã€ç†è§£Reduxçš„å¼‚æ­¥actionä»¥åŠä¸­é—´ä»¶"><a href="#äº”ã€ç†è§£Reduxçš„å¼‚æ­¥actionä»¥åŠä¸­é—´ä»¶" class="headerlink" title="äº”ã€ç†è§£Reduxçš„å¼‚æ­¥actionä»¥åŠä¸­é—´ä»¶"></a>äº”ã€ç†è§£Reduxçš„å¼‚æ­¥actionä»¥åŠä¸­é—´ä»¶</h3><p>ä¸­é—´ä»¶æˆªè·åå»è®¿é—®ä¸€ä¸ªAPIï¼Œæ ¹æ®è®¿é—®çš„ç»“æœå†dispatch.</p><p><img src="https://pic.downk.cc/item/5fb1eab2b18d627113aabab1.jpg"></p><p>å¼‚æ­¥çš„actionå¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„actionç±»å‹, è€Œæ˜¯å‡ ä¸ªåŒæ­¥actionçš„ç»„åˆä½¿ç”¨.</p><p><img src="https://pic.downk.cc/item/5fb1eb4eb18d627113aae915.jpg"></p><p><img src="https://pic.downk.cc/item/5fb1ecf0b18d627113ab5f8a.jpg"></p><h3 id="å…­ã€å¦‚ä½•åœ¨reduxä¸­ç»„ç»‡Actionå’ŒReducer"><a href="#å…­ã€å¦‚ä½•åœ¨reduxä¸­ç»„ç»‡Actionå’ŒReducer" class="headerlink" title="å…­ã€å¦‚ä½•åœ¨reduxä¸­ç»„ç»‡Actionå’ŒReducer"></a>å…­ã€å¦‚ä½•åœ¨reduxä¸­ç»„ç»‡Actionå’ŒReducer</h3><p><img src="https://pic.downk.cc/item/5fb1ede4b18d627113ab90f7.jpg"></p><p><img src="https://pic.downk.cc/item/5fb1ee82b18d627113abad69.jpg"></p><p><img src="https://pic.downk.cc/item/5fb1eec1b18d627113abb8da.jpg"></p><h3 id="ä¸ƒã€-Reduxçš„è¿è¡ŒåŸºç¡€-ä¸å¯å˜æ•°æ®-immutability"><a href="#ä¸ƒã€-Reduxçš„è¿è¡ŒåŸºç¡€-ä¸å¯å˜æ•°æ®-immutability" class="headerlink" title="ä¸ƒã€ Reduxçš„è¿è¡ŒåŸºç¡€:ä¸å¯å˜æ•°æ®(immutability)"></a>ä¸ƒã€ Reduxçš„è¿è¡ŒåŸºç¡€:ä¸å¯å˜æ•°æ®(immutability)</h3><p><img src="https://pic.downk.cc/item/5fb1efbcb18d627113abe8a3.jpg"></p><h5 id="1-ä¸ºä»€ä¹ˆéœ€è¦ä¸å¯å˜æ•°æ®"><a href="#1-ä¸ºä»€ä¹ˆéœ€è¦ä¸å¯å˜æ•°æ®" class="headerlink" title="1.ä¸ºä»€ä¹ˆéœ€è¦ä¸å¯å˜æ•°æ®?"></a>1.ä¸ºä»€ä¹ˆéœ€è¦ä¸å¯å˜æ•°æ®?</h5><ul><li><p><strong>1.æ€§èƒ½ä¼˜åŒ–:</strong><br> &emsp;storeå˜åŒ–æ—¶ä¼šé€šçŸ¥ç»„ä»¶æ›´æ–°==&gt; storeçš„å˜åŒ–éƒ½æ˜¯ç”±actionè§¦å‘==&gt;actionè§¦å‘åœ¨æ—§çš„stateä¸Šå½¢æˆæ–°çš„stateã€‚ä¸éœ€è¦æ¯”è¾ƒæ–°æ—§stateå€¼æ˜¯å¦å˜äº†,åªéœ€è¦åˆ¤æ–­<strong>å‰åçŠ¶æ€çš„å¼•ç”¨</strong>æœ‰æ²¡æœ‰å˜åŒ–</p></li><li><p><strong>2.æ˜“äºè°ƒè¯•å’Œè·Ÿè¸ª:</strong><br>ä»»ä½•æ—¶å€™ï¼Œstoreå˜åŒ–æ—¶å¯ä»¥è®°å½•ä¹‹å‰å’Œä¹‹åçš„çŠ¶æ€å€¼ã€‚</p></li><li><p><strong>3.æ˜“äºæ¨æµ‹:</strong><br>ä»»ä½•æ—¶å€™ï¼Œéƒ½å¯ä»¥æ‰¾åˆ°æ˜¯ä»€ä¹ˆå¼•èµ·storeçš„å˜åŒ–</p><h5 id="2-å¦‚ä½•æ“ä½œä¸å¯å˜æ•°æ®"><a href="#2-å¦‚ä½•æ“ä½œä¸å¯å˜æ•°æ®" class="headerlink" title="2.å¦‚ä½•æ“ä½œä¸å¯å˜æ•°æ®?"></a>2.å¦‚ä½•æ“ä½œä¸å¯å˜æ•°æ®?</h5></li></ul><p>==ä¸‰ç§æ–¹å¼:==<br><img src="https://pic.downk.cc/item/5fb1f0f2b18d627113ac3540.jpg"></p><p>ç®€å•åœºæ™¯ï¼šä½¿ç”¨åŸç”Ÿå†™æ³•å°±å¯ä»¥äº†ã€‚</p><p><img src="https://pic.downk.cc/item/5fb1f37cb18d627113acb0d5.jpg"></p><p>å¤æ‚åœºæ™¯ï¼šéœ€è¦å€ŸåŠ©ä¸€äº›ç±»åº“ã€‚</p><p><img src="https://pic.downk.cc/item/5fb1f414b18d627113accfd2.jpg"></p><p>immer: æ€§èƒ½å·®ä¸€ç‚¹ï¼Œé€‚ç”¨åº”ç”¨ç¨‹åºå°ï¼Œåœºæ™¯ç®€å•çš„æƒ…å†µã€‚<br><img src="https://pic.downk.cc/item/5fb1f44fb18d627113acdf4d.jpg"></p><h3 id="å…«ã€æ¢³ç†Reduxçš„å·¥ä½œæµç¨‹"><a href="#å…«ã€æ¢³ç†Reduxçš„å·¥ä½œæµç¨‹" class="headerlink" title="å…«ã€æ¢³ç†Reduxçš„å·¥ä½œæµç¨‹"></a>å…«ã€æ¢³ç†Reduxçš„å·¥ä½œæµç¨‹</h3><p><img src="https://pic.downk.cc/item/5fb26119b18d627113c52bcf.jpg"></p><p>1.é¦–å…ˆï¼Œç”¨æˆ·å‘å‡ºActionã€‚</p><pre><code class="hljs js">store.dispatch(action)</code></pre><p>2.ç„¶åï¼ŒStoreè‡ªåŠ¨è°ƒç”¨Reducer,å¹¶ä¸”ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šå½“å‰Stateå’Œæ”¶åˆ°çš„Actionã€‚Reducerä¼šè¿”å›æ–°çš„State</p><pre><code class="hljs js"><span class="hljs-keyword">let</span> nextState = todoApp(previousState,action);</code></pre><p>Stateä¸€æ—¦æœ‰å˜åŒ–ï¼ŒStoreå°±ä¼šè°ƒç”¨ç›‘å¬å‡½æ•°</p><pre><code class="hljs js"><span class="hljs-comment">//è®¾ç½®ç›‘å¬å‡½æ•°</span>store.subscribe(listener);</code></pre><p>listenerå¯ä»¥é€šè¿‡store.getState()å¾—åˆ°å½“å‰çŠ¶æ€ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯React,è¿™æ—¶å¯ä»¥è§¦å‘é‡æ–°æ¸²æŸ“Viewã€‚</p><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listener</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-keyword">let</span> newState = store.getState();  component.setState(newState);&#125;</code></pre>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>09-æ‰“åŒ…å’Œéƒ¨ç½²</title>
    <link href="/2020/11/12/09-%E6%89%93%E5%8C%85%E5%92%8C%E9%83%A8%E7%BD%B2/"/>
    <url>/2020/11/12/09-%E6%89%93%E5%8C%85%E5%92%8C%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<h4 id="ä¸€-ä¸ºä»€ä¹ˆéœ€è¦æ‰“åŒ…"><a href="#ä¸€-ä¸ºä»€ä¹ˆéœ€è¦æ‰“åŒ…" class="headerlink" title="ä¸€.ä¸ºä»€ä¹ˆéœ€è¦æ‰“åŒ…?"></a>ä¸€.ä¸ºä»€ä¹ˆéœ€è¦æ‰“åŒ…?</h4><ul><li>1.ç¼–è¯‘ES6è¯­æ³•ç‰¹æ€§ï¼Œç¼–è¯‘JSX</li><li>2.æ•´åˆèµ„æºï¼Œä¾‹å¦‚å›¾ç‰‡svg,Less/Sass</li><li>3.ä¼˜åŒ–ä»£ç ä½“ç§¯</li></ul><p><img src="https://i.bmp.ovh/imgs/2020/11/ef5409f73d9ca563.png"></p><h4 id="äºŒ-æ‰“åŒ…æ³¨æ„äº‹é¡¹"><a href="#äºŒ-æ‰“åŒ…æ³¨æ„äº‹é¡¹" class="headerlink" title="äºŒ.æ‰“åŒ…æ³¨æ„äº‹é¡¹:"></a>äºŒ.æ‰“åŒ…æ³¨æ„äº‹é¡¹:</h4><p>1.è®¾ç½®node.jsç¯å¢ƒä¸ºproduction<br>2.ç¦æ­¢å¼€å‘æ—¶ä¸“ç”¨ä»£ç ï¼Œæ¯”å¦‚logger<br>3.è®¾ç½®åº”ç”¨æ ¹è·¯å¾„</p><p>npm run build æ‰§è¡Œçš„å°±æ˜¯æ‰“åŒ…è¿‡ç¨‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>08-ä½¿ç”¨è„šæ‰‹æ¶å·¥å…·åˆ›å»ºReacté¡¹ç›®</title>
    <link href="/2020/11/12/08-%E4%BD%BF%E7%94%A8%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7%E5%88%9B%E5%BB%BAReact%E9%A1%B9%E7%9B%AE/"/>
    <url>/2020/11/12/08-%E4%BD%BF%E7%94%A8%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7%E5%88%9B%E5%BB%BAReact%E9%A1%B9%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<h3 id="1-ä¸ºä»€ä¹ˆéœ€è¦è„šæ‰‹æ¶ï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆéœ€è¦è„šæ‰‹æ¶ï¼Ÿ" class="headerlink" title="1.ä¸ºä»€ä¹ˆéœ€è¦è„šæ‰‹æ¶ï¼Ÿ"></a>1.ä¸ºä»€ä¹ˆéœ€è¦è„šæ‰‹æ¶ï¼Ÿ</h3><p><img src="https://i.bmp.ovh/imgs/2020/11/1df974a0ce1a7435.png"><br>é¡¹ç›®è¶Šæ¥è¶Šå¤æ‚ï¼Œéœ€è¦ç”¨ï¼š</p><ul><li><p>react: åšUIï¼Œ</p></li><li><p>redux: åšçŠ¶æ€ç®¡ç†ï¼Œ</p></li><li><p>react-router: åšè·¯ç”±ç®¡ç†</p></li><li><p>babel: æŠŠjsæ–°ç‰¹æ€§ç¿»è¯‘ä¸ºæµè§ˆå™¨å¯ä»¥è¯†åˆ«çš„æ—§è¯­æ³•</p></li><li><p>webpack: æ‰“åŒ…</p></li><li><p>eslint: ç”¨äºè¯­æ³•æ£€æŸ¥<br>â€¦<br><img src="https://i.bmp.ovh/imgs/2020/11/611411d14c00f1a4.png"></p><p>&emsp;è¿™äº›å·¥å…·èƒŒåéœ€è¦å¾ˆå¤šçš„package,æˆ‘ä»¬éœ€è¦äº†è§£æ¯ä¸€ä¸ªpackageçš„é…ç½®å’Œä½¿ç”¨ï¼Œè¿™ä½¿å¾—åˆ›å»ºé¡¹ç›®éå¸¸ç¹çã€‚è€Œåˆ›å»ºä¸€ä¸ªé¡¹ç›®çš„è¿‡ç¨‹å¤§è‡´æ˜¯å·®ä¸å¤šçš„ï¼Œå®Œå…¨å¯ä»¥æŠ½è±¡å‡ºæ¥åšæˆä¸€ä¸ªå·¥å…·<br>&emsp;===&gt;æ‰€ä»¥ï¼Œè„šæ‰‹æ¶åº”è¿è€Œç”Ÿã€‚</p></li></ul><h3 id="2-å¸¸è§çš„ç”¨äºåˆ›å»ºReactåº”ç”¨çš„è„šæ‰‹æ¶å·¥å…·ï¼š"><a href="#2-å¸¸è§çš„ç”¨äºåˆ›å»ºReactåº”ç”¨çš„è„šæ‰‹æ¶å·¥å…·ï¼š" class="headerlink" title="2.å¸¸è§çš„ç”¨äºåˆ›å»ºReactåº”ç”¨çš„è„šæ‰‹æ¶å·¥å…·ï¼š"></a>2.å¸¸è§çš„ç”¨äºåˆ›å»ºReactåº”ç”¨çš„è„šæ‰‹æ¶å·¥å…·ï¼š</h3><ul><li><p><strong>Create React APP</strong><br><img src="https://i.bmp.ovh/imgs/2020/11/6a1c377349d0f209.png"><br>&emsp; facebook å®˜æ–¹æ¨å‡ºçš„ï¼Œä½¿ç”¨äº†æœ€ç®€ç­–ç•¥ï¼Œç”¨äºå­¦ä¹ æˆ–åˆ›å»ºç®€å•çš„reacté¡¹ç›®</p></li><li><p><strong>Rekit</strong><br><img src="https://i.bmp.ovh/imgs/2020/11/57aaa6b41498f44a.png"></p><p>&emsp;åŸºäºcreate-react-app,æä¾›äº†æ›´å¤šçš„åŠŸèƒ½ï¼Œå¯ä»¥å¼€å‘å¤§å‹çš„é¡¹ç›®ã€‚</p></li><li><p><strong>Codesandbox</strong><br><img src="https://i.bmp.ovh/imgs/2020/11/c18cd49b5e89621e.png"><br>&emsp; Online,åœ¨çº¿çš„åˆ›å»ºé¡¹ç›®ï¼Œwebpackè¿è¡Œåœ¨æµè§ˆå™¨ç«¯,å¤§å¤§æé«˜æ‰“åŒ…é€Ÿåº¦ã€‚æ”¯æŒreact,vue,angular</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>07-ç†è§£æ–°çš„ContextAPIåŠå…¶ä½¿ç”¨åœºæ™¯</title>
    <link href="/2020/11/11/07-%E7%90%86%E8%A7%A3%E6%96%B0%E7%9A%84ContextAPI%E5%8F%8A%E5%85%B6%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/"/>
    <url>/2020/11/11/07-%E7%90%86%E8%A7%A3%E6%96%B0%E7%9A%84ContextAPI%E5%8F%8A%E5%85%B6%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/</url>
    
    <content type="html"><![CDATA[<p><strong>Contextè§£å†³çš„æ˜¯ï¼šç»„ä»¶ä¹‹é—´çš„é€šä¿¡é—®é¢˜</strong></p><p>Contextæä¾›äº†ä¸€ä¸ªæ— éœ€ä¸ºæ¯å±‚ç»„ä»¶æ‰‹åŠ¨æ·»åŠ props,å°±èƒ½åœ¨ç»„ä»¶æ ‘é—´è¿›è¡Œæ•°æ®ä¼ é€’çš„æ–¹æ³•ã€‚</p><p><img src="https://i.bmp.ovh/imgs/2020/11/c51c0b02a804b0fb.png"></p><h4 id="1-è®¾è®¡ç›®çš„"><a href="#1-è®¾è®¡ç›®çš„" class="headerlink" title="1.è®¾è®¡ç›®çš„"></a>1.è®¾è®¡ç›®çš„</h4><p>&emsp;Contextè®¾è®¡çš„ç›®çš„ï¼šä¸ºäº†å…±äº«é‚£äº›å¯¹äºä¸€ä¸ªç»„ä»¶æ ‘è€Œè¨€æ˜¯â€œå…¨å±€â€çš„æ•°æ®ï¼Œä¾‹å¦‚å½“å‰è®¤è¯çš„ç”¨æˆ·ã€ä¸»é¢˜æˆ–è€…é¦–é€‰è¯­è¨€ã€‚<br>&emsp;åœ¨ä¸€ä¸ªå…¸å‹çš„Reactåº”ç”¨ä¸­ï¼Œæ•°æ®æ˜¯é€šè¿‡propså±æ€§è‡ªä¸Šè€Œä¸‹ï¼ˆç”±çˆ¶äº²åˆ°å„¿å­ï¼‰è¿›è¡Œä¼ é€’çš„ï¼Œä½†æ˜¯è¿™ç§åšæ³•å¯¹äºæŸäº›å±æ€§æ˜¯åŠå…¶ç¹ççš„ï¼ˆæ¯”å¦‚ä¸Šæ–‡è¯´çš„UIä¸»é¢˜ï¼Œï¼‰ï¼Œè¿™äº›å±æ€§æ˜¯åº”ç”¨ç¨‹åºä¸­è®¸å¤šç»„ä»¶éƒ½éœ€è¦çš„ã€‚</p><p><strong>==&gt;</strong> æ‰€ä»¥ï¼ŒContextè¢«è®¾è®¡å‡ºæ¥ï¼Œæä¾›äº†ä¸€ç§åœ¨ç»„ä»¶é—´å…±äº«â€œå…¨å±€â€æ•°æ®çš„æ–¹å¼ï¼Œä»è€Œä¸å¿…æ˜¾ç¤ºåœ°é€šè¿‡ç»„ä»¶æ ‘é€å±‚åœ°ä¼ é€’props.</p><h4 id="2-ä½¿ç”¨Contextå‰çš„è€ƒè™‘"><a href="#2-ä½¿ç”¨Contextå‰çš„è€ƒè™‘" class="headerlink" title="2.ä½¿ç”¨Contextå‰çš„è€ƒè™‘"></a>2.ä½¿ç”¨Contextå‰çš„è€ƒè™‘</h4><p><strong>Contextä¸»è¦åº”ç”¨åœºæ™¯</strong>ï¼šå¾ˆå¤šä¸åŒå±‚çº§ä¹‹é—´çš„ç»„ä»¶éœ€è¦è®¿é—®åŒæ ·çš„ä¸€äº›æ•°æ®ã€‚(ä½†æ˜¯éœ€è¦è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºè¿™ä¼šè®©ç»„ä»¶çš„å¤ç”¨æ€§å˜å·®ã€‚)<br>å¦‚æœåªæ˜¯æƒ³é¿å…å±‚å±‚ä¼ é€’ä¸€äº›å±æ€§ï¼Œ<a href="https://zh-hans.reactjs.org/docs/composition-vs-inheritance.html">ç»„ä»¶ç»„åˆï¼ˆcomponent compositionï¼‰</a>æœ‰æ—¶æ˜¯ä¸€ä¸ªæ¯”Contextæ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p><h4 id="3-ç›¸å…³çš„API"><a href="#3-ç›¸å…³çš„API" class="headerlink" title="3.ç›¸å…³çš„API"></a>3.ç›¸å…³çš„API</h4><p> <strong><em>(1) React.createContext</em></strong><br>  <pre><code class="hljs js"><span class="hljs-keyword">const</span> MyContext = React.createContext(defaultValue);</code></pre></p><ul><li>createContextå‡½æ•°åˆ›å»ºä¸€ä¸ªContextå¯¹è±¡ï¼Œå½“Reactæ¸²æŸ“ä¸€ä¸ªè®¢é˜…äº†è¿™ä¸ªContextå¯¹è±¡çš„ç»„ä»¶æ—¶ï¼Œè¿™ä¸ªç»„ä»¶ä¼šä»ç»„ä»¶æ ‘ä¸­ç¦»è‡ªèº«æœ€è¿‘çš„åŒ¹é…åˆ°çš„Providerä¸­è¯»å–å½“å‰çš„contextå€¼ã€‚<br>â€¦</li><li><em>defaultValue</em>: åªæœ‰å½“ç»„ä»¶æ‰€å¤„çš„ç»„ä»¶æ ‘ä¸­æ²¡æœ‰åŒ¹é…åˆ°Provideræ—¶ï¼Œå…¶defaultValueå‚æ•°æ‰èµ·ä½œç”¨ã€‚å³ä½¿Providerä¸­çš„valueå€¼æ˜¯â€undefinedâ€ï¼Œæ¶ˆè´¹ç»„ä»¶çš„defaultValueä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚<br>ï¼ˆdefaultValueæœ‰åŠ©äºåœ¨ä¸ä½¿ç”¨ProvideråŒ…è£…ç»„ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯¹ç»„ä»¶è¿›è¡Œæµ‹è¯•ï¼‰</li></ul><p><strong><em>(2)Context.Provider</em></strong></p><pre><code class="hljs js">&lt;MyContext.Provider value=&#123;<span class="hljs-comment">/*æŸä¸ªå€¼*/</span>&#125;&gt;</code></pre><ul><li><p>æ¯ä¸ªContextå¯¹è±¡éƒ½ä¼šè¿”å›ä¸€ä¸ªProvider Reactç»„ä»¶ï¼Œå®ƒå…è®¸æ¶ˆè´¹ç»„ä»¶è®¢é˜…contextçš„å˜åŒ–ã€‚</p></li><li><p>ä¸€ä¸ªProviderå¯ä»¥å’Œå¤šä¸ªæ¶ˆè´¹ç»„ä»¶æœ‰å¯¹åº”å…³ç³»ã€‚å¤šä¸ªProviderä¹Ÿå¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œé‡Œé¢çš„ä¼šè¦†ç›–å¤–å±‚çš„æ•°æ®ã€‚</p></li><li><p>Provideræœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œä¼ é€’ç»™æ¶ˆè´¹ç»„ä»¶ã€‚å½“valueå€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒProviderå†…éƒ¨çš„æ‰€æœ‰æ¶ˆè´¹ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚<br>ï¼ˆProvideråŠå…¶å†…éƒ¨çš„æ¶ˆè´¹ç»„ä»¶éƒ½ä¸å—åˆ¶äºshouldComponentUpdateå‡½æ•°ï¼Œæ‰€ä»¥å½“æ¶ˆè´¹ç»„ä»¶åœ¨å…¶ç¥–å…ˆç»„ä»¶æ¨å‡ºæ›´æ–°çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ›´æ–°ï¼‰</p></li><li><p>é€šè¿‡æ–°æ—§å€¼æ£€æµ‹ç¡®å®šå˜åŒ–ï¼Œä½¿ç”¨äº†å’Œ Object.isç›¸åŒçš„ç®—æ³•ã€‚</p></li></ul><p><strong><em>(3) Class.contextType</em></strong></p><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;  <span class="hljs-function"><span class="hljs-title">componentDidMount</span>(<span class="hljs-params"></span>)</span> &#123;    <span class="hljs-keyword">let</span> value = <span class="hljs-built_in">this</span>.context;    <span class="hljs-comment">/* åœ¨ç»„ä»¶æŒ‚è½½å®Œæˆåï¼Œä½¿ç”¨ MyContext ç»„ä»¶çš„å€¼æ¥æ‰§è¡Œä¸€äº›æœ‰å‰¯ä½œç”¨çš„æ“ä½œ */</span>  &#125;  <span class="hljs-function"><span class="hljs-title">componentDidUpdate</span>(<span class="hljs-params"></span>)</span> &#123;    <span class="hljs-keyword">let</span> value = <span class="hljs-built_in">this</span>.context;    <span class="hljs-comment">/* ... */</span>  &#125;  <span class="hljs-function"><span class="hljs-title">componentWillUnmount</span>(<span class="hljs-params"></span>)</span> &#123;    <span class="hljs-keyword">let</span> value = <span class="hljs-built_in">this</span>.context;    <span class="hljs-comment">/* ... */</span>  &#125;  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;    <span class="hljs-keyword">let</span> value = <span class="hljs-built_in">this</span>.context;    <span class="hljs-comment">/* åŸºäº MyContext ç»„ä»¶çš„å€¼è¿›è¡Œæ¸²æŸ“ */</span>  &#125;&#125;MyClass.contextType = MyContext;</code></pre><ul><li>æŒ‚è½½åœ¨classä¸Šçš„contextTypeå±æ€§ä¼šè¢«é‡æ–°èµ‹å€¼ä¸ºä¸€ä¸ªç”±React.createContext()åˆ›å»ºçš„Contextå¯¹è±¡ã€‚æ‰€ä»¥ä½¿ç”¨this.contextå¯ä»¥æ¶ˆè´¹æœ€è¿‘Contextä¸Šçš„é‚£ä¸ªå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä»»ä½•ç”Ÿå‘½å‘¨æœŸè®¿é—®åˆ°this.contextï¼ŒåŒ…æ‹¬renderå‡½æ•°ã€‚</li><li>é€šè¿‡class.contextTypeåªèƒ½è®¢é˜…ä¸€ä¸ªcontext</li></ul><p><strong><em>(4) Context.Consumer</em></strong></p><pre><code class="hljs js">&lt;MyContext.Consumer&gt;    &#123;<span class="hljs-function"><span class="hljs-params">value</span>=&gt;</span><span class="hljs-comment">/*åŸºäºcontextå€¼è¿›è¡Œæ¸²æŸ“*/</span>&#125;&lt;/MyContext.Consumer&gt;</code></pre><ul><li><p>è¿™æ˜¯ä¸€ä¸ªå¯ä»¥è®¢é˜…contextçš„å˜æ›´çš„Reactç»„ä»¶ï¼Œå®ƒåœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å¯ä»¥è®¢é˜…ä¸€ä¸ªcontextã€‚</p></li><li><p>è¿™ç§æ–¹æ³•éœ€è¦ä¸€ä¸ª<a href="https://zh-hans.reactjs.org/docs/render-props.html#using-props-other-than-render">å‡½æ•°ä½œä¸ºå­å…ƒç´ ï¼ˆfunction as a child)</a>,è¿™ä¸ªå‡½æ•°æ¥æ”¶å½“å‰çš„contextå€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªReactèŠ‚ç‚¹ã€‚</p></li><li><p> ä¼ é€’ç»™Consumerçš„valueå€¼ä¹Ÿå°±æ˜¯ç»„ä»¶æ ‘ä¸Šæ–¹ç¦»contextæœ€è¿‘çš„Provideræä¾›çš„valueå€¼ï¼Œå¦‚æœæ²¡æœ‰å¯¹åº”çš„Provider,å°±ç”¨createContext()ä¸­çš„defaultValue.</p></li></ul><p><strong><em>(5) Context.displayName</em></strong></p><p>ç¤ºä¾‹ï¼Œä¸‹è¿°ç»„ä»¶åœ¨DevToolsä¸­å°†æ˜¯æ˜¾ç¤ºMyDisplayName:</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> MyContext = React.createContext(<span class="hljs-comment">/*some value*/</span>);MyContext.displayName = <span class="hljs-string">&#x27;MyDisplayName&#x27;</span>;&lt;MyContext.Provider&gt; <span class="hljs-comment">// &quot;MyDisplayName.Provider&quot; åœ¨ DevTools ä¸­</span>&lt;MyContext.Consumer&gt; <span class="hljs-comment">// &quot;MyDisplayName.Consumer&quot; åœ¨ DevTools ä¸­</span></code></pre><ul><li>contextå¯¹è±¡æ¥å—ä¸€ä¸ªåä¸ºdisplayNameçš„å±æ€§ï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚React DevToolsä½¿ç”¨è¯¥å­—ç¬¦ä¸²æ¥ç¡®å®šcontextè¦æ˜¾ç¤ºçš„å†…å®¹ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>06-ä¸¤ç§ç»„ä»¶è®¾è®¡æ¨¡å¼</title>
    <link href="/2020/11/11/06-%E4%B8%A4%E7%A7%8D%E7%BB%84%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <url>/2020/11/11/06-%E4%B8%A4%E7%A7%8D%E7%BB%84%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h4 id="ç»„ä»¶å¤ç”¨çš„å¦å¤–ä¸¤ç§å½¢å¼ï¼š"><a href="#ç»„ä»¶å¤ç”¨çš„å¦å¤–ä¸¤ç§å½¢å¼ï¼š" class="headerlink" title="ç»„ä»¶å¤ç”¨çš„å¦å¤–ä¸¤ç§å½¢å¼ï¼š"></a>ç»„ä»¶å¤ç”¨çš„å¦å¤–ä¸¤ç§å½¢å¼ï¼š</h4><p>ï¼ˆé™¤äº†å¸¸è§„çš„ç»„ä»¶å¤ç”¨ä¹‹å¤–ï¼‰</p><ul><li><strong>é«˜é˜¶ç»„ä»¶</strong></li><li><strong>å‡½æ•°ä½œä¸ºå­ç»„ä»¶</strong></li></ul><h4 id="ä¸€-é«˜é˜¶ç»„ä»¶"><a href="#ä¸€-é«˜é˜¶ç»„ä»¶" class="headerlink" title="ä¸€.é«˜é˜¶ç»„ä»¶"></a>ä¸€.é«˜é˜¶ç»„ä»¶</h4><p><img src="https://i.bmp.ovh/imgs/2020/11/f50691752374e779.png"></p><p><strong>é«˜é˜¶ç»„ä»¶(HOC)</strong> æ˜¯Reactä¸­å¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ï¼Œå®ƒæœ¬èº«ä¸æ˜¯React APIçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯åŸºäºReactçš„ç»„åˆç‰¹æ€§å½¢æˆçš„ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚é«˜é˜¶ç»„ä»¶ä»¥ç»„ä»¶ä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ã€‚</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> EnhancedComponent = higherOrderComponent(WrappedComponenent)</code></pre><p>==åŒºåˆ†:== &emsp;ç»„ä»¶æ˜¯å°†propsè½¬æ¢ä¸ºUIï¼Œé«˜é˜¶ç»„ä»¶æ˜¯å°†ç»„ä»¶è½¬æ¢ä¸ºå¦ä¸€ä¸ªç»„ä»¶ã€‚</p><p>å…·ä½“å‚è§ï¼š<a href="https://zh-hans.reactjs.org/docs/higher-order-components.html">Reactå®˜æ–¹æ–‡æ¡£â€“é«˜é˜¶ç»„ä»¶</a></p><h4 id="äºŒ-å‡½æ•°ä½œä¸ºå­ç»„ä»¶"><a href="#äºŒ-å‡½æ•°ä½œä¸ºå­ç»„ä»¶" class="headerlink" title="äºŒ.å‡½æ•°ä½œä¸ºå­ç»„ä»¶"></a>äºŒ.å‡½æ•°ä½œä¸ºå­ç»„ä»¶</h4><p><img src="https://i.bmp.ovh/imgs/2020/11/17246cbcf6e05f4d.png"></p><p><strong>æ€»ç»“ï¼š</strong></p><p>1ã€é«˜é˜¶ç»„ä»¶å’Œå‡½æ•°ä½œä¸ºå­ç»„ä»¶éƒ½æ˜¯è®¾è®¡æ¨¡å¼ï¼ˆå¹¶ä¸æ˜¯æ–°çš„ç»„ä»¶ç±»å‹ï¼‰</p><p>2ã€å¯ä»¥å®ç°æ›´å¤šåœºæ™¯çš„ç»„ä»¶å¤ç”¨</p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>05-ç†è§£VirtualDOMåŠkeyå±æ€§çš„ä½œç”¨</title>
    <link href="/2020/11/11/05-%E7%90%86%E8%A7%A3VirtualDOM%E5%8F%8Akey%E5%B1%9E%E6%80%A7%E7%9A%84%E4%BD%9C%E7%94%A8/"/>
    <url>/2020/11/11/05-%E7%90%86%E8%A7%A3VirtualDOM%E5%8F%8Akey%E5%B1%9E%E6%80%A7%E7%9A%84%E4%BD%9C%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>JSXçš„åŸºç¡€ï¼šè™šæ‹ŸDOM</p><p><img src="https://i.bmp.ovh/imgs/2020/11/6244a9607b4da0d0.png"></p><p><img src="https://i.bmp.ovh/imgs/2020/11/314414dd61ae46e0.png"></p><p>ä»æ ¹èŠ‚ç‚¹å¼€å§‹æ¯”è¾ƒï¼Œé’ˆå¯¹ä¸åŒæƒ…å†µï¼Œdiffç®—æ³•æœ‰ä¸åŒçš„å¤„ç†æ–¹å¼ï¼š</p><p><strong>1. å±æ€§å˜åŒ–åŠé¡ºåºï¼š</strong><br>   <img src="https://i.bmp.ovh/imgs/2020/11/231a0e379e4ef3a4.png"></p><p>==å¤„ç†æ–¹å¼==ï¼šæ ¹æ®keyå±æ€§ï¼Œäº¤æ¢Aä¸Bçš„ä½ç½®</p><p><strong>2. èŠ‚ç‚¹ç±»å‹å‘ç”Ÿå˜åŒ–ï¼š</strong><br>   <img src="https://i.bmp.ovh/imgs/2020/11/c65c14d031817b7e.png"></p><p>==å¤„ç†æ–¹å¼==ï¼šæš´åŠ›åˆ é™¤FèŠ‚ç‚¹ï¼ˆä¸ç®¡ä»–æ˜¯å¦åœ¨å…¶ä»–åœ°æ–¹ç”¨åˆ°ï¼‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„GèŠ‚ç‚¹ï¼Œappendåˆ°AèŠ‚ç‚¹ä¸Šã€‚</p><p><strong>3. èŠ‚ç‚¹è·¨å±‚çº§ç§»åŠ¨ï¼š</strong><br>    <img src="https://i.bmp.ovh/imgs/2020/11/06f09ef16c9da001.png"></p><p>==å¤„ç†æ–¹å¼==ï¼šdiffç®—æ³•ç›´æ¥åˆ é™¤å·¦è¾¹Bä¸‹é¢çš„DèŠ‚ç‚¹ï¼ˆä»¥åŠå…¶å­æ ‘ï¼‰ï¼Œåˆ°äº†å³è¾¹ï¼ŒReactç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„DèŠ‚ç‚¹ã€‚</p><h4 id="è™šæ‹ŸDOMçš„ä¸¤ä¸ªå‡è®¾ï¼š"><a href="#è™šæ‹ŸDOMçš„ä¸¤ä¸ªå‡è®¾ï¼š" class="headerlink" title="è™šæ‹ŸDOMçš„ä¸¤ä¸ªå‡è®¾ï¼š"></a>è™šæ‹ŸDOMçš„ä¸¤ä¸ªå‡è®¾ï¼š</h4><p><strong>1ã€ç»„ä»¶çš„DOMç»“æ„æ˜¯ç›¸å¯¹ç¨³å®šçš„ï¼ˆä¸€èˆ¬å¾ˆå°‘å‡ºç°è·¨å±‚çº§ç§»åŠ¨çš„æƒ…å†µï¼‰</strong></p><p>&emsp;&emsp;è·¨å±‚çº§çš„èŠ‚ç‚¹ç§»åŠ¨ï¼Œreactçš„diffç®—æ³•æ˜¯ç›´æ¥åˆ é™¤ã€‚</p><p><strong>2ã€ç±»å‹ç›¸åŒçš„å…„å¼ŸèŠ‚ç‚¹å¯ä»¥è¢«å”¯ä¸€æ ‡è¯†ï¼ˆkeyå±æ€§ï¼‰ã€‚</strong></p><hr><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><ul><li>ç®—æ³•å¤æ‚åº¦ä¸ºO(n)</li><li>è™šæ‹ŸDOMå¦‚ä½•è®¡ç®—diff</li><li>keyå±æ€§çš„ä½œç”¨</li></ul>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>04-reactçš„ç”Ÿå‘½å‘¨æœŸ</title>
    <link href="/2020/11/10/04-react%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
    <url>/2020/11/10/04-react%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
    
    <content type="html"><![CDATA[<h3 id="Reactçš„ç”Ÿå‘½å‘¨æœŸå›¾"><a href="#Reactçš„ç”Ÿå‘½å‘¨æœŸå›¾" class="headerlink" title="Reactçš„ç”Ÿå‘½å‘¨æœŸå›¾"></a>Reactçš„ç”Ÿå‘½å‘¨æœŸå›¾</h3><p><img src="https://i.bmp.ovh/imgs/2020/11/32b8163f9eadfd47.png"></p><p>ğŸ–ï¼šmountingåˆ°åº•æ„å‘³ç€ä»€ä¹ˆï¼Ÿ<br>ç­”ï¼š When we talk about mountingï¼Œ weâ€™re talking about the process of converting the virtual components into actual DOM elements that are placed in the DOM by React.ï¼ˆå…¶å®å°±æ˜¯Reactå°†è™šæ‹ŸDOMè½¬åŒ–ä¸ºçœŸå®DOMçš„è¿‡ç¨‹)</p><p><strong>1.constructor:</strong></p><ul><li>ç”¨äºåˆå§‹åŒ–å†…éƒ¨çŠ¶æ€ï¼Œå¾ˆå°‘ä½¿ç”¨</li><li>å”¯ä¸€å¯ä»¥ç›´æ¥ä¿®æ”¹stateçš„åœ°æ–¹</li></ul><p><strong>2.getDerivedStateFromProps:</strong></p><ul><li>å½“stateéœ€è¦ä»propsåˆå§‹åŒ–æ—¶ä½¿ç”¨ã€‚</li><li>å°½é‡ä¸è¦ä½¿ç”¨ï¼šç»´æŠ¤ä¸¤è€…çŠ¶æ€ä¸€è‡´æ€§ä¼šå¢åŠ å¤æ‚åº¦ã€‚</li><li>æ¯æ¬¡renderéƒ½ä¼šè°ƒç”¨ã€‚</li><li>å…¸å‹åœºæ™¯ï¼šè¡¨å•æ§ä»¶è·å–é»˜è®¤å€¼ã€‚</li></ul><p><strong>3.componentDidMount:</strong></p><ul><li>UIæ¸²æŸ“å®Œæˆåè°ƒç”¨</li><li>åªæ‰§è¡Œä¸€æ¬¡</li><li>å…¸å‹åœºæ™¯ï¼šè·å–å¤–éƒ¨èµ„æº</li></ul><p><strong>4.componeWillUnmout:</strong></p><ul><li>ç»„ä»¶ç§»é™¤æ—¶è¢«è°ƒç”¨</li><li>å…¸å‹åœºæ™¯ï¼šèµ„æºé‡Šæ”¾</li></ul><p><strong>5.getSnapshotBeforeUpdate:</strong></p><ul><li>åœ¨é¡µé¢renderä¹‹å‰è°ƒç”¨ï¼Œstateå·²ç»æ›´æ–°</li><li>å…¸å‹åœºæ™¯ï¼šè·å–renderä¹‹å‰çš„DOMçŠ¶æ€</li></ul><p><strong>6.componentDidUpdate:</strong></p><ul><li>æ¯æ¬¡UIæ›´æ–°æ—¶è¢«è°ƒç”¨</li><li>å…¸å‹åœºæ™¯ï¼šé¡µé¢éœ€è¦æ ¹æ®propså˜åŒ–é‡æ–°è·å–æ•°æ®</li></ul><p><strong>7.shouldComponentUpdate:</strong></p><ul><li>å†³å®šVitual DOMæ˜¯å¦é‡ç»˜</li><li>ä¸€èˆ¬ç”±PureComponentè‡ªåŠ¨å®ç°</li><li>å…¸å‹åœºæ™¯ï¼šæ€§èƒ½ä¼˜åŒ–</li></ul>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>03-JSXçš„æœ¬è´¨æ˜¯è¯­æ³•ç³–</title>
    <link href="/2020/11/10/03-JSX%E7%9A%84%E6%9C%AC%E8%B4%A8%E6%98%AF%E8%AF%AD%E6%B3%95%E7%B3%96/"/>
    <url>/2020/11/10/03-JSX%E7%9A%84%E6%9C%AC%E8%B4%A8%E6%98%AF%E8%AF%AD%E6%B3%95%E7%B3%96/</url>
    
    <content type="html"><![CDATA[<p>###ç†è§£JSX</p><p><em>JSXï¼šåœ¨javaScriptä»£ç ä¸­ç›´æ¥å†™HTMLæ ‡è®°ã€‚</em></p><pre><code class="hljs js"><span class="hljs-keyword">const</span> name=<span class="hljs-string">&#x27;jane&#x27;</span><span class="hljs-keyword">const</span> element=<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>hello,&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span></code></pre><p><strong>1.JSXçš„æœ¬è´¨</strong><br><img src="https://i.bmp.ovh/imgs/2020/11/5e744edbbade47d2.png"></p><p><strong>2.åœ¨JSXä¸­ä½¿ç”¨è¡¨è¾¾å¼</strong><br><img src="https://i.bmp.ovh/imgs/2020/11/87d92de0fdbd6f36.png"></p><p><strong>3.JSXçš„ä¼˜ç‚¹</strong></p><ul><li>å£°æ˜åˆ›å»ºç•Œé¢çš„ç›´è§‚</li><li>ä»£ç åŠ¨æ€åˆ›å»ºç•Œé¢çš„çµæ´»</li><li>æ— éœ€å­¦ä¹ æ–°çš„æ¨¡æ¿è¯­è¨€</li></ul><p><strong>çº¦å®šï¼šè‡ªå®šä¹‰ç»„ä»¶é¦–å­—æ¯å¤§å†™</strong><br>1.reactè®¤ä¸ºå°å†™çš„tagæ˜¯åŸç”ŸDOMèŠ‚ç‚¹ï¼Œå¦‚div<br>2.å¤§å†™å­—æ¯å¼€å¤´çš„ç»„ä»¶æ˜¯è‡ªå®šä¹‰èŠ‚ç‚¹<br>3.JSXæ ‡è®°å¯ä»¥ç›´æ¥ä½¿ç”¨å±æ€§è¯­æ³•ï¼Œå¦‚&lt;menu.Item /&gt;</p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>02-reactä»¥ç»„ä»¶æ–¹å¼è€ƒè™‘UIçš„æ„å»º</title>
    <link href="/2020/11/10/02-react%E4%BB%A5%E7%BB%84%E4%BB%B6%E6%96%B9%E5%BC%8F%E8%80%83%E8%99%91UI%E7%9A%84%E6%9E%84%E5%BB%BA/"/>
    <url>/2020/11/10/02-react%E4%BB%A5%E7%BB%84%E4%BB%B6%E6%96%B9%E5%BC%8F%E8%80%83%E8%99%91UI%E7%9A%84%E6%9E%84%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<p><img src="https://i.bmp.ovh/imgs/2020/11/b28d10e0a2054aec.png"></p><p><strong>ä¸€ã€æ„å»ºä¸€ä¸ªç»„ä»¶éœ€è¦è€ƒè™‘çš„ä¸‰ä»¶äº‹æƒ…ï¼š</strong></p><p>1ã€ç»„ä»¶çš„UI( ä¸€äº›å¤–åœ¨çš„è¡¨ç°å½¢å¼ )<br>2ã€ç»„ä»¶çš„çŠ¶æ€ç®¡ç†ï¼ˆæ”¾åœ¨å“ªï¼Ÿï¼‰<br>3ã€ç»„ä»¶çš„äº¤äº’</p><p><img src="https://i.bmp.ovh/imgs/2020/11/f878479d2f41ffb4.png"></p><p><strong>äºŒã€ä½•æ—¶åˆ›å»ºç»„ä»¶ï¼šå•ä¸€èŒè´£åŸåˆ™</strong></p><p>1ã€ä¸€ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½<br>2ã€å¤æ‚çš„ç»„ä»¶åº”è¯¥è¿›è¡Œæ‹†åˆ†</p><p><strong>ä¸‰ã€æ•°æ®çŠ¶æ€ç®¡ç†åŸåˆ™ï¼šDRYåŸåˆ™</strong></p><p>1.èƒ½è®¡ç®—å¾—åˆ°çš„çŠ¶æ€ä¸åº”è¯¥å•ç‹¬å­˜å‚¨<br>2.ç»„ä»¶å°½é‡æ— çŠ¶æ€ï¼Œå°½é‡é€šè¿‡propsè·å–.</p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>01-Reactçš„å†å²èƒŒæ™¯åŠç‰¹ç‚¹</title>
    <link href="/2020/11/10/01-React%E7%9A%84%E5%8E%86%E5%8F%B2%E8%83%8C%E6%99%AF/"/>
    <url>/2020/11/10/01-React%E7%9A%84%E5%8E%86%E5%8F%B2%E8%83%8C%E6%99%AF/</url>
    
    <content type="html"><![CDATA[<h3 id="1-React-å‡ºç°çš„å†å²èƒŒæ™¯"><a href="#1-React-å‡ºç°çš„å†å²èƒŒæ™¯" class="headerlink" title="1. React å‡ºç°çš„å†å²èƒŒæ™¯"></a>1. React å‡ºç°çš„å†å²èƒŒæ™¯</h3><h4 id="A-UIæ–¹é¢çš„â€”â€”"><a href="#A-UIæ–¹é¢çš„â€”â€”" class="headerlink" title="A.UIæ–¹é¢çš„â€”â€”"></a>A.UIæ–¹é¢çš„â€”â€”</h4><p>ä¼ ç»ŸWebUIå­˜åœ¨çš„é—®é¢˜ï¼š</p><ul><li>ä¼ ç»ŸUIå…³æ³¨å¤ªå¤šçš„ç»†èŠ‚</li><li>åº”ç”¨ç¨‹åºçš„çŠ¶æ€åˆ†æ•£åœ¨å„å¤„ï¼Œéš¾ä»¥è¿½è¸ªå’Œç»´æŠ¤</li></ul><p><strong>=&gt;</strong> <strong>Reactçš„è§£å†³æ–¹æ¡ˆ</strong>ï¼šreact å§‹ç»ˆæ•´ä½“â€åˆ·æ–°â€é¡µé¢ï¼Œæ— éœ€å…³å¿ƒç»†èŠ‚ã€‚å®ƒåªåˆ¤æ–­å‰åä¸¤ä¸ªçŠ¶æ€æ˜¯å¦å˜åŒ–ï¼Œå¹¶ä¸å…³æ³¨èƒŒåçš„å“ªä¸ªç»†èŠ‚å‘ç”Ÿäº†å˜åŒ–ã€‚<br><img src="https://i.bmp.ovh/imgs/2020/11/981310a92f37e99e.png"></p><h4 id="B-æ•°æ®æ–¹é¢çš„â€”â€”"><a href="#B-æ•°æ®æ–¹é¢çš„â€”â€”" class="headerlink" title="B.æ•°æ®æ–¹é¢çš„â€”â€”"></a>B.æ•°æ®æ–¹é¢çš„â€”â€”</h4><p>ä¼ ç»Ÿçš„MVCéš¾ä»¥æ‰©å±•å’Œç»´æŠ¤ï¼Œå¤ªå¤šçš„modelå’Œviewï¼Œå…³ç³»é”™ç»¼å¤æ‚ä¸”åŒå‘ç»‘å®šï¼Œå½“å‡ºç°äº†é—®é¢˜ï¼Œå¾ˆéš¾è¿½è¸ªæ˜¯modelè¿˜æ˜¯viewå±‚å‡ºç°äº†é—®é¢˜ã€‚<br><img src="https://i.bmp.ovh/imgs/2020/11/0520d5fd55b9ac16.png"> </p><p><strong>=&gt;</strong> <strong>Reactçš„è§£å†³æ–¹æ¡ˆ</strong>ï¼Œæå‡ºäº†å•å‘æ•°æ®æµæ¶æ„flux.(åé¢è¡ç”Ÿå‡ºreduxå’Œmobx)<br><img src="https://i.bmp.ovh/imgs/2020/11/1d93a50d7d4e112b.png"></p><h3 id="2-React-çš„ç‰¹ç‚¹ï¼š"><a href="#2-React-çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="2. React çš„ç‰¹ç‚¹ï¼š"></a>2. React çš„ç‰¹ç‚¹ï¼š</h3><p>1ä¸ªæ–°æ¦‚å¿µ<br>4ä¸ªå¿…é¡»çš„API<br>å•å‘æ•°æ®æµ<br>å®Œå–„çš„é”™è¯¯æç¤º</p>]]></content>
    
    
    <categories>
      
      <category>æå®¢æ—¶é—´Reactæ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>my-first-blog</title>
    <link href="/2020/11/09/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/"/>
    <url>/2020/11/09/%E5%89%8D%E7%AB%AF%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰ç«¯å­¦ä¹ è·¯çº¿åŠèµ„æº"><a href="#å‰ç«¯å­¦ä¹ è·¯çº¿åŠèµ„æº" class="headerlink" title=" å‰ç«¯å­¦ä¹ è·¯çº¿åŠèµ„æº"></a><center> å‰ç«¯å­¦ä¹ è·¯çº¿åŠèµ„æº</h2><p align='right'>â€”â€”â€”â€”â€”â€”å·¦è€³å¬é£<p>&nbsp;&emsp;å¯¹äºå‰ç«¯çš„å­¦ä¹ å’Œæé«˜ï¼Œæˆ‘çš„åŸºæœ¬æ€è·¯æ˜¯è¿™æ ·çš„ã€‚é¦–å…ˆï¼Œå‰ç«¯çš„ä¸‰ä¸ªæœ€åŸºæœ¬çš„ä¸œè¥¿ HTML 5ã€CSS 3 å’Œ JavaScriptï¼ˆES6ï¼‰æ˜¯å¿…é¡»è¦å­¦å¥½çš„ã€‚è¿™å…¶ä¸­æœ‰å¾ˆå¤šå¾ˆå¤šçš„æŠ€æœ¯ï¼Œæ¯”å¦‚ï¼ŒCSS 3 å¼•ç”³å‡ºæ¥çš„ Canvasï¼ˆä½å›¾ï¼‰ã€SVGï¼ˆçŸ¢é‡å›¾ï¼‰ å’Œ WebGLï¼ˆ3D å›¾ï¼‰ï¼Œä»¥åŠ CSS çš„å„ç§å›¾å½¢å˜æ¢å¯ä»¥è®©ä½ åšå‡ºéå¸¸ä¸°å¯Œçš„æ¸²æŸ“æ•ˆæœå’ŒåŠ¨ç”»æ•ˆæœã€‚<br>&nbsp;&emsp; ES6 ç®€ç›´å°±æ˜¯æŠŠ JavaScript å¸¦åˆ°äº†ä¸€ä¸ªæ–°çš„å°é˜¶ï¼ŒJavaScript è¯­è¨€çš„å¼ºå¤§ï¼Œå¤§å¤§é‡Šæ”¾äº†å‰ç«¯å¼€å‘äººå‘˜çš„ç”Ÿäº§åŠ›ï¼Œè®©å‰ç«¯å¾—ä»¥å¼€å‘æ›´ä¸ºå¤æ‚çš„ä»£ç å’Œç¨‹åºï¼Œäºæ˜¯åƒ React å’Œ Vue è¿™æ ·çš„æ¡†æ¶å¼€å§‹æˆä¸ºå‰ç«¯ç¼–ç¨‹çš„ä¸äºŒä¹‹é€‰ã€‚<br>&nbsp;&nbsp; æˆ‘ä¸€ç›´è®¤ä¸ºå­¦ä¹ ä»»ä½•çŸ¥è¯†éƒ½è¦ä»åŸºç¡€å‡ºå‘ï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« æˆ‘ä¼šç€é‡ä»‹ç»åŸºç¡€çŸ¥è¯†å’ŒåŸºæœ¬åŸç†ï¼Œå°¤å…¶æ˜¯å¦‚ä¸‹çš„è¿™äº›çŸ¥è¯†ï¼Œéƒ½æ˜¯å‰ç«¯ç¨‹åºå‘˜éœ€è¦èŠ±åŠ›æ°”å•ƒä¸‹æ¥çš„ç¡¬éª¨å¤´ã€‚JavaScript çš„æ ¸å¿ƒåŸç†ã€‚è¿™é‡Œæˆ‘ä¼šç»™å‡ºå¥½äº›ç½‘ä¸Šå¾ˆä¸é”™çš„è®² JavaScript </p><ul><li><p><strong>JavaScript çš„æ ¸å¿ƒåŸç†</strong>ã€‚è¿™é‡Œæˆ‘ä¼šç»™å‡ºå¥½äº›ç½‘ä¸Šå¾ˆä¸é”™çš„è®² JavaScript çš„åŸç†çš„æ–‡ç« æˆ–å›¾ä¹¦ï¼Œä½ ä¸€å®šè¦å­¦å¥½è¯­è¨€çš„ç‰¹æ€§ï¼Œå¹¶ä¸”è¯¦ç»†äº†è§£å…¶ä¸­çš„å„ç§å‘ã€‚</p></li><li><p><strong>æµè§ˆå™¨çš„å·¥ä½œåŸç†</strong>ã€‚è¿™ä¹Ÿæ˜¯ä¸€å—ç¡¬éª¨å¤´ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯å‰ç«¯ç¨‹åºå‘˜éœ€è¦äº†è§£å’Œæ˜ç™½çš„å…³é”®çŸ¥è¯†ç‚¹ï¼Œä¸ç„¶ï¼Œä½ å°†æ— æ³•æ·±å…¥ä¸‹å»ã€‚</p></li><li><p><strong>ç½‘ç»œåè®® HTTP</strong>ã€‚ä¹Ÿæ˜¯è¦ç€é‡äº†è§£çš„ï¼Œå°¤å…¶æ˜¯ HTTP/2ï¼Œè¿˜æœ‰ HTTP çš„å‡ ç§è¯·æ±‚æ–¹å¼ï¼šçŸ­è¿æ¥ã€é•¿è¿æ¥ã€Stream è¿æ¥ã€WebSocket è¿æ¥ã€‚</p></li><li><p><strong>å‰ç«¯æ€§èƒ½è°ƒä¼˜</strong>ã€‚æœ‰äº†ä»¥ä¸Šçš„è¿™äº›åŸºç¡€åï¼Œä½ å°±å¯ä»¥è¿›å…¥å‰ç«¯æ€§èƒ½è°ƒä¼˜çš„ä¸»é¢˜äº†ï¼Œæˆ‘ç›¸ä¿¡ä½ å¯ä»¥å¾ˆå®¹æ˜“ä¸Šæ‰‹å„ç§æ€§èƒ½è°ƒä¼˜æŠ€æœ¯çš„ã€‚</p></li><li><p><strong>æ¡†æ¶å­¦ä¹ </strong>ã€‚æˆ‘åªç»™äº† React å’Œ Vue ä¸¤ä¸ªæ¡†æ¶ã€‚å°±è¿™ä¸¤ä¸ªæ¡†æ¶æ¥è¯´ï¼ŒVirtual DOM æŠ€æœ¯æ˜¯å…¶åº•å±‚æŠ€æœ¯ï¼Œç»„ä»¶åŒ–æ˜¯å…¶æ€æƒ³ï¼Œç®¡ç†ç»„ä»¶çš„çŠ¶æ€æ˜¯å…¶é‡ç‚¹ã€‚è€Œå¯¹äº React æ¥è¯´ï¼Œå‡½æ•°å¼ç¼–ç¨‹åˆæ˜¯å…¶ç¼–ç¨‹æ€æƒ³ï¼Œæ‰€ä»¥ï¼Œè¿™äº›åŸºç¡€æŠ€æœ¯éƒ½æ˜¯ä½ éœ€è¦å¥½å¥½ç ”ç©¶å’Œå­¦ä¹ çš„ã€‚</p></li><li><p><strong>UI è®¾è®¡</strong>ã€‚è®¾è®¡ä¹Ÿæ˜¯å‰ç«¯éœ€è¦åšçš„ä¸€ä¸ªäº‹ï¼Œæ¯”å¦‚åƒ Google çš„ Material UIï¼Œæˆ–æ˜¯æ¯”è¾ƒæµè¡Œçš„ Atomic Design ç­‰åº”è¯¥æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆéœ€è¦å­¦ä¹ çš„ã€‚</p><p>&nbsp;è€Œå¯¹äºå·¥å…·ç±»çš„ä¸œè¥¿ï¼Œè¿™é‡Œæˆ‘åŸºæœ¬æ²¡æ€ä¹ˆæ¶‰åŠï¼Œå› ä¸ºæœ¬æ–‡ä¸»è¦è¿˜æ˜¯ä»åŸç†å’ŒåŸºç¡€å…¥æ‰‹ã€‚é‚£äº›å·¥å…·æˆ‘è§‰å¾—éƒ½å¾ˆç®€å•ï¼Œå°±åƒå­¦ä¹  Java æˆ‘æ²¡æœ‰è®©ä½ å»å­¦ä¹  Maven ä¸€æ ·ï¼Œå› ä¸ºåªè¦ä½ å»åŠ¨æ‰‹äº†ï¼Œè¿™ç§çŸ¥è¯†ä½ è‡ªç„¶å°±ä¼šè·å¾—ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŠŠç²¾åŠ›é‡ç‚¹æ”¾åœ¨æ›´é‡è¦çš„åœ°æ–¹ã€‚  </p><p>ä¸‹é¢æˆ‘ä»¬ä»å‰ç«¯åŸºç¡€å’Œåº•å±‚åŸç†å¼€å§‹è®²èµ·ã€‚å…ˆæ¥è®²è®² HTML5 ç›¸å…³çš„å†…å®¹ã€‚</p><h3 id="HTML-5"><a href="#HTML-5" class="headerlink" title="HTML 5"></a>HTML 5</h3><p>HTML 5 ä¸»è¦æœ‰ä»¥ä¸‹å‡ æœ¬ä¹¦æ¨èã€‚</p><ul><li><a href="https://book.douban.com/subject/25786074/">HTML 5 æƒå¨æŒ‡å—</a>ï¼Œæœ¬ä¹¦é¢å‘åˆå­¦è€…å’Œä¸­ç­‰æ°´å¹³ Web å¼€å‘äººå‘˜ï¼Œæ˜¯ç‰¢å›ºæŒæ¡ HTML 5ã€CSS 3 å’Œ JavaScript çš„å¿…è¯»ä¹‹ä½œã€‚ä¹¦çœ‹èµ·æ¥æ¯”è¾ƒåšï¼Œæ˜¯å› ä¸ºé‡Œé¢çš„ä»£ç å¾ˆå¤šã€‚</li><li><a href="https://book.douban.com/subject/24533314/">HTML 5 Canvas æ ¸å¿ƒæŠ€æœ¯ </a>ï¼Œå¦‚æœä½ è¦åš HTML 5 æ¸¸æˆçš„è¯ï¼Œè¿™æœ¬ä¹¦å¿…è¯»ã€‚</li><li>å¯¹äº SVGã€Canvas å’Œ WebGL è¿™ä¸‰ä¸ªå¯¹åº”äºçŸ¢é‡å›¾ã€ä½å›¾å’Œ 3D å›¾çš„æ¸²æŸ“æ¥è¯´ï¼Œç»™å‰ç«¯å¼€å‘å¸¦æ¥äº†é‡æ­¦å™¨ï¼Œå¾ˆå¤š HTML5 å°æ¸¸æˆä¹Ÿå› æ­¤è“¬å‹ƒå‘å±•ã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥å­¦ä¹ ä¸€ä¸‹ã€‚å­¦ä¹ è¿™ä¸‰ä¸ªæŠ€æœ¯ï¼Œæˆ‘ä¸ªäººè§‰å¾—æœ€å¥½çš„åœ°æ–¹æ˜¯ MDNã€‚</li><li><a href="https://developer.mozilla.org/en-US/docs/Web/SVG">SVG: Scalable Vector Graphics</a></li><li><a href="https://developer.mozilla.org/kab/docs/Web/API/Canvas_API">Canvas API</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API">The WebGL API: 2D and 3D graphics for the web</a></li></ul></li></ul><p>  æœ€åæ˜¯å‡ ä¸ªèµ„æºåˆ—è¡¨ã€‚</p><ul><li><a href="https://github.com/diegocard/awesome-html5">Awesome HTML5</a> ã€‚GitHub ä¸Šçš„ Awesome HTML5ï¼Œå…¶ä¸­æœ‰å¤§é‡çš„èµ„æºå’ŒæŠ€æœ¯æ–‡ç« ã€‚</li><li><a href="https://github.com/willianjusten/awesome-svg">Awesome SVG</a></li><li><a href="https://github.com/raphamorim/awesome-canvas">Awesome Canvas</a></li><li><a href="https://github.com/sjfricke/awesome-webgl">Awesome WebGL</a></li></ul><h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><p>åœ¨ã€Šç¨‹åºå‘˜ç»ƒçº§æ”»ç•¥ã€‹ç³»åˆ—æ–‡ç« æœ€å¼€å§‹ï¼Œæˆ‘ä»¬å°±æ¨èè¿‡ CSS çš„åœ¨çº¿å­¦ä¹ æ–‡æ¡£ï¼Œè¿™é‡Œå†æ¨èä¸€ä¸‹ <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS">MDN Web Doc - CSS </a>ã€‚æˆ‘ä¸ªäººè§‰å¾—åªè¦ä½ ä»”ç»†è¯»ä¸€ä¸‹æ–‡æ¡£ï¼ŒCSS å¹¶ä¸éš¾å­¦ã€‚ç»å¤§å¤šæ•°è§‰å¾—éš¾çš„ï¼Œä¸€æ–¹é¢æ˜¯æ–‡æ¡£æ²¡è¯»é€ï¼Œå¦ä¸€æ–¹é¢æ˜¯æµè§ˆå™¨æ”¯æŒçš„æ ‡å‡†ä¸ä¸€è‡´ã€‚æ‰€ä»¥ï¼Œå­¦å¥½ CSS æœ€å…³é”®çš„è¿˜æ˜¯è¦ä»”ç»†åœ°è¯»æ–‡æ¡£ã€‚ä¹‹åï¼Œåœ¨å†™ CSS çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ï¼Œä½ çš„ CSS ä¸­æœ‰å¾ˆå¤šçœ‹èµ·æ¥ç›¸ä¼¼çš„ä¸œè¥¿ã€‚ä½ çš„ DRY - Donâ€™t Repeat Yourself æ´ç™–å‘Šè¯‰ä½ ï¼Œè¿™æ˜¯ä¸å¯¹çš„ã€‚æ‰€ä»¥ï¼Œä½ éœ€è¦å­¦ä¼šä½¿ç”¨ <a href="http://lesscss.org/">LESS</a> å’Œ <a href="http://sass-lang.com/">SaSS</a> è¿™ä¸¤ä¸ª CSS é¢„å¤„ç†å·¥å…·ï¼Œå…¶å¯ä»¥å¸®ä½ æé«˜å¾ˆå¤šæ•ˆç‡ã€‚ç„¶åï¼Œä½ éœ€è¦å­¦ä¹ ä¸€ä¸‹ CSS çš„ä¹¦å†™è§„èŒƒï¼Œå‰é¢çš„ã€Šç¨‹åºå‘˜ä¿®å…»ã€‹ä¸€æ–‡ä¸­æåˆ°è¿‡ä¸€äº›ï¼Œè¿™é‡Œå†è¡¥å……å‡ ä¸ª:</p><ul><li><p><a href="https://github.com/necolas/idiomatic-css">Principles of writing consistent, idiomatic CSS</a></p></li><li><p><a href="https://github.com/grvcoelho/css-styleguide">Opinionated CSS styleguide for scalable applications</a></p></li><li><p><a href="https://google.github.io/styleguide/htmlcssguide.html">Google HTML/CSS Style Guide</a></p><p>&emsp;å¦‚æœä½ éœ€è¦æ›´æœ‰æ•ˆç‡ï¼Œé‚£ä¹ˆä½ è¿˜éœ€è¦ä½¿ç”¨ä¸€äº› CSS Frameworkï¼Œå…¶ä¸­æœ€è‘—åçš„å°±æ˜¯ Twitter å…¬å¸çš„ Bootstrapï¼Œå…¶æœ‰å¾ˆå¤šä¸é”™çš„ UI ç»„ä»¶ï¼Œé¡µé¢å¸ƒå±€æ–¹æ¡ˆï¼Œå¯ä»¥è®©ä½ éå¸¸æ–¹ä¾¿ä¹Ÿéå¸¸å¿«é€Ÿåœ°å¼€å‘é¡µé¢ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ï¼Œä¸»æ‰“æ¸…æ–° UI çš„ Semantic UI ã€ä¸»æ‰“å“åº”å¼ç•Œé¢çš„ Foundation å’ŒåŸºäº Flexbox çš„ Bulmaã€‚<br>&emsp;å½“ç„¶ï¼Œåœ¨ä½¿ç”¨ CSS ä¹‹å‰ï¼Œä½ éœ€è¦æŠŠä½ æµè§ˆå™¨ä¸­çš„ä¸€äº› HTML æ ‡ç­¾ç»™æ ‡å‡†åŒ–æ‰ã€‚æ‰€ä»¥ï¼Œæ¨èå‡ ä¸ª Reset æˆ–æ ‡å‡†åŒ–çš„ CSS åº“ï¼šNormalizeã€MiniRest.cssã€sanitize.css å’Œ unstyle.cssã€‚å…³äºæ›´å¤šçš„ CSS æ¡†æ¶ï¼Œä½ å¯ä»¥å‚çœ‹<a href="https://github.com/troxler/awesome-css-frameworks">Awesome CSS Frameworks</a> ä¸Šçš„åˆ—è¡¨ã€‚æ¥ä¸‹æ¥ï¼Œæ˜¯å‡ ä¸ªå…¬å¸çš„ CSS ç›¸å…³å®è·µï¼Œä¾›ä½ å‚è€ƒ:</p></li><li><p><a href="https://codepen.io/chriscoyier/post/codepens-css"> CodePenâ€™s CSS</a></p></li><li><p><a href="https://markdotto.com/2014/07/23/githubs-css/">Github çš„ CSS</a></p></li><li><p>Mediumâ€™s CSS is actually pretty f***ing good()</p></li><li><p>CSS at BBC Sport</p></li><li><p><a href="https://blog.trello.com/refining-the-way-we-structure-our-css-at-trello">Refining The Way We Structure Our CSS At Trello</a></p><p>&emsp; æœ€åæ˜¯ä¸€ä¸ªå¯ä»¥å†™å‡ºå¯æ‰©å±•çš„ CSS çš„é˜…è¯»åˆ—è¡¨ <a href="https://github.com/davidtheclark/scalable-css-readin">A Scalable CSS Reading List</a> ã€‚</p><h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h3><p>ä¸‹é¢æ˜¯å­¦ä¹  JavaScript çš„ä¸€äº›å›¾ä¹¦å’Œæ–‡ç« ã€‚</p></li><li><p><a href="">JavaScript: The Good Parts</a> ï¼Œä¸­æ–‡ç¿»è¯‘ç‰ˆä¸ºã€ŠJavaScript è¯­è¨€ç²¾ç²¹ã€‹ã€‚è¿™æ˜¯ä¸€æœ¬ä»‹ç» JavaScript è¯­è¨€æœ¬è´¨çš„æƒå¨å›¾ä¹¦ï¼Œå€¼å¾—ä»»ä½•æ­£åœ¨æˆ–å‡†å¤‡ä»äº‹ JavaScript å¼€å‘çš„äººé˜…è¯»ï¼Œå¹¶ä¸”éœ€è¦åå¤é˜…è¯»ã€‚å­¦ä¹ ã€ç†è§£ã€å®è·µå¤§å¸ˆçš„æ€æƒ³ï¼Œæˆ‘ä»¬æ‰å¯èƒ½ç«™åœ¨å·¨äººçš„è‚©ä¸Šï¼Œæ‰æœ‰æœºä¼šè¶…è¶Šå¤§å¸ˆï¼Œè¿™æœ¬ä¹¦å°±æ˜¯å¼€å§‹ã€‚</p></li><li><p><a href="">Secrets of the JavaScript Ninja</a> ï¼Œä¸­æ–‡ç¿»è¯‘ç‰ˆä¸ºã€ŠJavaScript å¿è€…ç§˜ç±ã€‹ï¼Œæœ¬ä¹¦æ˜¯ jQuery åº“åˆ›å§‹äººç¼–å†™çš„ä¸€æœ¬æ·±å…¥å‰–æ JavaScript è¯­è¨€çš„ä¹¦ã€‚é€‚åˆå…·å¤‡ä¸€å®š JavaScript åŸºç¡€çŸ¥è¯†çš„è¯»è€…é˜…è¯»ï¼Œ</p></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
